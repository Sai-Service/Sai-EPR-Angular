<div class="center">
    <table style="width: 100%;background-color: white;">
    <tr>
        <td class="PageHeader">
            &nbsp;&nbsp;AR&nbsp;Invoice 
        </td>
    </tr>
    </table>
    <div class="center" style="width: 100%;">
        <div class="form-bg">
            <div class="center" style="width: 100%;">
                <form [formGroup]="arInvoiceForm" (ngSubmit)="arInvoice(arInvoiceForm.value)">

 <table class="center" style="width: 100;" style="border-bottom: solid 1px blue;width: 100%; background-color: #FFE4B5; padding-bottom: 2rem;">
 <tr>
     <td>
         <table class="center" style="width: 100%;">
            <tr >
                
                <br>
                <td style="width: 15%" class="LabelFontStyle" >
                    &nbsp;Invoice&nbsp;No&nbsp;:&nbsp;
                </td>
                <td>
                    <input type="text"  formControlName="trxNumber1" [(ngModel)]="trxNumber1" class="form-control" (keydown.tab)="searchByInvoiceNo(trxNumber1)">
                    <!-- <input formControlName="segment1" [(ngModel)]='segment1' value={{segment1}}
                    class="form-control"
                    [ngClass]="{ 'is-invalid': submitted && f.poNumber.errors }"
                    placeholder="Enter PO number" (keydown.tab)="searchByInvoiceNo(segment1)"> -->
                </td>
                    <td style="width: 15%" class="LabelFontStyle">
                        &nbsp;Order&nbsp;No&nbsp;:&nbsp;
                    </td>
                    <td>
                        <input type="text" class="form-control">
                        <!-- <input formControlName="segment1" [(ngModel)]='segment1' value={{segment1}}
                        class="form-control"
                        [ngClass]="{ 'is-invalid': submitted && f.poNumber.errors }"
                        placeholder="Enter PO number" (keydown.tab)="poFind(segment1)"> -->
                    </td>
                        <td style="width: 15%" class="LabelFontStyle">
                            &nbsp;Invoice&nbsp;Date&nbsp;:&nbsp;
                        </td>
                        <td>
                            <input type="text" class="form-control">
                           
</td>
<td style="width: 15%" class="LabelFontStyle">
    &nbsp;Order&nbsp;Date&nbsp;:&nbsp;
</td>
<td>
    <input type="text" class="form-control">
    <!-- <input formControlName="segment1" [(ngModel)]='segment1' value={{segment1}}
    class="form-control"
    [ngClass]="{ 'is-invalid': submitted && f.poNumber.errors }"
    placeholder="Enter PO number" (keydown.tab)="poFind(segment1)"> -->
    </td>
</tr>
</table>

     </td></tr></table>


<section class="mx-2 pb-3">

    <ul class="nav nav-tabs md-tabs" id="myTabMD" role="tablist">
      <li class="nav-item waves-effect waves-light">
        <a class="nav-link active" id="home-tab-md" data-toggle="tab" href="#home-md" role="tab" aria-controls="home-md" aria-selected="true">AR Invoice</a>
      </li>
      <li class="nav-item waves-effect waves-light">
        <a class="nav-link" id="profile-tab-md" data-toggle="tab" href="#profile-md" role="tab" aria-controls="profile-md" aria-selected="false" (click)="viewARLinedata()" [style.display]="isVisibleArInvoiceLine ? 'block' : 'none'">AR Invoice Line</a>
      </li>
      <li class="nav-item waves-effect waves-light">
        <a class="nav-link" id="contact-tab-md" data-toggle="tab" href="#contact-md" role="tab" aria-controls="contact-md" aria-selected="false" (click)="viewARDist()" [style.display]="isVisibleArDist ? 'block' : 'none'">Distribution</a>
    </li>
    </ul>
     <div style="border: 0px;" class="tab-content card " id="myTabContentMD">
      <div class="tab-pane fade show active" id="home-md" role="tabpanel" aria-labelledby="home-tab-md">
        <div class="center" style="width: 100%;">
            <div class="form-bg">
<table class="center">
    <fieldset class="RFS">
        <legend id="FormsPH_LGAadhaar" class="RFSL"
            style="font-size: 10px;color: rgb(238, 101, 101);">&nbsp;Header&nbsp;
        </legend>

       
    <tr>
        <input hidden type="text" [(ngModel)]="ouId" formControlName="ouId">
        <td style="width: 15%" class="LabelFontStyle1">&nbsp;Source&nbsp;:&nbsp;</td>
        <td>
            <select
            formControlName="source" name="source" id="source" class="form-control" >
                                    <option *ngFor="let sc of sourceList" [ngValue]="sc.code">
                                        {{sc.code}}
                                    </option>
            </select>
        </td>
        <td style="width: 15%" class="LabelFontStyle1">&nbsp;Class&nbsp;:&nbsp;</td>
        <td>
            <!-- <input type="text"  class="form-control"> -->
            <select
            formControlName="class" name="class" id="class" class="form-control" (change)="onOptionSelectInvoice($event)">
                                 <option *ngFor="let sc of classList" [value]=sc.code>
                                        {{sc.code}}
                                    </option>
            </select>
        </td>
        <td style="width: 15%" class="LabelFontStyle">&nbsp;Invoice&nbsp;Number&nbsp;:&nbsp;</td>
        <td>
            <input disabled type="text" formControlName="trxNumber" [(ngModel)]="trxNumber" class="form-control">
        </td>
        <td style="width: 15%" class="LabelFontStyle">&nbsp;Line&nbsp;:&nbsp;</td>
        <td>
            <input disabled type="text"  class="form-control">
        </td>
        </tr>
        <tr>
            <td style="width: 15%" class="LabelFontStyle1">&nbsp;Type&nbsp;:&nbsp;</td>
            <td>
                <!-- <input type="text" formControlName="invType" class="form-control"> [ngValue]="sc.custTrxTypeId"-->
                <select formControlName="custTrxTypeId" name="custTrxTypeId" id="custTrxTypeId" class="form-control">
                                        <option *ngFor="let sc of invTypeList" [value]=sc.custTrxTypeId>
                                            {{sc.name}}
                                        </option>
                </select>
            </td>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;OM&nbsp;Reference&nbsp;:&nbsp;</td>
        <td>
            <input type="text" formControlName="referenceNo" class="form-control">
        </td>
        <td style="width: 15%" class="LabelFontStyle">&nbsp;Invoice&nbsp;Date&nbsp;:&nbsp;</td>
        <td>
            <!-- <input disabled type="text" formControlName="invoiceDate" class="form-control" [(ngModel)]="invoiceDate"> -->
            <div *ngIf="displayglDate; then thenglDate; else elseglDate"></div>
            <ng-template #thenglDate>
            <!-- <input type="date"  formControlName="invoiceDate" class="form-control"  style="background-color: yellow;"  > -->
            <input type="date"  formControlName="invoiceDate" [(ngModel)]="invoiceDate" class="form-control"  style="background-color: yellow;"  
            max="{{minDate | date:'yyyy-MM-dd'}}"  (change)="validateDate(invoiceDate,'INV')" >
        </ng-template> 
            <ng-template #elseglDate>
                <input  formControlName="invoiceDate" class="form-control" [(ngModel)]="invoiceDate" value="{{invoiceDate | date:'dd-MM-yyyy'}}" style="background-color: yellow;"  
                max="{{minDate | date:'yyyy-MM-dd'}}" (change)="validateDate(invoiceDate,'INV')" >
            </ng-template>   
        </td>

        <!-- <input   type="date"  formControlName="glDate"  id="glDate" [(ngModel)]="glDate" class="form-control" 
        max="{{minDate | date:'yyyy-MM-dd'}}" (change)="glPrdValidate(glDate)" > -->


        <td style="width: 15%" class="LabelFontStyle">&nbsp;Tax&nbsp;:&nbsp;</td>
        <td>
            <input disabled type="text" formControlName="taxAmount" class="form-control">
        </td>
        </tr>
        <tr>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;DMS&nbsp;IRN:</td>
            <td>
                <input type="text"  class="form-control">
            </td>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;DMS&nbsp;Invoice&nbsp;No&nbsp;:&nbsp;</td>
            <td>
                <input type="text" formControlName="dmsInvNo" class="form-control">
            </td>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;GL&nbsp;Date&nbsp;:&nbsp;</td>
            <td>
                <!-- glDate open for kiran Sir requirement---Jyotik  value="{{glDate | date:'dd-MM-yyyy'}}"-->
                <div *ngIf="displayglDate1; then thenglDate1; else elseglDate1"></div>
                <ng-template #thenglDate1>
                <input type="date"  formControlName="glDate" [(ngModel)]="glDate" class="form-control"  style="background-color: yellow;" 
                        max="{{minDate | date:'yyyy-MM-dd'}}" (change)="validateDate(glDate,'GLD')" >
                </ng-template> 
                <ng-template #elseglDate1>
                    <input  formControlName="glDate" class="form-control" [(ngModel)]="glDate" value="{{glDate | date:'dd-MM-yyyy'}}" style="background-color: yellow;" 
                       max="{{minDate | date:'yyyy-MM-dd'}}" (change)="validateDate(glDate,'GLD')" >
                </ng-template>           
            </td>
            <td style="width: 15%" class="LabelFontStyle1">&nbsp;IRN (Y/N)&nbsp;:&nbsp;</td>
            <td>
                <select formControlName="irnYN" name="irnYN" id="irnYN" value={{irnYN}}  class="form-control"  style="background-color: yellow" >
                       <option value="N" selected>N</option>
                       <option value="Y">Y</option> 
                </select>
            </td>
            <input hidden formControlName="emplId"[(ngModel)]="emplId">
        </tr>
        <tr>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;DMS&nbsp;Order&nbsp;No&nbsp;:&nbsp;</td>
            <td>
                <input type="text" formControlName="dmsOrderNo" class="form-control">
            </td>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;Currency&nbsp;:&nbsp;</td>
            <td>
                <input type="text" formControlName="invCurrancyCode" [(ngModel)]="invCurrancyCode" disabled class="form-control">
            </td>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;IRN&nbsp;No.&nbsp;:&nbsp;</td>
            <td>
                <input type="text" disabled class="form-control">
            </td>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;Balance&nbsp;:&nbsp;</td>
            <td>
                <input type="text" formControlName="balance" [(ngModel)]="balance" disabled class="form-control">
            </td>
        </tr>
        <tr>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;Vehicle&nbsp;no&nbsp;:&nbsp;</td>
            <td>
                <input type="text" class="form-control">
            </td>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;Insurance&nbsp;:&nbsp;</td>
            <td>
                <input type="text" class="form-control">
            </td>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;Total&nbsp;:&nbsp;</td>
            <td>
                <input type="text" formControlName="invoiceAmount" disabled class="form-control">
            </td>
            <td style="width: 15%" class="LabelFontStyle">&nbsp;QR&nbsp;Code:</td>
            <td>
                <input type="text" disabled class="form-control">
            </td>


        </tr>
        <tr>

            <td style="width: 15%" class="LabelFontStyle1">&nbsp;Location&nbsp;Name&nbsp;:&nbsp;</td>
            <td>
                <select formControlName="locId" id="locId" class="form-control" (change)="dispArInvLine()">
                    <option *ngFor="let sc of  locIdList" [ngValue]="sc.locId" >
                        {{sc.locId}}-{{sc.locCode}}
                    </option>
                </select>
                <!-- <div *ngIf="submitted && f.locId.errors" class="invalid-feedback">
                    <div *ngIf="f.locId.errors.required">locId is required</div> -->
                    <span
                        *ngIf="!arInvoiceForm.get('locId').valid && arInvoiceForm.get('locId').touched">Please
                        Enter Location Name</span>
            </td>

            <td style="width: 15%" class="LabelFontStyle">&nbsp;Act&nbsp;Date&nbsp;:&nbsp;</td>
            <td>
                <input type="date" disabled class="form-control">
            </td>
            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Ack&nbsp;No&nbsp;:&nbsp;</td>
            <td>
                <input type="text" disabled class="form-control">
            </td>
            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Status&nbsp;:&nbsp;</td>
            <td>
                <input type="text" disabled formControlName="status" [(ngModel)]="status" class="form-control">
            </td>

        </tr>
        <div *ngIf="displayDepartmentList; then thenDepartmentList; else elseDepartmentList"></div>
        <ng-template #thenDepartmentList>
        <tr>
            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Department&nbsp;:&nbsp;</td>
            <td>  
                <select    formControlName="deptId" id="deptId" [(ngModel)]="deptId" class="form-control"  style="background-color:yellow">
                    <option disabled>--Select--</option>
                    <option *ngFor="let sc of  DepartmentList" [ngValue]="sc.cmnTypeId">
                        {{sc.cmnTypeId}}-{{sc.code}}
                    </option>
                </select>
            </td>
            <!-- <td> <input hidden disabled style="width:30px ;" type="number"  formControlName="deptId"  id="deptId" [(ngModel)]="deptId" class="form-control" ></td> -->
        </tr>
        </ng-template>
        <ng-template #elseDepartmentList>

        </ng-template>
    </fieldset>

            <fieldset class="RFS">
                <legend id="FormsPH_LGAadhaar" class="RFSL"
                    style="font-size: 11px;color: black;">&nbsp;Ship&nbsp;To&nbsp;
                </legend>
                <tr>
                    <input hidden type="text" formControlName="shipToSiteId">
                    <input hidden type="text" formControlName="billToCustId">
                    <input hidden type="text" formControlName="shipToCustId">
                    <input hidden type="text" formControlName="billToSiteId">
                    <td style="width: 15%"  class="LabelFontStyle">&nbsp;Customer&nbsp;Account&nbsp;:&nbsp;</td>
            <td>
                <input type="text" style="width: 5rem;" formControlName="shipToCustNo"  disabled class="form-control">
            </td>
            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Name&nbsp;:&nbsp;</td>
            <td>
                <input type="text" formControlName="shipToCustName" disabled class="form-control">
            </td>

            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Address&nbsp;:&nbsp;</td>
            <td>
                <input type="text" formControlName="shipToCustAdd" disabled class="form-control">
            </td>
            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Contact&nbsp;:&nbsp;</td>
            <td>
                <input type="text" disabled class="form-control" formControlName="shipcontactNo">
            </td>
        </tr>
            </fieldset>

            <fieldset class="RFS">
                <legend id="FormsPH_LGAadhaar" class="RFSL"
                    style="font-size: 10px;color: black;">&nbsp;Bill&nbsp;To&nbsp;
                </legend>
                <tr>
                    <td style="width: 15%"  class="LabelFontStyle1">&nbsp;Customer&nbsp;Account&nbsp;:&nbsp;</td>
            <td>
                <!-- <input type="number" min="0"  style="width: 5rem;" [(ngModel)]="billToCustNo" formControlName="billToCustNo" (keydown.tab)="accountNoSearchfn(billToCustNo)"  class="form-control"> -->
                <input type="number" formControlName="billToCustNo" value={{billToCustNo}} [(ngModel)]="billToCustNo" (keydown.tab)="accountNoSearchfn(billToCustNo, null)"  class="form-control" style="width: 170px;">
              </td>
              <input hidden formControlName="custtaxCategoryName">
            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Name&nbsp;:&nbsp;</td>
            <td>
                <!-- <input type="text" formControlName="billToCustName" class="form-control"> -->
                <input type="text" formControlName="billToCustName" value={{billToCustName}} [(ngModel)]="billToCustName"                class="form-control" style="width: 170px;" data-bs-toggle="modal" data-bs-target="#customerNameSearchModel">
            </td>
            <td>
                <button type="button" class="btn btn-primary" (click)="custNameSearch(billToCustName)"
                    data-toggle="modal" data-target="#customerNameSearchModel" style="width: 2rem;color: white;">
                    <i class="fa fa-search"></i> </button>
                <div class="modal fade" id="customerNameSearchModel" tabindex="-1" role="dialog"
                    aria-labelledby="customerNameSearchModel" aria-hidden="true">
                    <div class="modal-dialog modal-xl" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="customerNameSearchModel">Additional&nbsp;Details</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <table>
                                    <tr>
                                        <table class="GridFont" id="excel-table" cellspacing="0"
                                            cellpadding="4">
                                            <tbody>
                                                <tr class="GridHeader">
                                                    <th scope="col">Customer No</th>
                                                    <th scope="col">Customer Name</th>
                                                    <th scope="col">Address</th>
                                                    <th scope="col">GST No</th>
                                                    <th scope="col">Pan No</th>
                                                    <th scope="col">Mobile</th>
                                                    <th scope="col">Select</th>
                                                </tr>
                                                <tr *ngFor="let com of customerNameSearch" class="ItemStyle"
                                                    style="text-decoration:none;">
                                                    <td style="width: 195px;">{{com.accountNo}}</td>
                                                    <td style="width: 195px;">{{com.custName}}</td>
                                                    <td style="width: 195px;">{{com.billToAddress}}</td>
                                                    <td style="width: 195px;">{{com.gstNo}}</td>
                                                    <td style="width: 195px;">{{com.panNo}}</td>
                                                    <td style="width: 195px;">{{com.mobile1}}</td>
                                                    <td><button class="btn-primary"
                                                            (click)="accountNoSearchfn(com.accountNo, null)"
                                                            data-dismiss="modal">Select</button></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </tr>
                                </table>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary"
                                    data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>


            </td>

            <td style="width: 15%" class="LabelFontStyle">Site&nbsp;Name&nbsp;&nbsp;:&nbsp;  </td>
            <div *ngIf="displayCustomerSite; then thenCustomerSite; else elseCustomerSite"></div>
            <ng-template #thenCustomerSite>
            <td>
                <!-- <input disabled  type="text" formControlName="siteName" [(ngModel)] ="siteName"   class="form-control">  -->
            <select formControlName="siteName" id="siteName" class="form-control" style="width: 200px;"
            [ngClass]="{ 'is-invalid': submitted && f.siteName.errors }"
            (ngModelChange)='onOptionsSelectedcustSiteName($event)'>
            <option *ngFor="let custSite of accountNoSite" [value]="custSite.siteName">
                {{custSite.siteName}}
            </option>
        </select>
        <div *ngIf="submitted && f.siteName.errors" class="invalid-feedback">
            <div *ngIf="f.siteName.errors.required">Site Code cannot be blank</div>
        </div>
    </td>
            </ng-template>
            <ng-template #elseCustomerSite>
                <td>
                    <input disabled type="text" class="form-control" formControlName="siteName" value={{siteName}}
                        style="width: 160px;">
                </td>
            </ng-template>
            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Address&nbsp;:&nbsp;</td>
            <td>
                <input type="text" disabled  formControlName="billToCustAdd" class="form-control">
            </td>
            <!-- <td style="width: 15%"  class="LabelFontStyle">&nbsp;Contact&nbsp;:&nbsp;</td>comment by vinita -->
            <td>
                <input type="text" hidden class="form-control" formControlName="billcontactNo">
            </td>
        </tr>
            </fieldset>
            <fieldset class="RFS">
                <legend id="FormsPH_LGAadhaar" class="RFSL"
                    style="font-size: 10px;color: black;">&nbsp;Sold&nbsp;To&nbsp;&&nbsp;Paying&nbsp;Customer&nbsp;
                </legend>
                <tr>
                    <td style="width: 15%"  class="LabelFontStyle">&nbsp;Sold&nbsp;to&nbsp;cust&nbsp;Name&nbsp;:&nbsp;</td>
            <td>
                <input type="text" disabled formControlName="soldToCustName" class="form-control">
            </td>
            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Sold&nbsp;Customer&nbsp;ID&nbsp;:&nbsp;</td>
            <td>
                <input type="text" disabled  formControlName="soldToCustId" class="form-control">
            </td>
            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Paying&nbsp;Customer&nbsp;ID&nbsp;:&nbsp;</td>
            <td>
                <input type="text"  class="form-control">
            </td>
                    <td style="width: 15%"  class="LabelFontStyle">&nbsp;Paying&nbsp;Cust&nbsp;Name&nbsp;:&nbsp;</td>
                    <td>
                        <input type="text" formControlName="billToCustName" class="form-control">
                    </td>

                </tr>
                </fieldset>

                <!-- <fieldset class="RFS">
                    <legend id="FormsPH_LGAadhaar" class="RFSL"
                        style="font-size: 10px;color: black;">Paying Customer&nbsp;
                    </legend>
                    <tr>
                        <td style="width: 15%"  class="LabelFontStyle">Name:</td>
                        <td>
                            <input type="text"  class="form-control">
                        </td>
                        <td style="width: 15%"  class="LabelFontStyle">Customer ID:</td>
                        <td>
                            <input type="text"  class="form-control">
                        </td>
                    </tr>
                    </fieldset> -->

                    <fieldset class="RFS">
                        <legend id="FormsPH_LGAadhaar" class="RFSL"
                            style="font-size: 10px;color: black;">&nbsp;
                        </legend>
                        <tr>
                            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Payment&nbsp;Term&nbsp;:&nbsp;</td>
                            <td>
                                <!-- <input type="text"  class="form-control"> -->
                                <select formControlName="paymentTerm"  class="form-control"[(ngModel)]="paymentTerm">
                                    <option>--Select--</option>
                                    <option *ngFor="let sc of  paymentTermList" [ngValue]="sc.lookupValueId" [Value]="sc.lookupValueId" >
                                        {{sc.lookupValue}}
                                    </option>
                                </select>
                            </td>
                            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Due&nbsp;Date&nbsp;:&nbsp;</td>
                            <td>
                                <input type="date"  class="form-control">
                            </td>
                            <td style="width: 15%"  class="LabelFontStyle">&nbsp;Sales&nbsp;person&nbsp;name&nbsp;:&nbsp;</td>
                            <td>
                                <input type="text"  class="form-control">
                            </td>
                            <td style="width: 15%"  class="LabelFontStyle">&nbsp;SR&nbsp;Reference&nbsp;No&nbsp;:&nbsp; </td>
                            <td>
                                <input type="text"  class="form-control">
                            </td>

                        </tr>
                        </fieldset>
        </table>
</div>
</div>
      </div>
      <div class="tab-pane fade" id="profile-md" role="tabpanel" aria-labelledby="profile-tab-md">
        <div class="center">
            <div class="form-bg">
                <div class="center">
                    <table style="width: 100%;background-color: white;">
                        <tr>
                            <td class="PageHeader1">
                                &nbsp;&nbsp;Line&nbsp;Details
                            </td>
                        </tr>
                    </table>
                    <div class="center">
                        <div class="center" formArrayName="invLines">
                            <div class="grid_scroll">
                                <table class="GridFont" cellspacing="0" cellpadding="4" border="0"  style="width:100%;border-collapse:collapse;">
                                <!-- <table style="width: 100%; border: solid 1px Gray" class="auto-style4"
                                    cellspacing="0" cellpadding="4" rules="all" class="center"> -->
                                    <thead>
                                        <tr class="GridHeader">
                                            <!-- <th scope="col">Distribution</th> -->
                                            <th scope="col">No.</th>
                                            <!-- <th scope="col">Item Type</th> -->
                                            <th scope="col">Inventory Item</th>
                                            <th scope="col">Inventory Category</th>
                                            <th scope="col">Description</th>
                                            <th scope="col">uom</th>
                                            <th scope="col">Quantity</th>
                                            <th scope="col">Price</th>
                                            <th scope="col">Base Amount</th>
                                            <th scope="col">Tax %</th>
                                            <th scope="col">Tax Category</th>
                                            <th scope="col">Tax Amount</th>
                                            <th scope="col">Total Amont</th>
                                            <th scope="col">HSN/ SAC code</th>
                                            <!-- <th scope="col">PO Charge Account</th> -->
                                            <th scope="col">Add Row</th>
                                            <th scope="col">Delete Row</th>
                                        </tr>
                                    </thead>
                                   <!-- <tr> -->
                                    <ng-container *ngFor="let group of lineDetailsArray.controls; let i= index"
                                    [formGroupName]="i" class="auto-style5">
                                    <tbody>
                                        <tr>
                                            <!-- <td>
                                                <button type="button" href="#contact-tab-md" class="btn btn-primary" (click)="onOptionTaxCatSelected(i,taxCategoryId,null,basicAmt)">Distribution</button>
                                                < <li class="nav-item waves-effect waves-light">
                                                    <a (click)="onOptionTaxCatSelected(i,taxCategoryId,null,basicAmt)" class="nav-link" id="contact-tab-md" data-toggle="tab" href="#contact-md" role="tab" aria-controls="contact-md" aria-selected="false">Distribution</a>
                                                  </li> -->

                                            <!-- </td> -->
        <input type="text" hidden formControlName="taxCategoryId">
        <!-- (click)="taxDetails('insert', i, taxCategoryId)" -->
                                                  <div *ngIf="displayinvItem; then thenenabletext; else elsedisabletext"></div>
                                                    <ng-template #thenenabletext>
                                                <td><input  type="number" style="width: 2rem;" class="form-control" formControlName="lineNum" (click)="openTaxDetails(i)" ></td>
                                                <!-- (click)="onOptionTaxCatSelected(i,taxCategoryId,null,basicAmt,'profile-md')"comment by vinita on25feb22 -->
                                                <td>
                                                      <input type="text" list="dynmicUserIds1" (keyup)="filterRecord( $event,i)"
                                                        formControlName="segment" id="invItemIdFirstWay" class="form-control"  (ngModelChange)="onOptioninvItemIdSelected($event,i)" 
                                                        style="height: 20px;width:120px;" />
                                                        <!--  -->
                                                    <datalist id="dynmicUserIds1" autocomplete="off">
                                                        <option *ngFor="let item of invItemList"
                                                            [ngValue]="item.itemId">{{item.segment}}
                                                        </option>
                                                    </datalist>
                                                    <input hidden type="text" formControlName="itemId">
                                                </td>

                                                <td> <input disabled type="text" formControlName="invCategory"
                                                        class="form-control" style="width: 4rem;"></td>
                                                <td>
                                                    <!-- <div *ngIf="displayinvDesc; then thenBlockinvDesc; else elseBlockinvDesc"></div>
                <ng-template #thenBlockinvDesc> -->
                                                    <input type="text"  formControlName="description"
                                                        class="form-control" id="description">
                <!-- </ng-template>
                <ng-template #elseBlockinvDesc>
                    <input type="text"  formControlName="description"
                        class="form-control" id="description">
        </ng-template> -->

                                                    </td>
                                                <td> <input disabled type="text" formControlName="uom"
                                                        style="width: 3rem;" class="form-control"></td>

                                                <td> <input type="number" min="0"   formControlName="orderedQty" (change)="onKeyorderedQty(i)"
                                                        style="width: 4rem;" class="form-control" ></td>
                                                <!-- <td> <input type="number" min="0"  formControlName="orderedQty"
                                                        style="width: 4rem;" class="form-control"
                                                        [ngClass]="{ 'is-invalid': submitted && f.orderedQty.errors }">
                                                    <div *ngIf="submitted && f. orderedQty.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="f.orderedQty.errors?.pattern">Code cannot be
                                                            blank, have spaces or have special characters</div>
                                                    </div> -->
                                                    <!-- <span
                                                        *ngIf="!poMasterDtoForm.get('orderedQty').valid && poMasterDtoForm.get('orderedQty').touched">Qty
                                                        cannot be blank, have negetive value</span> -->
                                                <!-- </td> -->

                                                    <input hidden formControlName="diss1" value={{diss1}}>

                                                <td> <input type="number" min="0"  formControlName="unitSellingPrice"
                                                        style="width: 4rem;" class="form-control"
                                                        (change)="onKey(i)"></td> 
                                                    </ng-template>
                                                    <ng-template #elsedisabletext>
                                                <td><input   type="number" style="width: 2rem;" class="form-control" formControlName="lineNum" (click)="openTaxDetails(i)" ></td>
                                                <td>
                                                      <input disabled type="text" formControlName="segment"  class="form-control"
                                                        style="height: 20px;width:120px;" />
                                                </td>

                                                <td> <input disabled type="text" formControlName="invCategory"
                                                        class="form-control" style="width: 4rem;"></td>
                                                <td>
                                                <input disabled type="text"  formControlName="description"
                                                        class="form-control" id="description">
                                                </td>
                                                <td> <input disabled type="text" formControlName="uom"
                                                        style="width: 3rem;" class="form-control"></td>

                                                <td> <input disabled type="number" min="0"   formControlName="orderedQty"
                                                        style="width: 4rem;" class="form-control" ></td>
                                                <td> <input disabled type="number" min="0"  formControlName="unitSellingPrice"
                                                        style="width: 4rem;" class="form-control"
                                                        ></td> 
                                                    </ng-template>
                                                <td> <input disabled type="number" formControlName="basicAmt"
                                                        (keyup)="onKey(i)" style="width: 4rem;"
                                                        class="form-control"></td>
                                                        <td> <input  type="number" formControlName="taxPer" [disabled]="isDisabledPer"
                                                             style="width: 4rem;" (change)="onOptionTaxPerSel($event,i)"
                                                            class="form-control"></td>
                                                        <td>
                                                            <!-- <input type="text" formControlName="taxCategoryName"
                                                                class="form-control"> -->
                                                            <!-- (ngModelChange)='onOptioninvItemIdSelected(i)'
                                                                 [value]="sc.itemId" -->
                                                                
                                                    <div *ngIf="displaytaxName; then thenenableselect; else elseenabletext"></div>
                                                    <ng-template #thenenableselect>
                                                        <td>
                                                            <select formControlName="taxCategoryName" id="taxCategoryName"
                                                                (ngModelChange)='onOptionTaxCatSelected(i,null, $event,basicAmt)'
                                                                class="form-control" >
                                                                <option>--Select--</option>
                                                                <option *ngFor="let sc of  taxCategoryList[i]" [ngValue]="sc">
                                                                    {{sc.taxCategoryName}}
                                                                </option>
                                                            </select>
                                                        </td>
                                                            </ng-template>
                                                            <ng-template #elseenabletext> 
                                                            <td> 
                                                                <input formControlName="taxCategoryName" id="taxCategoryName" class="form-control">
                                                            </td>
                                                            </ng-template>  
                                                        
                                                <td> <input disabled type="number" formControlName="taxRecoverable"
                                                        style="width: 4rem;" class="form-control"></td>
                                                        <!-- //taxRecoverable -->
                                                <td> <input disabled type="number" formControlName="extendedAmount"
                                                        style="width: 4rem;" class="form-control"></td>
                                                <td>
                                                    <!-- <div *ngIf="displayHSN; then thenBlockHSN; else elseBlockHSN"></div>
                <ng-template #thenBlockHSN> -->
                                                    <!-- <input type="text" formControlName="hsnSacCode" (ngModelChange)='onHsnCodeSelected($event,i)'
                                                        style="width: 4rem;" class="form-control"> -->
                                                        <select  style="width:fit-content" formControlName="hsnSacCode" id="hsnSacCode" class="form-control"
                                                                                 #hsnSacCode1>
                                                                                <option></option>
                                                                                <option *ngFor="let sc of hsnSacCodeList" [ngValue]="sc.hsnsaccode">
                                                                                    {{sc.hsnsaccode}}
                                                                                </option>
                                                                            </select>

                <!-- </ng-template>
                <ng-template #elseBlockHSN>
                    <input  type="text" formControlName="hsnSacCode" id="hsnSacCode"
                    style="width: 4rem;" class="form-control">
                </ng-template> -->

                                                    </td>
                                                <!-- <td>
                                                    <input formControlName="segmentName" value={{segmentName}}
                                                        data-toggle="modal" data-target=
                                                        "#myModel"
                                                        placeholder="Select Item Category" class="form-control">
                                                </td> -->
                                                <!-- <td> -->
                                                    <!-- <div class="row" id="modals"> -->
                                                    <!-- <input formControlName="segmentName" value={{segmentName}}
                                                        data-toggle="modal" data-target="#myModel"
                                                        placeholder="Select Item PO charge account no" class="form-control"
                                                        (click)="openCodeComb()"> -->
                                                    <!-- </div> -->

                                                    <!-- <a formControlName="segmentName"
                                                        data-toggle="modal" data-target="#myModel"
                                                        role="button" aria-expanded="true"
                                                        aria-controls="myModel+{{i}}">
                                                        {{i}}
                                                    </a> -->
                                                <!-- </td> -->
                                                <!-- <input hidden formControlName="poChargeAcc"> -->
                                                <!-- <div id="accordionExample2"> -->
                                                <!--  -->
                                                <td>
                                                    <div *ngIf="displayaddRow; then thenaddRow; else elseaddRow">
                                                    </div>
                                                    <!-- type="button" -->
                                                    <ng-template #thenaddRow>
                                                    <button type="button" class="btn btn-primary" id="addinvln"
                                                        (click)="addRow(i)" (keydown.shift.arrowdown)="addRow(i)"
                                                        style="width: min-content;"><i
                                                            class="fa fa-plus"></i></button>
                                                    </ng-template>
                                                    <ng-template #elseaddRow>
                                                        <button disabled type="button" class="btn btn-primary" id="addinvln"
                                                            (click)="addRow(i)" (keydown.shift.arrowdown)="addRow(i)"
                                                            style="width: min-content;"><i
                                                                class="fa fa-plus"></i></button>
                                                        </ng-template>
                                                </td>
                                                <td>
                                                    <div
                                                        *ngIf="displayRemoveRow; then thenRemoveRow; else elseRemoveRow">
                                                    </div>
                                                    <ng-template #thenRemoveRow>
                                                    <button type="button" class="btn btn-primary"
                                                        (click)="RemoveRow(i)" style="width: min-content;"><i
                                                            class="fa fa-trash"></i></button>
                                                    </ng-template>
                                                    <ng-template #elseRemoveRow>
                                                        <button disabled type="button" class="btn btn-primary"
                                                            (click)="RemoveRow(i)" style="width: min-content;"><i
                                                                class="fa fa-trash"></i></button>
                                                        </ng-template>
                                                </td>

                                       </tr>
                                    </tbody>
                                    </ng-container>
                                </table>
                            </div>
                        </div>
                            </div>
                   <table style="width: 100%;background-color: white;">
                            <tr>
                                <td class="PageHeader1">
                                    &nbsp;&nbsp;Tax&nbsp;Details&nbsp;
                                    <!-- of&nbsp;PO&nbsp;Line&nbsp; -->
                                    <!-- No-{{i+1}} -->
                                </td>
                            </tr>
                        </table>
                        <!-- <br> -->
                      <div class="grid_scroll">
                            <table class="GridFont" cellspacing="0" cellpadding="4" border="0"  style="width:100%;border-collapse:collapse;">
                                <thead>
                                    <tr class="GridHeader">
                                        <th scope="col" hidden>Info</th>
                                        <th scope="col">SL. NO.</th>
                                        <th scope="col">Tax Rate Name
                                        </th>
                                        <th scope="col">Tax Type</th>
                                        <th scope="col">Tax Point Basis
                                        </th>
                                        <th scope="col">
                                            <table style="width: 100%;">
                                                <tr style="border-bottom: solid 1px Gray;">
                                                    <td colspan="10" style="text-align: center;">
                                                        Precedence</td>
                                                </tr>
                                                <tr>
                                                    <td
                                                        style="width: 2rem; border-right: solid 1px Gray;">
                                                        1</td>
                                                    <td
                                                        style="width: 2rem; border-right: solid 1px Gray;">
                                                        2</td>
                                                    <td
                                                        style="width: 2rem; border-right: solid 1px Gray;">
                                                        3</td>
                                                    <td
                                                        style="width: 2rem; border-right: solid 1px Gray;">
                                                        4</td>
                                                    <td
                                                        style="width: 2rem; border-right: solid 1px Gray;">
                                                        5</td>
                                                    <td
                                                        style="width: 2rem; border-right: solid 1px Gray;">
                                                        6</td>
                                                    <td
                                                        style="width: 2rem; border-right: solid 1px Gray;">
                                                        7</td>
                                                    <td
                                                        style="width: 2rem; border-right: solid 1px Gray;">
                                                        8</td>
                                                    <td
                                                        style="width: 2rem; border-right: solid 1px Gray;">
                                                        9</td>
                                                    <td style="width: 2rem;">
                                                        10</td>
                                                </tr>
                                            </table>
                                        </th>
                                        <th scope="col">Currency</th>
                                        <th scope="col">Tax Rate</th>
                                        <th scope="col">Tax Amount</th>
                                        <th scope="col">Recoverable
                                            <!-- Amount -->
                                        </th>
                                        <th scope="col">Inclusive</th>
                                        <th scope="col">Self
                                            Assesed/Reverse
                                            Charge
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ng-container  class="center" formArrayName="taxLines">
                                        <!-- <ng-container   *ngFor="let group of invLineDetailsArray().controls; let k= index" [formGroupName]="k" class="auto-style5">     -->
                                            <ng-container *ngFor="let taxDet of TaxDetailsArray().controls; let j= index"
                                            [formGroupName]="j"  class="auto-style5">
                                          <tr class="ItemStyle" style="text-decoration:none;">
                                            <input hidden type="text" formControlName="invLineNo" style="width: 2rem;height: 25px;font-size: 10px;">
                                            <input hidden type="text" formControlName="taxItemId">
                                            <td> <input disabled formControlName="lineNumber"
                                                class="form-control" style="width: 2rem;height: 25px;font-size: 10px;">
                                        </td>
                                        <td> <input disabled type="text" style="width: 9rem;height: 25px;font-size: 10px;"
                                                formControlName="taxRateName" class="form-control">
                                        </td>
                                        <td> <input disabled type="text" style="width: 6rem;height: 25px;font-size: 10px;"
                                                formControlName="taxTypeName" class="form-control">
                                        </td>
                                        <td> <input disabled type="text"
                                                formControlName="taxPointBasis" class="form-control"
                                                style="width: 5rem; text-align: center;margin-left: 6px; height: 25px;font-size: 10px;">
                                        </td>
                                        <td>
                                            <table  style="width: 100%;">
                                                <tr>
                                                    <td style=" border-right: solid 1px Gray;">
                                                        <input disabled
                                                            formControlName="precedence1"
                                                            class="form-control"
                                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                    </td>
                                                    <td style=" border-right: solid 1px Gray;">
                                                        <input disabled
                                                            formControlName="precedence2"
                                                            class="form-control"
                                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                    </td>
                                                    <td style=" border-right: solid 1px Gray;">
                                                        <input disabled
                                                            formControlName="precedence3"
                                                            class="form-control"
                                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                    </td>
                                                    <td style=" border-right: solid 1px Gray;">
                                                        <input disabled
                                                            formControlName="precedence4"
                                                            class="form-control"
                                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                    </td>
                                                    <td style=" border-right: solid 1px Gray;">
                                                        <input disabled
                                                            formControlName="precedence5"
                                                            class="form-control"
                                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                    </td>
                                                    <td style=" border-right: solid 1px Gray;">
                                                        <input disabled
                                                            formControlName="precedence6"
                                                            class="form-control"
                                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                    </td>
                                                    <td style=" border-right: solid 1px Gray;">
                                                        <input disabled
                                                            formControlName="precedence7"
                                                            class="form-control"
                                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                    </td>
                                                    <td style=" border-right: solid 1px Gray;">
                                                        <input disabled
                                                            formControlName="precedence8"
                                                            class="form-control"
                                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                    </td>
                                                    <td style=" border-right: solid 1px Gray;">
                                                        <input disabled
                                                            formControlName="precedence9"
                                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;"
                                                            class="form-control">
                                                    </td>
                                                    <td> <input disabled
                                                            formControlName="precedence10"
                                                            class="form-control"
                                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>

                                        <td> <input disabled type="text"
                                                formControlName="currencyCode" style="width: 3rem; height: 25px;font-size: 10px;"
                                                class="form-control">
                                        </td>
                                        <td> <input disabled formControlName="totTaxPer"
                                                style="width: 2rem; text-align: right; height: 25px;font-size: 10px;"
                                                class="form-control">
                                        </td>
                                        <!-- *ngIf="poMasterDtoForm.controls['poLines'].controls[0].controls['taxAmounts'].contcontrols.totTaxPer.value  -->
                                        <!-- <td>
                                            {{arInvoiceForm.controls['taxLines'].controls[j].totTaxPer}}controls['taxAmounts'].controls[j].controls.totTaxPer.value
                                        </td> -->
                                        <div *ngIf="arInvoiceForm.controls['taxLines'].controls[j].controls.totTaxPer.value === 0; then thenBlock; else elseBlock">
                                        </div>
                                        <ng-template #thenBlock>
                                            <td><input type="number" min="0"  formControlName="totTaxAmt" (change)="validateNum(i,j)"
                                                    class="form-control"
                                                    style="width: 4rem; text-align: right; height: 25px;font-size: 10px;"
                                                    class="form-control">
                                            </td>
                                            </ng-template>
                                <ng-template #elseBlock>
                                    <td><input disabled type="number"
                                            formControlName="totTaxAmt"
                                            class="form-control"
                                            style="width: 4rem; text-align: right; height: 25px;font-size: 10px;">
                                    </td>
                                </ng-template>
                                <!-- <div *ngIf="arInvoiceForm.controls['taxLines'].controls[j].controls.totTaxPer.value === 0; then thenBlock; else elseBlock">
                            </div> -->
                            <!-- <ng-template #thenBlock>
                                        <td><input type="number" min="0"  formControlName="totTaxAmt" (change)="validateNum(i,j)"
                                                class="form-control"
                                                style="width: 4rem; text-align: right;"
                                                class="form-control">
                                        </td>
                                        </ng-template>
                            <ng-template #elseBlock>
                                <td><input disabled
                                        type="number"
                                        formControlName="totTaxAmt"
                                        class="form-control"
                                        style="width: 4rem; text-align: right;">
                                </td>
                            </ng-template> -->
                            <div *ngIf="arInvoiceForm.controls['taxLines'].controls[j].controls.recoverableFlag.value === 'Y'; then thenBlockRecFlag; else elseBlockRecFlag">
                        </div>
                            <ng-template #thenBlockRecFlag>
                                <td><input type="checkbox"
                                        disabled
                                        name="recoverableFlag"
                                        value="recoverableFlag"
                                        checked>
                                </td>
                            </ng-template>
                            <ng-template #elseBlockRecFlag>
                                <td><input type="checkbox"
                                        disabled
                                        name="recoverableFlag"
                                        value="recoverableFlag">
                                </td>
                            </ng-template>
                            <div *ngIf="arInvoiceForm.controls['taxLines'].controls[j].controls.inclusiveFlag.value === 'Y'; then thenBlockInclFlag; else elseBlockInclFlag">
                                                                    </div>
                            <ng-template #thenBlockInclFlag>
                                <td><input type="checkbox"
                                        disabled
                                        name="inclusiveFlag"
                                        value="inclusiveFlag"
                                        checked></td>
                            </ng-template>
                            <ng-template #elseBlockInclFlag>
                                <td><input type="checkbox"
                                        disabled
                                        name="inclusiveFlag"
                                        value="inclusiveFlag">
                                </td>
                            </ng-template>
                            <div *ngIf="arInvoiceForm.controls['taxLines'].controls[j].controls.selfAssesedFlag.value === 'Y'; then thenBlockselfAssFlag; else elseBlockselfAssFlag">
                                                                    </div>
                            <ng-template #thenBlockselfAssFlag>
                                <td><input type="checkbox"
                                        disabled
                                        name="selfAssesedFlag"
                                        value="selfAssesedFlag"
                                        checked>
                                </td>
                            </ng-template>
                            <ng-template #elseBlockselfAssFlag>
                                <td><input type="checkbox"
                                        disabled
                                        name="selfAssesedFlag"
                                        value="selfAssesedFlag">
                                </td>
                            </ng-template>
                                    </tr>
                                    <tr>
                                        <!-- <input hidden type="text" formControlName="invLineItemId" style="width: 4rem; text-align: right; height: 25px;font-size: 10px;">
                                        <input hidden type="text" class="form-control" formControlName="invLineNo"  style="width: 4rem; text-align: right; height: 25px;font-size: 10px;"> -->
                                        <!-- <td>
                                          <button type="button" class="btn btn-primary" data-dismiss="modal"
                                          (click)="lineWiseApDistribution(content)">Find</button>
                                        </td> -->
                                    </tr>
                                    </ng-container>
                                    </ng-container>
                                </tbody>

                            </table>
                            <button type="button" class="btn btn-primary" (click)="addDiscount(selectedLine)"
                                style="width: 8rem; border: solid 1px Gray">Apply
                                Discount</button>
                            <!-- <div class="collapse" id="collapseExample">
                              <div class="auto-style103" >
                                  <table>
                                      <tr>

                                      </tr>
                                  </table>
                             </div>
                          </div> -->
                        </div>

                    </div></div>
                </div>
      </div>
      <div class="tab-pane fade" id="contact-md" role="tabpanel" aria-labelledby="contact-tab-md">
        <div class="center">
            <div class="form-bg">
                <div class="center">
                    <div class="grid_scroll">
                        <table class="GridFont" cellspacing="0" cellpadding="4" border="0"  style="width:100%;border-collapse:collapse;">
                            <thead>
                                <tr class="GridHeader">
                                    <th scope="col">Inv Line No.</th>
                                    <th scope="col">No.</th>
                                    <!-- <th scope="col">Trans Line</th>
                                    <th scope="col">Detail Line</th> -->
                                    <!-- <th scope="col">Class</th> -->
                                    <th scope="col">Class</th>
                                    <th scope="col">GL Account</th>
                                    <th scope="col">GL Account Description</th>
                                    <th scope="col">GL Date</th>
                                    <th scope="col">%</th>
                                    <th scope="col">Distribution Amount</th>
                                    <th scope="col">Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container  class="center" formArrayName="invDisLines">
                                    <ng-container   *ngFor="let group of lineDistributionArray().controls; let k= index" [formGroupName]="k" class="auto-style5">
                                <tr class="ItemStyle" style="text-decoration:none;">
                                    <!-- <input hidden type="text" formControlName="invDistributionId"> -->
                                    <td><input class="form-control"  type="number" formControlName="invoiceLineNum" style="width: 40px;height: 25px;"></td>
                                    <td>
                                        <input disabled formControlName="lineNum"  class="form-control" style="width: 40px;height: 25px;">
                                        <!-- (keydown.shift.arrowdown)="addRowDistribution(k)" --comment by vinita>
                                    </td>
                                    <!-- <td> -->
                                        <input type="number" min="0"  hidden formControlName="custTrxLineId"  class="form-control" style="width: 100px;height: 25px;">
                                    <!-- </td> -->
                                    <!-- <td>
                                        <input type="number" min="0"  formControlName="poSegment"  class="form-control" style="width: 100px;height: 25px;text-align: right;">
                                    </td>
                                    <td>
                                        <input type="text" disabled formControlName="accountingDate" [ngModel]="accountingDate | date:'yyyy-MM-dd'" min="{{minDate | date:'yyyy-MM-dd'}}" class="form-control"  style="width: 140px;height: 25px;">
                                    </td> -->
                                    <td>

                                        <input formControlName="class"  class="form-control"  style="width: 160px;height: 25px;">
                                    </td>
                                    <td>

                                        <input formControlName="concatenatedSegment"  (click)="openCodeComb(k)" data-toggle="modal" data-target="#myModel" class="form-control"  style="width: 160px;height: 25px;">
                                    </td>
                                    <td>
                                        <input formControlName="accountDesc" class="form-control"  style="width: 160px;height: 25px;"></td>
                                        <input  hidden formControlName="codeCombinationId"  class="form-control"  style="width: 160px;height: 25px;">
                                    <td>
                                        <input formControlName="glDate" [(ngModel)]="glDate" disabled  class="form-control"  style="width: 100px;height: 25px;text-align: right;">
                                    </td>
                                    <td>
                                        <input type="number" min="0"  formControlName="percent"  class="form-control"  style="width: 160px;height: 25px;">
                                    </td>
                                    <td>
                                        <input type="number" min="0"  formControlName="amount"  class="form-control"  style="width: 120px;height: 25px;">
                                    </td>

                                    <td>
                                        <div
                                        *ngIf="displayRmDistRow; then thenRmDistRow; else elseRmDistRow">
                                    </div>
                                    <ng-template #thenRmDistRow>
                                    <button type="button" class="btn btn-primary"
                                                                    (click)="RemoveDistributionRow(k)" style="width: min-content;"><i
                                                                        class="fa fa-trash"></i></button>
                                    </ng-template>
                                    <ng-template #elseRmDistRow>
                                        <button disabled type="button" class="btn btn-primary"
                                                                        (click)="RemoveDistributionRow(k)" style="width: min-content;"><i
                                                                            class="fa fa-trash"></i></button>
                                        </ng-template>
                                                                    </td>
                                </tr>
                            </ng-container>
                        </ng-container>
                            </tbody>
                        </table>
                        </div>

                    </div></div></div>
      </div>
    </div>

  </section>
<!-- </div> -->
<fieldset class="RFS">
    <table class="center">
        <tr>
            <div *ngIf="closeResetButton; then hList1; else hList2"></div>
            <ng-template #hList2>
                <div class="d-flex justify-content-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="sr-only" id="loading"></span>

                    </div>
                </div>
            </ng-template>
            <ng-template #hList1> </ng-template>
            <td class="LabelFontStyle" style="color: blue;width: fit-content;" colspan="4">
                &nbsp;{{dataDisplay }}&nbsp; </td>
        </tr>
    </table>
</fieldset>

                <table class="center">
                    <tr>

                        <!-- <td> <button type="butt on" class="btn btn-primary" (click)="Save()" style="width: 8rem;">Save</button></td> -->
                        <div *ngIf="displaySaveButton; then thenBlock1; else elseBlock1"></div>
                        <ng-template #thenBlock1>
                            <td> <button type="button" class="btn btn-primary" (click)="Save()" [disabled]="isDisabledSave" style="width: 8rem;">Save</button></td>

                            <!-- <td>
                                <button disabled type="button"  class="btn btn-primary"
                                data-toggle="modal" data-target="#exampleModal2"  (click)="SearchInvoices()" style="width: 8rem;">
                                &nbsp;Apply</button>
                            </td> -->

                        </ng-template>

                        <ng-template #elseBlock1>
                            <td> <button disabled type="button" class="btn btn-primary" (click)="Save()" style="width: 8rem;">Save</button></td>
                           
                        </ng-template>

                        <div *ngIf="showApplyButton ; then showApplyButtonYes; else showApplyButtonNo"></div>
                        <ng-template #showApplyButtonYes> 
                        <td>
                            <!-- [style.display]="isVisibleApply ? 'block' : 'none'"  -->
                            <button  type="button"  class="btn btn-primary"
                            data-toggle="modal" data-target="#exampleModal2"  (click)="SearchInvoices()"  style="width: 8rem;">
                            &nbsp;Apply</button>
                        </td>
                        </ng-template>

                        <ng-template #showApplyButtonNo> 
                            <td>
                                <button  disabled type="button"  class="btn btn-primary"
                                data-toggle="modal" data-target="#exampleModal2"  (click)="SearchInvoices()"  style="width: 8rem;">
                                &nbsp;Apply</button>
                            </td>
                        </ng-template>


                        <td> <button disabled type="button" class="btn btn-primary" style="width: 8rem;" [style.display]="isVisibleUpdate ? 'block' : 'none'">Update</button></td>
                        <!-- <td> <button type="button" class="btn btn-primary"  style="width: 8rem;" (click)="getTaxDetail()">Get Tax Detail</button></td> -->
                        <div *ngIf="disabledComplete ; then thenenableComplete; else elsedisableComplete"></div>
                        <ng-template #thenenableComplete> 
                        <td> <button type="button" class="btn btn-primary"  style="width: 8rem;" (click)="completeInvoice()">Complete</button></td>
                        </ng-template>
                        <ng-template #elsedisableComplete> 
                            <td> <button disabled type="button" class="btn btn-primary"  style="width: 8rem;" (click)="completeInvoice()">Complete</button></td>
                            </ng-template>
                        <div *ngIf="disabledViewAccounting; then thenBlockViewAccounting; else elseBlockViewAccounting"></div>
                        <ng-template #thenBlockViewAccounting> 
                          <td>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#viewAccountingModel"  style="width: 8rem;" (click)="viewAccounting(trxNumber)" >
                            View Accounting</button></td>
                        </ng-template>
                        <ng-template #elseBlockViewAccounting>

                          </ng-template>
                        <!-- <td><button type="button" class="btn btn-primary"  style="width: 8rem;" (click)="viewInvPrint()">View Invoice Print</button></td> -->
                        <td>
                            <button type="button" class="btn btn-primary" (click)="clearFormArray()"
                            style="width: 8rem;">Reset</button>
                            </td>
                        <td>
                            <button type="button" class="btn btn-primary" id="register" (click)="closeMast()">Close</button>
                        </td>
                        <td>
                            <button type="button" class="btn btn-primary" id="register" (click)="ViewInvoice()" [style.display]="isVisibleInvoice ? 'block' : 'none'">Print</button>
                        </td>
                        <td>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#viewApplyHistory"  style="width: 8rem;" (click)="viewApplyHistory(trxNumber)" >
                                Apply History</button>
                        </td>
                        </tr>
                </table>
                <!-- <div *ngIf="displayModal; then thenBlockModal; else elseBlockModal">
                </div>
                <ng-template #thenBlockModal>
                </ng-template>
                <ng-template #elseBlockModal> -->
                    <div id="myModel"  class="modal fade" tabindex="-1" role="dialog"
                        aria-hidden="true" style="width: 500px; margin-left:350px">
                        <!-- [style.display]="showModal ? 'block' : 'none'" -->
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title" id="myModalLabel"
                                        style="text-align: center; font-size: medium; margin-left: 20%; font-family: Verdana,Sans-serif, Arial, Helvetica;font-weight: bold;">
                                        {{ title }}</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                </div>
                                <div class="modal-body text-center pagination-centered">
                                    <table>
                                        <tr>
                                            <td style="width: 15%" class="LabelFontStyle">
                                                Branch&nbsp;:&nbsp;
                                            </td>
                                            <td>
                                                <select formControlName="segment11" id="segment11" [(ngModel)]="segment11"
                                                    class="form-control" (ngModelChange)="onOptionsSelectedBranch($event,'SS_Branch')">
                                                    <option>--Select--</option>
                                                    <option *ngFor="let sc of  BranchList">
                                                        {{sc.lookupValue}}
                                                    </option>
                                                </select>
                                            </td>
                                            <td>
                                                <input type="text" style="width: 150px; background-color: white; border: none;"
                                                    formControlName="lookupValueDesc1" [(ngModel)]="lookupValueDesc1"
                                                    class="form-control" disabled>
                                                <!-- <input disabled type="text"  class="form-control" fromControlName="lookupValueDesc1" [(ngModel)]="lookupValueDesc1"  style="border:none;"> -->
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 15%" class="LabelFontStyle">
                                                &nbsp;Location&nbsp;:&nbsp;
                                            </td>
                                            <td>
                                                <select formControlName="segment2" id="segment2" [(ngModel)]="segment2"
                                                    class="form-control"
                                                    (ngModelChange)="onOptionsSelectedBranch($event,'SS_Location')">
                                                    <option>--Select--</option>
                                                    <option *ngFor="let sc of  locIdListModel">
                                                        {{sc.lookupValue}}
                                                    </option>
                                                </select>
                                            </td>
                                            <td>
                                                <input type="text" style="width: 150px; background-color: white; border: none;"
                                                    formControlName="lookupValueDesc2" [(ngModel)]="lookupValueDesc2"
                                                    class="form-control" disabled>
                                                <!-- <input disabled type="text"  class="form-control" fromControlName="lookupValueDesc2" [(ngModel)]="lookupValueDesc2" style="border:none;"> -->
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 15%" class="LabelFontStyle">
                                                Cost&nbsp;Center&nbsp;:&nbsp;
                                            </td>
                                            <!-- <td> -->
                                                <!-- <select formControlName="segment3" id="segment3" class="form-control"
                                                    [(ngModel)]="segment3"
                                                    (ngModelChange)="onOptionsSelectedBranch($event,'CostCentre')">
                                                    <option>--Select--</option>
                                                    <option *ngFor="let sc of  CostCenterList">
                                                        {{sc.lookupValue}}
                                                    </option>
                                                </select>
                                            </td>
                                            <td>
                                                <input type="text" style="width: 150px; background-color: white; border: none;"
                                                    formControlName="lookupValueDesc3" [(ngModel)]="lookupValueDesc3"
                                                    class="form-control" disabled> -->
                                                    <td>
                                                        <select formControlName="segment3" id="segment3"
                                                            class="form-control"
                                                            (ngModelChange)="onOptionsSelectedBranch($event,'CostCentre')">
                                                            <option>--Select--</option>
                                                            <option *ngFor="let sc of  CostCenterList">
                                                                {{sc.lookupValue}}
                                                            </option>
                                                        </select>
                                                    </td>
                                                    <td>
                                                        <input type="text" disabled [(ngModel)]="lookupValueDesc3"
                                                            style="width: 150px; background-color: white; border: none;"
                                                            formControlName="lookupValueDesc3" class="form-control">
                                                    </td>
                                                 
                                        </tr>
                                        <tr>
                                            <td style="width: 15%" class="LabelFontStyle">
                                                Natural&nbsp;Account&nbsp;:&nbsp;
                                            </td> 
                                            <td>
                                                 <!-- <input type="text" (keyup)="getNaturalAccount($event)" formControlName="segment4" id="NaturalAccountFirstWay" list="dynmicUserIds3" class="form-control"  
                                                     (ngModelChange)="onOptionsSelectedBranch($event,'NaturalAccount')"/>
                                                    <datalist id="dynmicUserIds3">
                                                       <option *ngFor="let sc of  NaturalAccountList" >
                                                           {{sc.naturalaccount}}--{{sc.description}}
                                                       </option>
                                                    </datalist> -->
                                                    <input type="text" formControlName="segment4"
                                                        id="NaturalAccountFirstWay" list="dynmicUserIds3"
                                                        class="form-control"
                                                        (change)="onOptionsSelectedNatural($event)" />
                                                    <datalist id="dynmicUserIds3">
                                                        <option>--Select--</option>
                                                        <option *ngFor="let sc of  NaturalAccountList">
                                                            {{sc}}
                                                        </option>
                                                    </datalist>
                                            </td>
                                            <td>
                                                <input type="text" style="width: 150px; background-color: white; border: none;"
                                                    formControlName="lookupValueDesc4" [(ngModel)]="lookupValueDesc4"
                                                    class="form-control" disabled>
                                                <!-- <input disabled type="text"  class="form-control" fromControlName="lookupValueDesc4"  [(ngModel)]="lookupValueDesc4"  style="border:none;"> -->
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 15%" class="LabelFontStyle">
                                                Inter&nbsp;Branch&nbsp;:&nbsp;

                                            </td>
                                            <td>
                                                <select formControlName="segment5" id="segment5" class="form-control"
                                                    [(ngModel)]="segment5"
                                                    (ngModelChange)="onOptionsSelectedBranch($event,'SS_Interbranch')">
                                                    <option>--Select--</option>
                                                    <option *ngFor="let sc of  InterBrancList">
                                                        {{sc.lookupValue}}
                                                    </option>
                                                </select>
                                            </td>
                                            <td>
                                                <input type="text" style="width: 150px; background-color: white; border: none;"
                                                    formControlName="lookupValueDesc5" [(ngModel)]="lookupValueDesc5"
                                                    class="form-control" disabled>
                                                <!-- <input disabled type="text"  class="form-control" fromControlName="lookupValueDesc5" [(ngModel)]="lookupValueDesc5" style="border:none;"> -->
                                            </td>
                                        </tr>

                                    </table>
                                </div>
                                <div class="modal-footer">
                                    <!-- <button type="button" class="close" data-dismiss="modal" aria-hidden="true" (click)="fnCancatination(content)" >&times;</button> -->
                                    <!-- [disabled]="(segment6.value === null || segment5.value=== null)" -->
                                    <button type="button" class="btn btn-primary" data-dismiss="modal" aria-hidden="true"
                                      (click)="fnCancatination(content)">OK</button>
                                    <!-- <button type="button" class="btn btn-primary"
                                        [disabled]="!segment11 || !segment2 || !segment3 || !segment4 || !segment5"
                                        (click)="fnCancatination(content)" data-dismiss="modal">Ok</button> -->
                                </div>
                            </div>
                        </div>
                    </div>
                <!-- </ng-template> -->

                <!-- ------------------------apply modal start-------------------- -->

                <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModal2Label" aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                         <div class="modal-header">
                          <!-- <h5 class="modal-title" id="exampleModal2Label">AR&nbsp;Receipt&nbsp;Application&nbsp;-&nbsp;Receipt&nbsp;No:&nbsp;{{this.receiptNumber}}&nbsp;BillToSite:&nbsp;{{this.billToSiteId}} </h5> -->
                         <h5 class="modal-title" id="exampleModal2Label">&nbsp;Credit Memo&nbsp;Application - Credit Invoice Number :&nbsp; {{this.trxNumber1}}</h5>

                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                         </div>

                            <div class="modal-body">
                            <table class="center" style="width: 100%;">

                                <tr>
                                    <td style="width: 15%" class="LabelFontStyle">Customer&nbsp;No&nbsp;&nbsp;:&nbsp;  </td>
                                   <td> <input disabled  type="number" formControlName="custAccountNo"   [(ngModel)] ="custAccountNo"  class="form-control"> </td>

                                    <td style="width: 15%" class="LabelFontStyle">Customer&nbsp;Name&nbsp;&nbsp;:&nbsp;  </td>
                                    <td colspan="2"> <input disabled  type="text" formControlName="custName" [(ngModel)] ="custName"   class="form-control" style="width: 100%;"> </td>

                                    <!-- <td style="width: 15%" class="LabelFontStyle">cust&nbsp;SiteId&nbsp;&nbsp;:&nbsp;  </td> -->
                                    <input hidden disabled  type="number" formControlName="customerSiteId"       [(ngModel)] ="customerSiteId"  class="form-control">

                                    <!-- <td style="width: 15%" class="LabelFontStyle">customerId&nbsp;&nbsp;&nbsp;:&nbsp;  </td> -->
                                    <input hidden disabled  type="number" formControlName="customerId"       [(ngModel)] ="customerId"  class="form-control">

                                </tr>

                                <tr>
                                    <td style="width: 15%" class="LabelFontStyle">Applied&nbsp;Total&nbsp;&nbsp;:&nbsp;  </td>
                                    <td><input disabled  type="number" formControlName="totAppliedtAmount"   [(ngModel)] ="totAppliedtAmount"  class="form-control"></td>

                                    <td style="width: 15%" class="LabelFontStyle">UnApplied&nbsp;Total&nbsp;&nbsp;:&nbsp;  </td>
                                     <td><input disabled  type="number" formControlName="totUnAppliedtAmount" [(ngModel)] ="totUnAppliedtAmount"   class="form-control"></td>

                                    <td style="width: 15%" class="LabelFontStyle">Balance&nbsp;Total&nbsp;&nbsp;:&nbsp;  </td>
                                    <td><input disabled  type="number" formControlName="balanceAmount"       [(ngModel)] ="balanceAmount"  class="form-control"></td>

                                </tr>

                                <tr>

                                    <td style="width: 15%" class="LabelFontStyle">Credit&nbsp;Note&nbsp;Amt&nbsp;:&nbsp;  </td>
                                    <td> <input disabled  type="number" class="form-control" formControlName="creditNoteAmount"  [(ngModel)]="creditNoteAmount"  > </td>

                                    <td style="width: 15%" class="LabelFontStyle">Applied &nbsp;Amt&nbsp;:&nbsp; </td>
                                    <td> <input disabled  type="number" class="form-control" formControlName="tApplAmt"  [(ngModel)]="tApplAmt"></td>

                                     <td style="width: 15%" class="LabelFontStyle">   Un Applied &nbsp;Amt&nbsp;:&nbsp; </td>
                                     <td> <input disabled type="number" class="form-control" formControlName="tUapplAmt"  [(ngModel)]="tUapplAmt"></td>

                                 </tr>
                                 <tr>
                                    <td>
                                        <button style="width: 8em;" type="button" class="btn btn-info" (click)="refundInv()" [style.display]="isVisiblerefundInv ? 'block' : 'none'">Refund</button>
                                    </td>
                                 </tr>

                            </table>

                            <div class="container1">
                                <div class="grid_scroll_3">
                                <table class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="border-color:#959595;border-collapse:collapse;width: 100%;">
                                <tbody>
                                    <tr class="GridHeader">

                                        <th style="width:6rem" scope="col">Srl#</th>
                                        <th style="width:3rem;text-align: center;" scope="col"><input  type="checkbox" formControlName="selectAllflag1" [(ngModel)]="selectAllflag1" ></th>
                                        <!-- (change)="applyReceiptFlagAll($event)" -->
                                        <!-- <th style="width:3rem;text-align: center;" scope="col"><button style="width: 8em;" type="button" class="btn btn-info" (click)="applyReceiptFlagAll101()">Select All</button></th> -->
                                        <!-- <button style="width: 8em;" type="button" class="btn btn-info" (click)="AppliedDetails(custAccountNo,billToSiteId,applyTo,receiptNumber)"  >Apply&nbsp;Details</button> -->

                                        <th style="width:6rem" scope="col">Type</th>
                                        <th style="width:6rem" scope="col">Invoice No</th>
                                        <th style="width:6rem" scope="col">Invoice Date</th>
                                        <th style="width:10rem" scope="col">Invoice Amt</th>
                                        <th style="width:10rem" scope="col">Applied Amt</th>
                                        <th style="width:11rem" scope="col">Apply Date</th>
                                        <th style="width:11rem" scope="col">GL Date</th>
                                        <th style="width:10rem" scope="col">Apply Amt</th>
                                        <th style="width:10rem" scope="col">Balance  Due</th>
                                        <!-- <th style="width:10rem" scope="col">Balance</th> -->
                                        <!-- <th style="width:10rem" scope="col">billToCustId</th> -->
                                        <!-- <th style="width:10rem" scope="col">billToSiteId</th>  -->
                                   </tr>
                                </tbody>

                                <ng-container  class="center" formArrayName="invApplyList">
                                    <ng-container   *ngFor="let group of invLineArray().controls; let k= index" [formGroupName]="k" class="auto-style5">
                                            <!-- <tr *ngFor="let com of lstinvoices let i=index" class="ItemStyle" style="text-decoration:none;"> -->
                                               <tr>
                                                <td style="text-align: right;">
                                                    {{k+1}}</td>
                                                    <!-- [(ngModel)]="applyTo"  -->
                                                <td><input  type="checkbox"  style="text-align: center;width: 3rem;"  formControlName="applyrcptFlag" (change)="applyReceiptFlag($event,k)"></td>
                                                <td><input style="width: 100px;height: 25px;text-align: center;"  disabled  type="text" formControlName="applyTo" class="form-control" placeholder="Appl Type"  > </td>
                                                <td><input style="width: 140px;height: 25px;" type="text"   disabled formControlName="trxNumber"  class="form-control"></td>
                                                <div  *ngIf="displaytrxDate[k]; then thentrxDate; else elsetrxDate">  </div>
                                                <ng-template #thentrxDate>
                                                <td><input style="width: 130px;height: 25px;text-align: center;"   disabled  formControlName="trxDate"  class="form-control"></td>
                                                </ng-template>
                                                <ng-template #elsetrxDate>
                                                    <td><input style="width: 130px;height: 25px;text-align: center;"    type="date" formControlName="trxDate"  class="form-control"></td>
                                                </ng-template>
                                                <div  *ngIf="displayamcRefund[k]; then thenamcRefund; else elseamcRefund">  </div>
                                                <ng-template #thenamcRefund>
                                                <td><input style="width: 120px;height: 25px;text-align: right;" disabled  type="text" formControlName="invoiceAmount" class="form-control"></td>
                                          
                                                <td><input style="width: 120px;height: 25px;text-align:right;"  disabled  type="text" formControlName="applAmt"  class="form-control"  > </td>
                                                </ng-template> 
                                                <ng-template #elseamcRefund>
                                                    <td><input style="width: 120px;height: 25px;text-align: right;"   type="text" formControlName="invoiceAmount" class="form-control"></td>
                                          
                                                <td><input style="width: 120px;height: 25px;text-align:right;"    type="text" formControlName="applAmt"  class="form-control"  > </td>
                                                </ng-template>
                                                <td><input style="width: 145px;height: 25px;text-align: center;" disabled  type="date" formControlName="applDate" [(ngModel)]="applDate" class="form-control"></td>
                                                <td><input disabled style="width: 150px;height: 25px;text-align: right;background-color:yellow;"    type="date" formControlName="glDateLine"  class="form-control"  (change)="glPrdValidateLine(k)"></td>

                                                <td><input disabled style="width: 120px;height: 25px;text-align: right;background-color: yellow;"   type="number" min="0" formControlName="applAmtNew"  class="form-control" placeholder="" (change)="validateLineApplAmt(k)" > </td>

                                                <td><input style="width: 120px;height: 25px;text-align: right;"     disabled    type="text" formControlName="balDueAmt" class="form-control" placeholder="" > </td>
                                                <input style="width: 100px;height: 25px;text-align: right;"  hidden  disabled  type="text" formControlName="balance1" class="form-control" placeholder="balance" >
                                                <input style="width: 100px;height: 25px;text-align: right;"   hidden disabled  type="text" formControlName="billToCustId" class="form-control" placeholder="custid" >
                                                <input style="width: 100px;height: 25px;text-align: right;"   hidden disabled   type="text" formControlName="billToSiteId" class="form-control" placeholder="siteid" >
                                                <!-- <td>  <button  class="btn btn-secondary" (click)="ApplyRcpt(com.trxNumber,receiptNumber)">Apply</button></td>   -->
                                                <!-- <td>
                                                    <button style="width: 8em;" type="button" class="btn btn-info" (click)="refundInv(k)">Refund</button>
                                                </td> -->
                                            </tr>
                                            </ng-container>
                                            </ng-container>

                                </table>
                                </div>
                            </div>


                            </div>

                            <div class="modal-footer">
                                <!-- <button type="button" class="btn btn-info"  >Save</button> -->
                                <div *ngIf="validateStatus ,then vStatusYes; else vStatusNo")></div>
                                   <ng-template #vStatusYes>
                                       <button style="width: 8em;" type="button" class="btn btn-info" (click)="validateSave()">Validate</button>
                                   </ng-template>
                                   <ng-template #vStatusNo>
                                      <button disabled style="width: 8em;" type="button" class="btn btn-info" (click)="validateSave()">Validate</button>
                                  </ng-template>

                                  <div *ngIf="applySaveButton ,then appSaveYes; else appSaveNo")></div>
                                  <ng-template #appSaveYes>
                                      <button style="width: 8em;" type="button" class="btn btn-info" (click)="SaveApplyCreditMemo()">Save</button>
                                  </ng-template>
                                  <ng-template #appSaveNo>
                                      <button disabled style="width: 8em;" type="button" class="btn btn-info" (click)="SaveApplyCreditMemo()">Save</button>
                                  </ng-template>

                                <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                                <!-- <button type="button" class="btn btn-info" (click)="resetModalMast()">Reset</button> -->

                              </div>


                        </div>
                    </div>
                </div>


                <div class="grid_scroll2">
                 
                    <div class="modal fade" id="viewAccountingModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                      <div class="modal-dialog modal-xl" role="document">
                          <!-- modal-dialog-scrollable -->
                        <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLongTitle" style="margin-left: 40%;">Accounting Effect</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                              <table class="center">
                                  <tr>
                                      <td style="width: 18%" class="LabelFontStyle">
                                          Invoice&nbsp;No&nbsp;:&nbsp;
                                      </td> 
                                      <td>
                                          <input disabled  formControlName="name1" id="name1" class="form-control" [(ngModel)]="name1" style="width: fit-content;">
                                      </td>
                                      <td style="width: 18%" class="LabelFontStyle">
                                          Doc&nbsp;Srl&nbsp;No&nbsp;:&nbsp;
                                      </td>
                                      <td>
                                          <input disabled formControlName="docSeqValue" class="form-control" [ngModel]="docSeqValue" >
                                      </td>
                                      
                                      <td style="width: 18%" class="LabelFontStyle">
                                          Ledger&nbsp;:&nbsp;
                                      </td>
                                      <td>
                                          <input disabled formControlName="description" class="form-control" [ngModel]="description" >
                                      </td>
                                  </tr>
                                  <tr>
                                      <td style="width: 18%" class="LabelFontStyle">
                                          Category&nbsp;:&nbsp;
                                      </td> 
                                      <td>
                                          <input disabled formControlName="jeCategory" id="jeCategory" class="form-control" [ngModel]="jeCategory" >
                                      </td>
                                      <td style="width: 18%" class="LabelFontStyle">
                                          Date&nbsp;:&nbsp;
                                      </td> 
                                      <td>
                                          <input disabled formControlName="postedDate" id="postedDate" class="form-control" [ngModel]="postedDate" >
                                      </td>
                                      <td style="width: 18%" class="LabelFontStyle">
                                          Period&nbsp;:&nbsp;
                                      </td> 
                                      <td>
                                          <input disabled  formControlName="periodName" id="periodName" class="form-control" [ngModel]="periodName" >
                                      </td>
                                  </tr>
                                  <br>
                                  </table>
                                  <div class="grid_scroll2" style="background-color: rgb(172, 218, 236);">
                                  <table class="auto-style4" class="GridFont"   style="border-color:#959595;width:100%;">
                                      <thead>
                                        <tr class="GridHeader">
                                        <th>Line</th>
                                        <th>Account</th>
                                        <th>Debit(INR)</th>
                                        <th>Credit(INR)</th>
                                        <th>Description</th>
                                        <th>Account Description</th>
                                        </tr>
                                      </thead>
                                      <tbody>
                                          <tr *ngFor="let com of viewAccounting1" class="ItemStyle" style="text-decoration:none;position: initial;">
                                            <td>{{com.jeLineNum}}</td>
                                            <td >{{com.segmentName}}</td>
                                            <td style="text-align: right;padding-right: 5px;" >{{com.enteredDr}}</td>
                                            <td style="text-align: right;padding-right: 5px;">{{com.enteredCr}}</td>
                                            <td >{{com.description}}</td>
                                            <td >{{com.accountDesc}}</td>
                                          </tr>
                                      </tbody>
                                      <tr>
                                          <td></td>
                                          <td>Total:&nbsp;</td>
                                          <td >
                                              <input disabled  formControlName="runningTotalDr" id="runningTotalDr" class="form-control" [ngModel]="runningTotalDr" style="text-align: right;height: 22px;width: 100px;font-weight: bold;">
                                          </td>
                                          <td >
                                              <input disabled  formControlName="runningTotalCr" id="runningTotalCr" class="form-control" [ngModel]="runningTotalCr" style="text-align: right;height: 22px;width: 100px;font-weight: bold;">
                                          </td>
                                      </tr>
                                        </table>
                                        <!-- <table class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="border-color:#959595;width:100%;border-collapse:collapse;">
                                          <tr class="ItemStyle">
                                              <td style="width: 4rem;"></td>
                                              <td  style="width: 8rem;">Total:&nbsp;</td>
                                              <td style="width: 4rem;">
                                                  <input disabled  formControlName="runningTotalDr" id="runningTotalDr" class="form-control" [ngModel]="runningTotalDr" style="text-align: right;height: 22px;width: 100px;">
                                              </td>
                                              <td style="width: 2rem;">
                                                  <input disabled  formControlName="runningTotalCr" id="runningTotalCr" class="form-control" [ngModel]="runningTotalCr" style="text-align: right;height: 22px;width: 100px;">
                                              </td>
                                              <td style="width: 8rem;">
                                              </td>
                                              <td style="width: 8rem;" hidden>    SS-C-GST Liability Standard-11PU</td>
                                              <td style="width: 8rem;" hidden>    SS-C-GST Liability Standard-11PU</td>
                                          </tr>
                                         
                                       </table>  -->
                                      </div>
                          </div>
                          
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div> 


                <!-- ------------------------apply modal end-------------------- -->

                
                 
             
                <div class="grid_scroll2">
               
                    <div class="modal fade" id="viewApplyHistory" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                      <div class="modal-dialog modal-xl" role="document">
                        
                        <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLongTitle" style="margin-left: 40%;">Accounting Effect</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                                  <div class="grid_scroll2" style="background-color: rgb(172, 218, 236);">
                                  <table class="auto-style4" class="GridFont"   style="border-color:#959595;width:100%;">
                                      <thead>
                                        <tr class="GridHeader">
                                        <th>Apply Reference No</th>
                                        <th>Invoice Amount</th>
                                        <th>Invoice Balance</th>
                                        <th>Invoice Date</th>
                                        <th>Apply Date</th>
                                        <th>Apply Amount</th>
                                        <th>Application Type</th>
                                        </tr>
                                      </thead>
                                      <tbody>
                                          <tr *ngFor="let com of viewApplyHistAr" class="ItemStyle" style="text-decoration:none;position: initial;">
                                            <td style="text-align: right;padding-right: 5px;">{{com.APPLYREFERENCENO}}</td>
                                            <td style="text-align: right;padding-right: 5px;">{{com.INVOICEAMOUNT}}</td>
                                            <td style="text-align: right;padding-right: 5px;" >{{com.INVOICEBALANCE}}</td>
                                            <td style="text-align: right;padding-right: 5px;">{{com.TRXDATE | date:'dd-MM-yyyy  hh:mm:ss'}}</td>
                                            <td style="text-align: right;padding-right: 5px;">{{com.APPLYDATE | date:'dd-MM-yyyy  hh:mm:ss'}}</td>
                                            <td style="text-align: right;padding-right: 5px;">{{com.APPLYAMOUNT}}</td>
                                            <td style="text-align: right;padding-right: 5px;">{{com.APPLICATIONTYPE}}</td>
                                          </tr>
                                      </tbody>
                                     
                                        </table>
                                       
                                      </div>
                          </div>
                          
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div> 
        </form>
        <!-- </form> -->
    </div>
</div>
</div>
</div>
