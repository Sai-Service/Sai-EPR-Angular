<!-- <form [formGroup]="pumpDipEntryForm" (ngSubmit)="pumpDipEntry(pumpDipEntryForm.value)" id="form_1" > -->
<form [formGroup]="pumpDipEntryForm" (ngSubmit)="pumpDipEntry(pumpDipEntryForm.value)">

    <div class="center">
        <table style="width: 100%;background-color: white;">
            <tr>
                <td colspan="4" class="PageHeader" style="width: 100%;" >
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    DIP&nbsp;Scale&nbsp;Entry&nbsp;Form
                </td>
                <table style="width: 100%; background-color: #a4d3e9;">
                    <tr>
                        <td style="width: 15%" class="LabelFontStyle">DIP&nbsp;Entry&nbsp;No&nbsp;:</td>
                        <td>
                            <input type="text"  class="form-control" formControlName="dipNum"  [(ngModel)]="dipNum"  >
                        </td>
                        <td colspan="8" style="text-align: left; width: 100%;">
                            <button type="button" class="btn btn-primary" (click)="searchMst(dipNum)"><i class="fa fa-search"></i></button>
                            <!-- Modal -->
                        </td>
                      </tr>
                </table>
            </tr>
        </table>


        <div class="center" style="width: 100%;">
            <div class="form-bg">
                   <table class="center">
                 
                    <!-- <input hidden    type="number"  formControlName="emplId" class="form-control" [(ngModel)]="emplId"> -->
                    <input hidden    type="number"  formControlName="ouId" class="form-control" [(ngModel)]="ouId">
                    <input hidden    type="number"  formControlName="divisionId" class="form-control" [(ngModel)]="divisionId">
                    <input hidden    type="number"  formControlName="locid" class="form-control" [(ngModel)]="locid">
                   
                    <tr>
                        <td style="width: 15%" class="LabelFontStyle">Dip&nbsp;Entry&nbsp;No: </td>

                        <td><input disabled type="text" class="form-control" formControlName="dipentrynumber" [(ngModel)] ="dipentrynumber" >
                        <!-- <input hidden disabled type="text" class="form-control"  formControlName="dipentrynumber"> -->
                        <input disabled hidden type="number" class="form-control" formControlName="dipentryid">

                        <td style="width: 15%" class="LabelFontStyle">Dip&nbsp;Entry&nbsp;Date:</td>
                        <td><input  type="date" class="form-control" formControlName="dipentrydate"  [(ngModel)] ="dipentrydate" (change)="validateShiftDate(dipentrydate)" style="background-color: yellow;" max="{{minDate | date:'yyyy-MM-dd'}}"></td>
                        
                     
                    </tr>
                  
    
    
                    <tr>
                        <!-- <div *ngIf="displayButton; then saveYes1; else saveYes2"></div>
                        <ng-template #saveYes1>   -->

                        <!-- <td style="width: 15%" class="LabelFontStyle">Shift:</td>
                        <td>
                            <select formControlName="shiftid" id="shiftid" [(ngModel)]="shiftid"  class="form-control"
                                style="background-color: yellow;" >
                                <option >--Select--</option>
                                <option *ngFor="let sc of  shiftList" [ngValue]="sc.cmnId">
                                    {{sc.codeDesc}}
                                </option>
                            </select>   

                            <input disabled hidden type="number" class="form-control" formControlName="shiftid">
                          </td> -->

                            <td style="width: 15%" class="LabelFontStyle">Shift&nbsp;Employee:</td>
                            <td>
                                <!-- <select formControlName="emplName" class="form-control"
                                    style="background-color: yellow;" (change)="onSelectEmplName($event)">
                                    <option>--Select--</option>
                                    <option *ngFor="let sc of  salesPersonList">
                                        {{sc.ticketNo}}-{{sc.fullName}}
                                    </option>
                                </select> -->

                            <input type="text" formControlName="shiftEmplName" [(ngModel)]="shiftEmplName"   style="background-color: yellow;"
                                (keyup)="getUserIdsFirstWay($event)" id="userIdFirstWay"
                                list="dynmicUserIds" class="form-control" 
                                (change)="onSelectEmplName($event)" />
                            <datalist id="dynmicUserIds">
                                <option *ngFor="let sc of  salesPersonList">
                                    {{sc.ticketNo}}-{{sc.fullName}}
                            </datalist>
                                <input disabled hidden type="number" class="form-control" formControlName="emplid">
                            </td>

                        <!-- </ng-template>
                        <ng-template #saveYes2>  
                            <td style="width: 15%" class="LabelFontStyle">Shift:</td>
                            <td><input disabled type="text" class="form-control" formControlName="shiftTypeName" [(ngModel)]="shiftTypeName" ></td>

                            <td style="width: 15%" class="LabelFontStyle">Shift&nbsp;Employee:</td>
                            <td><input disabled type="text" class="form-control" formControlName="shiftEmplName" [(ngModel)]="shiftEmplName" ></td>


                        </ng-template> -->


                                                       

                        <td style="width: 15%;" class="LabelFontStyle">Tank&nbsp;Code&nbsp;:&nbsp;</td>

                        <td>
                            <select  formControlName="tankid" id="tankid" [(ngModel)]="tankid" (ngModelChange)="onSelectTank($event)"   class="form-control" style="background-color: yellow;">
                                <!-- <option>--Select--</option> -->
                                <option *ngFor="let sc of  tankList"  [value]="sc.tankId">
                                    {{sc.tankName}}
                                </option>
                            </select>

                            <input disabled  hidden type="text" class="form-control" formControlName="tankname">

                        </td>
                                
                    </tr>
                    <tr>

                        <td style="width: 15%" class="LabelFontStyle">Open&nbsp;Dip&nbsp;Reading:</td>
                        <td><input  type="number" class="form-control" formControlName="opendip" [(ngModel)]="opendip" (change) ="searchVolQty(opendip,'OPENR')" style="text-align:center;background-color: yellow;"></td>
                        <!-- <td> <input   formControlName="dipVolume" [(ngModel)]="dipVolume" (change) ="searchVolQty(dipVolume)" (keyup)="onKey($event)" class="form-control" style="text-align:center" > </td> -->

                        <!-- (keyup)="onKey($event,'OPENR')" -->
                        <td style="width: 15%" class="LabelFontStyle">Open&nbsp;Qty:</td>
                        <td><input disabled type="number" class="form-control" formControlName="openstock" [(ngModel)]="openstock" style="text-align:center"></td>
                    </tr>
                    <tr>
                        <td style="width: 15%" class="LabelFontStyle">Close&nbsp;Dip&nbsp;Reading:</td>
                        <td><input  type="number" class="form-control" formControlName="closedip" [(ngModel)]="closedip" (change) ="searchVolQty(closedip,'CLOSER')" style="text-align:center;background-color: yellow;" ></td>
                        <!-- (keyup)="onKey($event,'CLOSER')" -->
                        <td style="width: 15%" class="LabelFontStyle">Close&nbsp;Qty:</td>
                        <td><input disabled type="number" class="form-control" formControlName="closestock" [(ngModel)]="closestock" style="text-align:center"></td>


                    </tr>

                  
                    </table>
    
                    <br>
    
                    <table class="center">
                        <tr >
                            <div *ngIf="displayButton; then Save1; else Save2"></div>
                            <ng-template #Save1>
    
                                <div *ngIf="saveButton; then S1; else S2"></div>
                                 <ng-template #S1>
                                 <td><button type="button" class="btn btn-info" id="register"  (click)="saveDipEntry()">Save</button></td>
                                 </ng-template><ng-template #S2></ng-template>
    
                                </ng-template>
                            <ng-template #Save2>
                                <div *ngIf="updButton; then U1; else U2"></div>
                                <ng-template #U1>
                                     <td><button disabled type="button" class="btn btn-info" id="register"  (click)="updateNozzleMast()">Update</button></td>
                                </ng-template> <ng-template #U2></ng-template>
    
                            </ng-template>
                           <td><button type="button" class="btn btn-info" id="register" (click)="resetMast()">Reset</button></td>
                            <td><button type="button" class="btn btn-info" (click)="closeMast()" >Close</button></td>
                            <td ><button disabled type="button" class="btn btn-info" id="register" (click)="searchMast()">Search</button></td> 

                        </tr>
                    </table>
                    <br>
                  
                    <br>
    
    
    
            </div>
        </div>
    </div>



   
           <fieldset class="RFS">
            <legend id="FormsPH_LGAadhaar" class="RFSL" style="font-size: 12px;color: black;font-weight: bold;">SEARCH</legend>
            <table class="center" style="width: 100%;background-color: #FFE4B5;">
                <tr>
                <td >
                    <table class="center">
                        <tr>
                            <td  style="background-color: #FFE4B5;">&nbsp;Entry&nbsp;Date&nbsp;:&nbsp;</td>
                            
                            <td style="background-color: #FFE4B5;">
                              <td> <input   type="date"  formControlName="searchByDate"  id="searchByDate" [(ngModel)]="searchByDate" class="form-control"  max="{{minDate | date:'yyyy-MM-dd'}}" > </td>
        
                            <td style="background-color: #FFE4B5;">
                                <button type="button" class="btn-primary" (click)="SearchByEntryDate(searchByDate)"><i class="fa fa-search"
                                        aria-hidden="true"></i></button>
                            </td>
        
                        </tr>
                    </table>
                </td>
                </tr>
            </table>
            </fieldset>
    

    </form>
    
    
    <div class="container1">
        <div class="grid_scroll">
        <table class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="border-color:#959595;border-collapse:collapse;width: 100%;">
       <tbody>
            <tr class="GridHeader">
                <th style="width:5rem" scope="col">Srl&nbsp;No&nbsp;</th>
                <th style="width:10rem;text-align: center;" scope="col">Shift No</th>
                <th style="width:20rem;text-align: center;" scope="col">Dip Entry No</th>
                <th style="width:10rem;text-align: center;" scope="col">Dip Entry Date</th>
                <th style="width:20rem;text-align: left;" scope="col">  Tank Name</th>
                <th style="width:10rem;text-align: center;" scope="col">Open Reading</th>
                <th style="width:10rem;text-align: center;" scope="col">Open Stock</th>
                <th style="width:10rem;text-align: center;" scope="col">Close Reading</th>
                <th style="width:10rem;text-align: center;" scope="col">Close Stock</th>
            <th style="width:6rem" scope="col">Select</th>
        </tr>
       </tbody>
       <tr *ngFor="let com of lstcomments1 let i=index" class="ItemStyle" style="text-decoration:none;font-size: small;">
        
        <td style="text-align: center;">{{i+1}}</td>
        <td style="text-align:center">{{com.shiftid}}</td>
        <td style="text-align:center">{{com.dipentryid}}-{{com.dipentrynumber}}</td>
        <td style="text-align:center">{{com.dipentrydate | date:'dd-MM-y'}}</td>
        <td style="text-align:center">{{com.tankname}}</td>
        <td style="text-align:center">{{com.opendip}}</td>
        <td style="text-align:center">{{com.openstock }}</td>
        <td style="text-align:center">{{com.closedip}}</td>
        <td style="text-align:center">{{com.closestock}}</td>
        <td><button class="btn btn-secondary" (click)="searchMst(com.dipentrynumber)">Select</button></td>   
       </tr>
        </table>
    </div>
    </div>
         
    
   