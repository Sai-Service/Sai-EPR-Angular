<div class="center">
    <table style="width: 100%;background-color: white;">
        <tr>
            <td class="PageHeader"> &nbsp;PRICE&nbsp;LIST&nbsp;MASTER</td>
        </tr>
    </table>

    <div class="center" style="width: 100%;">
        <div class="form-bg">
            <div class="center" style="width: 100%;">
              <form [formGroup]="priceListMasterForm" (ngSubmit)="priceListMaster(priceListMasterForm.value)">
                    
             
                    <table class="center">
                        <tr>
                            <td  hidden style="border: none;color: black;">
                                <input type="text" disabled formControlName="loginArray"
                                    class="form-control" [(ngModel)]="loginArray" placeholder="">
                            </td>
                            
                            <td>
                                <input hidden  style="width:30px ;"  disabled type="text" formControlName="orgId"
                                class="form-control" [(ngModel)]="orgId" >
                            </td>
                     
                            <td>
                                <input hidden style="width:30px ;" disabled type="text" formControlName="locId"  [(ngModel)]="locId" class="form-control"  placeholder="Location Name">
                            </td>

                            <!-- <td style="width: 15%" class="LabelFontStyle">Emp&nbsp;Id:&nbsp;</td> -->

                            <td >
                                <input  hidden  type="text" disabled formControlName="emplId"
                                class="form-control" [(ngModel)]="emplId" placeholder="">
                            </td>
                            <td> <input hidden type="text"  formControlName="divisionId" id="divisionId"  [(ngModel)]="divisionId" ></td> 
                                                   
                        </tr>
                    </table>
                    
                    <fieldset class="RFS">
                    <legend id="FormsPH_LGAadhaar" class="RFSL" style="font-size: 10px;color: black;">PL Header Details</legend>
                   <table class="center">

                        <tr>
                            <td style="width: 15%" class="LabelFontStyle">Division&nbsp;:</td>
                             <td>
                                <input disabled type="text"  formControlName="divisionName" id="divisionName"  [(ngModel)]="divisionName" class="form-control">
                              </td>
                            
                              <td style="width: 15%" class="LabelFontStyle">Dept&nbsp;:</td>
                              
                              <div *ngIf="displayButton; then thenBlock112; else elseBlock112"></div>
                              <ng-template #thenBlock112>
                                     <td>  
                                        <select formControlName="deptId" id="deptId" [(ngModel)]="deptId" class="form-control">
                                            <option disabled>--Select--</option>
                                            <option *ngFor="let sc of  DepartmentList" [ngValue]="sc.cmnTypeId"  >
                                            {{sc.cmnTypeId}}-{{sc.code}}
                                            </option>
                                        </select>
                                    </td>
                                </ng-template>
                                <ng-template #elseBlock112>
                                    <td>  
                                        <select disabled formControlName="deptId" id="deptId" [(ngModel)]="deptId" class="form-control">
                                            <option disabled>--Select--</option>
                                            <option *ngFor="let sc of  DepartmentList" [ngValue]="sc.cmnTypeId"  >
                                            {{sc.cmnTypeId}}-{{sc.code}}
                                            </option>
                                        </select>
                                    </td>
                                </ng-template>

                              

                              

                            
                                <td style="width: 15%" class="LabelFontStyle">Operating&nbsp;Unit&nbsp;:</td>
                               
                                <div *ngIf="showOu; then thenBlockShowOu; else elseBlockShowOu"></div>
                                 <ng-template #thenBlockShowOu> 

                                    <div *ngIf="displayButton; then thenBlock114; else elseBlock114"></div>
                                    <ng-template #thenBlock114>

                                     <td>  
                                        <select   formControlName="ouId" id="ouId" [(ngModel)]="ouId"  class="form-control"  >
                                        <option disabled>--Select--</option>
                                        <option *ngFor="let sc of  OUIdList" [ngValue]="sc.ouId">
                                        {{sc.ouId}}-{{sc.ouName}}
                                        </option>
                                        </select>
                                    </td>
                                    </ng-template>

                                    <ng-template #elseBlock114>
                                        <td>  
                                            <select  disabled formControlName="ouId" id="ouId" [(ngModel)]="ouId"  class="form-control"  >
                                            <option disabled>--Select--</option>
                                            <option *ngFor="let sc of  OUIdList" [ngValue]="sc.ouId">
                                            {{sc.ouId}}-{{sc.ouName}}
                                            </option>
                                            </select>
                                        </td>

                                    </ng-template>

                                </ng-template>

                                <ng-template #elseBlockShowOu> 
                                    <td>  
                                        <select  disabled  formControlName="ouId" id="ouId" [(ngModel)]="ouId"  class="form-control"  >
                                        <option disabled>--Select--</option>
                                        <option *ngFor="let sc of  OUIdList" [ngValue]="sc.ouId">
                                        {{sc.ouId}}-{{sc.ouName}}
                                        </option>
                                        </select>
                                    </td>

                                </ng-template>

                       </tr>
                           <tr>
                              <td style="width: 15%" class="LabelFontStyle">PL&nbsp;Type:&nbsp;</td>
                                <div *ngIf="displayButton; then thenBlock111; else elseBlock111"></div>
                                <ng-template #thenBlock111>

                                    <td> 
                                    <select  formControlName="priceListType" id="priceListType"  [(ngModel)]="priceListType" class="form-control" (ngModelChange)='onPLTSelected($event)'>
                                        <option disabled>--Select--</option>
                                        <option *ngFor="let sc of  PriceTypeList" [ngValue]="sc.code">
                                            {{sc.cmnTypeId}}-{{sc.code}}
                                        </option>
                                        </select>
                                   
                                     </td>

                                        <td style="width: 15%" class="LabelFontStyle">PL&nbsp;Name:&nbsp;</td>
                                        <td><input  type="text"  formControlName="priceListName" id="priceListName"  [(ngModel)]="priceListName" class="form-control"></td>
                                </ng-template>

                                <ng-template #elseBlock111>

                                    <td> 
                                        <select disabled formControlName="priceListType" id="priceListType"  [(ngModel)]="priceListType" class="form-control" (ngModelChange)='onPLTSelected($event)'>
                                            <option disabled>--Select--</option>
                                            <option *ngFor="let sc of  PriceTypeList" [ngValue]="sc.code">
                                                {{sc.cmnTypeId}}-{{sc.code}}
                                            </option>
                                            </select>
                                       
                                    </td>
                                            <td style="width: 15%" class="LabelFontStyle">PL&nbsp;Name:&nbsp;</td>

                                            <td><input disabled type="text"  formControlName="priceListName" id="priceListName"  [(ngModel)]="priceListName" class="form-control"></td>
                                </ng-template>

                                            <td style="width: 15%" class="LabelFontStyle">PL&nbsp;Description:&nbsp;</td>
                                            <td><input  type="text"  formControlName="description" id="description" [(ngModel)]="description" class="form-control"></td>

                            </tr>


                              

                                        <!-- ==========================Status / Start Date /End Date =================================== -->
                             <tr>
                                    <td style="width: 15%" class="LabelFontStyle">
                                        Status&nbsp;&nbsp;:
                                    </td>

                                    <td>
                                        <select  formControlName="status" id="status" class="form-control"  
                                        [ngModel]="status" (ngModelChange)='onOptionsSelectedStatus($event)'>
                                        <option disabled>--Select--</option>
                                        <option *ngFor="let sc of  statusList" [ngValue]="sc.code">
                                            {{sc.code}}
                                        </option>
                                        </select>
                                    </td>

            
                                    <div *ngIf="displayInactive; then thenBlockInactive; else elseBlockInactive"></div>
                                    <ng-template #thenBlockInactive> 
                                        <td style="width: 15%" class="LabelFontStyle"> Start&nbsp;Date&nbsp;:</td>
                                        <div *ngIf="displayButton; then b1; else b2"></div>
                                         <ng-template #b1> 
                                        <td><input   type="date"   id="startDate"  formControlName="startDate"  [(ngModel)]="startDate" class="form-control"
                                            max="{{minDate | date:'yyyy-MM-dd'}}"> </td>
                                         </ng-template>
                                         <ng-template #b2> 
                                            <td> <input disabled type="text" formControlName="startDate" [(ngModel)]="startDate" class="form-control"  [ngModel]="startDate | date:'yyyy-MM-dd' " > </td>
                                         </ng-template>

                            
                                    </ng-template>

                                    <ng-template #elseBlockInactive>
                                        <td style="width: 18%" class="LabelFontStyle">
                                            Inactive&nbsp;Date:&nbsp;
                                        </td>
                                        <td>
                                            <input disabled type="text" formControlName="endDate" [ngModel]="endDate" class="form-control"
                                                [ngModel]="endDate | date:'dd/MM/yyyy'">
                                        </td>
                            
                                    </ng-template>

                                    <td style="width: 15%" class="LabelFontStyle">Price&nbsp;Sub&nbsp;Type:</td>
                                    
                                    <div *ngIf="displayButton; then thenBlock113; else elseBlock113"></div>
                                    <ng-template #thenBlock113>
                                   
                                        <td>  
                                            <select formControlName="priceSubType" id="priceSubType" [(ngModel)]="priceSubType" class="form-control">
                                                <option disabled>--Select--</option>
                                                <option *ngFor="let sc of  PriceSubTypeList" [ngValue]="sc.code"  >
                                                {{sc.code}}
                                                </option>
                                            </select>
                                        </td>
                                    </ng-template>
                                       
                                    <ng-template #elseBlock113>
                                        <td>
                                            <select disabled formControlName="priceSubType" id="priceSubType" [(ngModel)]="priceSubType" class="form-control">
                                            <option disabled>--Select--</option>
                                            <option *ngFor="let sc of  PriceSubTypeList" [ngValue]="sc.code"  >
                                            {{sc.code}}
                                            </option>
                                        </select>
                                        </td>

                                    </ng-template>


                                </tr>
                                     
                    </table>
                    </fieldset>


                                    
                    <table style="width: 100%; background-color: #FFE4B5;">
                        <tr>
                            <td class="SubHeading2"> Item Line Details&nbsp;</td>
                        </tr>
                    </table>

                    <!-- <table class="center" style=" width:100%; background-color:beige" >
               
                            <tr>

                                <div *ngIf="showItemSearch; then thenBlockSearchItem; else elseBlockSearchItem"> </div>

                                <ng-template #thenBlockSearchItem>
                                <td  style="width: 15%" class="LabelFontStyle">Search&nbsp;Item&nbsp;By&nbsp;:</td>
                                <td> 
                                    <select   formControlName="searchBy" id="searchBy" [(ngModel)]="searchBy" class="form-control">
                                         <option value="ITEM CODE">ITEM CODE</option>
                                        <option value="ITEM DESCRIPTION">ITEM DESCRIPTION</option>
                                </select>
                                </td>

                                <td style="width: 15%" class="LabelFontStyle">Search&nbsp;Value&nbsp;:</td>

                                <td>
                                    <input class="form-control" type="text" (keyup)="getInvItemId($event)" formControlName="searchValue"  [(ngModel)]="searchValue"
                                    id="invItemIdFirstWay"  list="dynmicUserIds1" 
                                    class="form-control" />
                                   <datalist id="dynmicUserIds1" >
                                     <option *ngFor="let item of ItemIdList" >
                                       {{item.SEGMENT}} 
                                   </datalist>
                                     </td>
                                

                                <td>
                                    <button style="width: 10em;" type="button" class="btn btn-info"  id="register" (click)="findByCode(searchBy,searchValue)" >Search</button>
                                </td>
                                </ng-template>
                                <ng-template #elseBlockSearchItem > </ng-template>
                           </tr>
                    </table> -->

                    <div *ngIf="showItemSearch; then thenBlockSearchItem; else elseBlockSearchItem"> </div>
                    <ng-template #thenBlockSearchItem>
                        <fieldset>
                            <td  style="width: 15%" class="LabelFontStyle">Search&nbsp;By&nbsp;:</td>
                            
                            <td> 
                                <select   formControlName="searchBy" id="searchBy" [(ngModel)]="searchBy" class="form-control"  (ngModelChange)='onSearchTypeSelected($event)' style="width: 300px;">
                                    <option value="ITEM NUMBER">ITEM NUMBER</option>
                                    <option value="ITEM DESCRIPTION">ITEM DESCRIPTION</option>
                               </select>
                            </td>
                
                          
                            <td></td> <td></td>
                            <div *ngIf="searchByItem; then itemYes; else descYes"> </div>
                            <ng-template #itemYes>
                              <td style="width: 15%" class="LabelFontStyle">&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;Number&nbsp;:</td>
                
                                <!-- <td ><input class="form-control" type="text" (keyup)="getInvItemId($event)" formControlName="searchByItemCode" 
                                   id="invItemIdFirstWay"  list="dynmicUserIds2" 
                                   class="form-control"    (ngModelChange)="onOptioninvItemIdSelectedSingle($event)"
                                   style="width: 300px; background-color: rgb(240, 240, 166); text-transform: uppercase;"  />
                                 
                                  <datalist id="dynmicUserIds2" >
                                     <option *ngFor="let item of priceListLineDetails1"  [(ngValue)]="item.itemId">
                                       {{item.segment}}
                                </datalist>
                                </td> -->

                                  <td>
                                    <input  style="width:22rem;background-color: yellow; text-transform: uppercase;"  type="text" formControlName="searchByItemCode" class="form-control"  
                                                      placeholder="Enter Item Code"  >
                                                      <!-- (change)="onOptioninvItemIdSelectedNew(searchByItemCode,i)"  -->
                                </td>

                                   
                                <td style="text-align: left; width: 100%;">
                                    <button type="submit" class="btn btn-primary" (click)="F9Search()" style="width: 4em;" ><i class="fa fa-search"></i></button>
                                  </td>
                            </ng-template>
                            <ng-template #descYes>
                              <td style="width: 15%" class="LabelFontStyle">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;Description&nbsp;:</td>
                            <td>
                                <input   type="text"  formControlName="searchByItemDesc"  id="searchByItemDesc" 
                                         [(ngModel)]="searchByItemDesc" class="form-control"  placeholder="Enter Item Description"
                                         style="width: 300px; background-color: rgb(240, 240, 166); text-transform: uppercase;"  >
                             </td>

                             <td style="text-align: left; width: 100%;">
                                <button type="submit" class="btn btn-primary"  data-toggle="modal" data-target="#PlDescSearch"  (click)="F9Search()" style="width: 4em;" ><i class="fa fa-search"></i></button>
                              </td>

                            </ng-template>

                            <!-- <td>
                                <button type="button"  class="btn btn-primary" 
                                data-toggle="modal" data-target="#showpListData" style="width: 5rem;color: black;"  (click)="LoadPList()">
                                Show&nbsp;List</button>
                            </td> -->
                
                                
                               
                                
                
                        </fieldset>
                    </ng-template>
                    <ng-template #elseBlockSearchItem></ng-template>


                        

                        <div class="center">
                            <!-- <br> -->
                           <div class="center" formArrayName="priceListDetailList">
      
                                <div class="grid_scroll">

                                 <table style="width: 100%; border: solid 1px Gray" class="auto-style4"
                                              cellspacing="0" cellpadding="4" rules="all" class="center">

                                              <thead>
                                                <tr class="GridHeader">
                                                      <th style="width:4rem" scope="col">Srl No.</th>
                                                      <!-- <th style="width:5rem" scope="col">Item Id</th> -->
                                                      <th style="width:15rem" scope="col">Item Code</th>
                                                      <th style="width:20rem" scope="col">Item Description</th>
                                                      <th style="width:6rem" scope="col">Item Category</th>
                                                      <th style="width:3rem" scope="col">UOM</th>
                                                      <th style="width:6rem" scope="col">Batch Code</th>
                                                      <th style="width:6rem" scope="col">Price</th>
                                                      <th style="width:2rem" scope="col">Add+</th>
                                                      <th style="width:2rem" scope="col">Del-</th>
                                                  </tr>
                                              </thead>
                                              <div *ngIf="displayLineDetails; then thenLineDetails; else elseLineDetails"> </div>
                                              <ng-template #thenLineDetails>
                                                <tr *ngFor="let com of priceListLineDetails let i= index" class="ItemStyle" style="text-decoration:none;font-size: 14px;">
                                                    <td style="border: 1px solid black;padding-left: 5px;">{{i+1}}</td>
                                                    <!-- <td style="border: 1px solid black;padding-left: 5px;"> {{com.itemId}}</td> -->
                                                    <td style="border: 1px solid black;padding-left: 5px;"> {{com.segment}}</td>
                                                    <td style="border: 1px solid black;padding-left: 5px;"> {{com.itemDescription}}</td>
                                                    <td style="border: 1px solid black;padding-left: 5px;"> {{com.itemCategory}}</td>
                                                    <td style="border: 1px solid black;padding-left: 5px;"> {{com.uom}}</td>
                                                    <td><input style="width:6rem;"  type="text" formControlName="batchCode"  class="form-control" placeholder="Batch Code "  > </td>
                                                    <td><input style="text-align: right;width:6rem;"  type="number" formControlName="priceValue"  class="form-control" (change)="validatePrice(i)" placeholder="Price "  > </td>
                                                   

                                                    <!-- <td style="border: 1px solid black;padding-left: 5px;"> {{com.batchCode}}</td> -->
                                                    <!-- <td style="border: 1px solid black;padding-left: 5px; text-align: right;"> {{com.priceValue}}</td> -->
                                                    <td>
                                                        <button disabled type="submit" class="btn btn-info" (click)="addRow(i)" (keydown.shift.arrowdown)="addRow(i)" style="width: min-content;"><i
                                                        class="fa fa-plus"></i></button>
                                                    </td>
                                                    <td>
                                                        <button disabled type="submit" class="btn btn-info" (click)="RemoveRow(i)" style="width: min-content;"><i
                                                        class="fa fa-trash"></i></button>
                                                    </td>
                                                </tr>
                                              </ng-template>
                                              <ng-template #elseLineDetails>
                                            <tr *ngFor="let group of lineDetailsArray().controls; let i= index" [formGroupName]="i" >
                                                
                                            <input type="text" hidden formControlName="priceListLineId">
                                            <input type="text" hidden  formControlName="itemId" >
                                             
                                            <td style="text-align: center;width: 4rem;">{{i+1}}</td>
                                             
                                      

                                                <div *ngIf="addNew; then B1; else B2"></div>
                                                <ng-template #B1>
                                                
                                                    <!-- <td><input type="text" formControlName="segment"
                                                        (keyup)="getInvItemId($event)" id="invItemIdFirstWay"
                                                        list="dynmicUserIds1" class="form-control"  style="width: 16rem;"
                                                        (ngModelChange)="onOptioninvItemIdSelectedNew($event,i)" />
                                                        <datalist id="dynmicUserIds1">
                                                            <option *ngFor="let item of ItemIdList" [ngValue]="item.itemId">
                                                                    {{item.SEGMENT}}
                                                            </option>
                                                        </datalist> 
                                                    </td>  -->
                                                <td>
                                                    <input  style="width:22rem;background-color: yellow; text-transform: uppercase;"  type="text" formControlName="segment" class="form-control"  
                                                                     (change)="onOptioninvItemIdSelectedNew(segment,i)"  placeholder="Enter Item Code"  >
                                                </td>

                                                <!-- <td><input style="text-align: right;width:6rem;"  type="number" formControlName="priceValue"  class="form-control" (change)="validatePrice(i)" placeholder="Price "  > </td> -->
 

                                                </ng-template>
                                                <ng-template #B2>
                                                 <td><input disabled style="width:16rem;" type="text" formControlName="segment" class="form-control"  /></td> 
                                                </ng-template>
                                              
                                                <td>
                                                    <input disabled style="width:22rem;"  type="text" formControlName="itemDescription" class="form-control"   placeholder="Item Description "  >
                                                </td>

                                                <td>
                                                    <input style="width:7rem;" disabled  type="text" formControlName="itemCategory"  class="form-control" placeholder="Item Category "  >
                                                </td>
                                                <td>
                                                    <input style="width: 3rem;" disabled  type="text" formControlName="uom"  class="form-control" placeholder="Uom "  >
                                                </td>
                                                <td>
                                                    <input style="width:6rem;"  type="text" formControlName="batchCode"  class="form-control" placeholder="Batch Code "  >
                                                </td>
                                                <td>
                                                    <input style="text-align: right;width:6rem;"  type="number" formControlName="priceValue"  class="form-control" (change)="validatePrice(i)" placeholder="Price "  >
                                                </td>
                                               
                                                <div *ngIf="addNew; then  showyes; else showNo"> </div>
                                                <ng-template #showyes> 
                                                    <td><button  type="submit" class="btn btn-info" (click)="addRow(i)" (keydown.shift.arrowdown)="addRow(i)" style="width: min-content;"><i class="fa fa-plus"></i></button>  </td>
                                                    <td><button  type="submit" class="btn btn-info" (click)="RemoveRow(i)" style="width: min-content;"><i class="fa fa-trash"></i></button>  </td>
                                                </ng-template>
                                                <ng-template #showNo>
                                                    <td><button disabled type="submit" class="btn btn-info" (click)="addRow(i)" (keydown.shift.arrowdown)="addRow(i)" style="width: min-content;"><i class="fa fa-plus"></i></button>  </td>
                                                    <td><button disabled type="submit" class="btn btn-info" (click)="RemoveRow(i)" style="width: min-content;"><i class="fa fa-trash"></i></button>  </td>
                                                </ng-template>


                                              </tr>
                                            <!-- </div> -->
                                            </ng-template>
                                    </table>
                                </div>
                           </div>
                        </div>

                         <!-- ===================================Buttons======================================== -->
                        <br>
                        <table class="center">
                            <tr>
                                <div *ngIf="displayButton; then thenBlock1; else elseBlock1"></div>
                                <ng-template #thenBlock1>
                                    <td>
                                        <button type="button" class="btn btn-info" (click)="newMast()" [disabled]="!priceListMasterForm">Save</button>
                                    </td>
                                    
                                    <td>
                                        <button type="button" class="btn btn-info" (click)="searchMast()">Search</button>
                                    </td>

                                        <!-- ====================Reset Dialog ======================== -->

                                                    <td>
                                                    <button type="button" class="btn btn-info" data-toggle="modal" data-target="#exampleModal">Reset</button>
                                                    </td>
                                                    <!-- Modal -->
                                                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="width: 500px;">
                                                    <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                    <div class="modal-body">
                                                    <label style="font-size: small; color: black;font-weight: bold; text-align:center;vertical-align: middle;">
                                                        <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -->
                                                        Want&nbsp;to&nbsp;Reset. &nbsp;Confirm&nbsp;(Yes/No)?&nbsp;
                                                    </label>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <table class="center">
                                                        <tr>
                                                            <td>
                                                                <button type="button" class="btn btn-info" data-dismiss="modal">No</button>
                                                            </td>
                                                            <td>
                                                                <button type="submit" class="btn btn-info" id="register" (click)="resetMast()">Yes</button> 
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    </div>
                                                    </div>
                                                    </div>
                                                    </div>

                                                        <!-- =====================Close Dialog Box====================== -->
                                                        <td>
                                                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#exampleModalLong">Close</button>
                                                        </td>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" style="width: 500px;">
                                                        <div class="modal-dialog" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-body">
                                                                <label style="font-size: small; color: black; font-weight: bold; text-align: center; vertical-align: middle;">
                                                                    <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -->
                                                                    Want&nbsp;to&nbsp;Close.&nbsp;Confirm&nbsp;(Yes/No)?&nbsp;
                                                                </label>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <table class="center">
                                                            <tr>
                                                                <td>
                                                                <button  type="submit" class="btn btn-info" data-dismiss="modal" id="register"   (click)="closeMast()">Yes</button>
                                                                </td>
                                                                <td>
                                                                <button type="button" class="btn btn-info" data-dismiss="modal">No</button>
                                                                </td>
                                                            </tr>
                                                            </table>
                                                            </div>
                                                            </div>
                                                            </div>
                                                        </div>
                                            <!-- ==================================================== -->

                            </ng-template>
                            <ng-template #elseBlock1>
                                <div *ngIf="updateButton; then U1; else U2"></div>
                                <ng-template #U1>
                                    <td><button style="width: 8rem;color: black;" type="button" class="btn btn-info" (click)="updateMastLine()"[disabled]="!priceListMasterForm">Update Item</button> </td>
                                    <td><button style="width: 8rem;color: black;" type="button" class="btn btn-info" (click)="updateMastHeader()"[disabled]="!priceListMasterForm">Update Header</button> </td>
                                </ng-template>
                                <ng-template #U2>
                                    <td><button disabled style="width: 8rem;color: black;" type="button" class="btn btn-info" (click)="updateMastLine()">Update Item</button> </td>
                                    <td><button disabled style="width: 8rem;color: black;" type="button" class="btn btn-info" (click)="updateMastHeader()">Update Header</button> </td>
                                </ng-template>

                                <td>
                                    <button type="button" class="btn btn-info" (click)="searchMast()">Search</button>
                                </td>
                                    
                                        <!-- ====================Reset Dialog ======================== -->

                                                        <td>
                                                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#exampleModal">Reset</button>
                                                        </td>
                                                        <!-- Modal -->
                                                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="width: 500px;">
                                                    <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                    <div class="modal-body">
                                                        <label style="font-size: small; color: black;font-weight: bold; text-align:center;vertical-align: middle;">
                                                            <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -->
                                                            Want&nbsp;to&nbsp;Reset. &nbsp;Confirm&nbsp;(Yes/No)?&nbsp;
                                                        </label>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <table class="center">
                                                            <tr>
                                                                <td>
                                                                    <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
                                                                </td>
                                                                <td>
                                                                    <button type="submit" class="btn btn-primary" id="register" (click)="resetMast()">Yes</button> 
                                                                </td>
                                                            </tr>
                                                        </table>
                                                        </div>
                                                        </div>
                                                        </div>
                                                        </div>

                                        <!-- =====================Close Dialog Box====================== -->
                                        <td>
                                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#exampleModalLong">Close</button>
                                        </td>
                                        <!-- Modal -->
                                        <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" style="width: 500px;">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-body">
                                                        <label style="font-size: small; color: black; font-weight: bold; text-align: center; vertical-align: middle;">
                                                            <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -->
                                                    Want&nbsp;to&nbsp;Close.&nbsp;Confirm&nbsp;(Yes/No)?&nbsp;
                                                </label>
                                            </div>
                                                <div class="modal-footer">
                                                    <table class="center">
                                                        <tr>
                                                            <td>
                                                            <button  type="submit" class="btn btn-primary" data-dismiss="modal" id="register"   (click)="closeMast()">Yes</button>
                                                            </td>
                                                            <td>
                                                            <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
                                                            </td>
                                                    </tr>
                                                    </table>
                                                    </div>
                                                    </div>
                                                    </div>
                                                    </div>
                            </ng-template>
                            <!-- --------------------------modal form  start------------------- -->

                            <td>
                                <button type="button"  class="btn btn-primary" 
                                data-toggle="modal" data-target="#exampleModal2" style="width: 8rem;color: black;">
                                Price&nbsp;History</button>
                            </td>

                            <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModal2Label" aria-hidden="true">
                                <div class="modal-dialog modal-lg" role="document">
                                  <div class="modal-content">
                                    
                                    <div class="modal-header">

                                      <h5 class="modal-title" id="exampleModal2Label" style="text-align: center;" >PRICE&nbsp;REVISION&nbsp;HISTORY</h5>
                                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                      </button>
                                    </div>
                                    
                                    <div class="modal-body">
                                        <table class="center" style="width: 100%;">
                                        <tr>
                                            <td style="width: 15%" class="LabelFontStyle">
                                                Price&nbsp;List&nbsp;:&nbsp;
                                            </td>

                                            <td>  
                                                <select formControlName="primaryPriceListId" id="primaryPriceListId" [(ngModel)]="primaryPriceListId" class="form-control">
                                                    <option>--Select--</option>
                                                    <option *ngFor="let sc of  PriceListIdList" [ngValue]="sc.priceListHeaderId" >
                                                        <!-- {{sc.priceListHeaderId}}- -->
                                                        {{sc.priceListName}}
                                                    </option>
                                                </select>
                                            </td>
                                            <td style="width: 15%" class="LabelFontStyle">
                                                Item &nbsp;Number&nbsp;:&nbsp;
                                            </td>

                                            <td>
                                                <input type="text" formControlName="searchItemId"
                                                (keyup)="getInvItemId($event)" id="invItemIdFirstWay"
                                                list="dynmicUserIds1" class="form-control"
                                                (ngModelChange)="onOptioninvItemIdSelectedSingle($event)" >
                                                <datalist id="dynmicUserIds1">
                                                    <option *ngFor="let item of invItemList"
                                                        [ngValue]="item.itemId"> 
                                                    
                                                    </option>
                                                </datalist>
                                            </td> 

                                            <td style="width: 15%" class="LabelFontStyle">Description&nbsp;:&nbsp;</td>
                                            <td>
                                                <input style="width: 250px;" disabled  type="text" formControlName="searchItemName" id="searchItemName"  [(ngModel)]="searchItemName"   class="form-control" placeholder="item description" >
                                            </td>
                                            <td> 
                                                <button style="width: 8em;" type="button" class="btn btn-info" (click)="priceHistory(primaryPriceListId,searchItemId)" >Search</button>
                                            </td>
                                        </tr>
                                        </table>
                                        <!-- -------------------------- -->

                                        <div class="container1">
                                        <div class="grid_scroll_3">
                                        <table class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="font-size: small;  border-color:#959595;border-collapse:collapse;width: 100%;">
                                            <tbody>
                                                    <tr class="GridHeader">
                                                    <th style="width:5rem" scope="col">PL&nbsp;Header&nbsp;Id</th>
                                                    <th style="width:7rem" scope="col"> Price&nbsp;List&nbsp;Name</th>
                                                    <th style="width:5rem" scope="col"> Price&nbsp;List&nbsp;Type</th>
                                                    <th style="width:20rem" scope="col">Item&nbsp; Deescreption</th>
                                                    <th style="width:7rem" scope="col">Rate&nbsp;</th>
                                                    <th style="width:7rem" scope="col">Old&nbsp;Rate</th>
                                                    <th style="width:12rem" scope="col">Revision&nbsp;Date</th>
                                                    <!-- <th style="width:10rem" scope="col">Status</th> -->
                                                    <!-- <th style="width:6rem" scope="col">Select</th> -->
                                                </tr>
                                            </tbody>
                                            <tr *ngFor="let com of lstcomments1" class="ItemStyle" style="text-decoration:none;">
                                                    <td>{{com.priceListHeaderId}}</td>
                                                    <td>{{com.priceListName}}</td>
                                                    <td>{{com.priceListType}}</td>
                                                    <td>{{com.itemId}}-{{searchItemName}}</td>      
                                                    <td style="width:10rem;text-align: right;">{{com.newValue}}</td> 
                                                    <td style="width:10rem;text-align: right;">{{com.oldValue}}</td>
                                                    <!-- <td> this.pipe.transform({{com.lastUpdatedDate}},'dd-MM-y')</td> -->
                                                    <td style="width:10rem;text-align: center;">{{com.lastUpdatedDate | date:'dd-MM-y hh:mm:ss'}}</td>
                                                    <!-- this.pipe.transform(this.now, 'dd-MM-y'); -->
                                                    <!-- <td><button class="btn btn-info" (click)="Select(com.priceListHeaderId)">Select</button></td>    -->
                                            </tr>
                                        </table>
                                        </div>
                                        </div>

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                                        </div>
                                        <!-- -------------------------- -->
                                    </div>

                                  </div>
                                </div>
                            </div>


                            <!-- <td>
                                <button disabled type="button"  class="btn btn-primary"  (click)="plUpload()"
                                data-toggle="modal" data-target="#exampleModal3" style="width: 8rem;color: black;">
                                Price&nbsp;List&nbsp;Upload</button>
                            </td> -->

                            <div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModal3Label" aria-hidden="true" >
                                <div class="modal-dialog modal-lg" role="document">
                                  <div class="modal-content">
                                           <div class="modal-header">

                                            <h5 class="modal-title" id="exampleModal3Label" style="text-align: center;" >Price&nbsp;List&nbsp;Upload</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                            </div>
                                    
                                                <div class="modal-body">
                                                <table class="center" style="width: 100%;">
                                                    <tr>

                                                        <td style="width: 15%" class="LabelFontStyle">Price&nbsp;List&nbsp;:&nbsp; </td>
                                                          
                                                        <td>  
                                                            <select formControlName="upldPricelistName" id="upldPricelistName" [(ngModel)]="upldPricelistName" class="form-control" style="background-color: yellow;">
                                                                <option>--Select--</option>
                                                                <option *ngFor="let sc of  PriceListIdList" [ngValue]="sc.priceListName" >
                                                                    <!-- {{sc.priceListHeaderId}}- -->
                                                                    {{sc.priceListName}}
                                                                </option>
                                                            </select>
                                                        </td>

                                                       
                                                   

                                                   

                                                     <td style="width: 15%" class="LabelFontStyle">Select&nbsp;Upload&nbsp;File(.CSV&nbsp;only):&nbsp; </td>
                                                            
                                                    <td>
                                                        <table>
                                                        <tr>
                                                       <td>
                                                        <input  type="file"  accept=".csv"  #fileInput class="form-control" style="vertical-align: middle;margin-top: 22px;width: 350px;">&nbsp;&nbsp;  
                                                       </td>
                                                             
                                                        <td>
                                                            <button  class="btn btn-primary" (click)="uploadFile();" style="width: 8rem;font-size: 11px;">Upload&nbsp;File</button>
                                                        </td>
                                                        </tr>
                                                        </table>
                                                    </td>
                                                        <!-- <td>
                                                            <button type="submit" class="btn btn-primary" id="register" (click)="refershForm()" style="width: 8rem;font-size: 11px;">View/download log</button>
                                                        </td> -->
                                                    
                                                    </tr>

                                                    <tr>
                                                        <td colspan="10">
                                                        <div class="progress">
                                                            <div class="progress-bar progress-bar-success" role="progressbar"  
                                                              attr.aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100"
                                                            [ngStyle]="{ width: progress + '%' }">
                                                            <!-- style="width:8%; min-width:10px;" -->
                                                            {{ progress }}%
                                                            </div>
                                                          </div>
                                                        </td>
                                                    </tr>
                                                    <tr>

                                                        <td colspan="5">
                                                            {{resMsg}}
                                                        </td>
                                                    </tr>
                                                </table>

                                                    <div class="container1">
                                                        <div class="grid_scroll_3">
                                                          <table class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="font-size:small; border-color:brown;border-collapse:collapse;width: 100%;">
                                                       
                                                           <tbody>
                                                                     <tr class="GridHeader">
                                                                         <th style="width:3rem" scope="col">Srl#</th>
                                                                        <th style="width:10rem" scope="col">Segment</th>
                                                                         <th style="width:20rem" scope="col">Item Descreption</th>
                                                                         <th style="width:15rem" scope="col">Item Category</th>
                                                                         <th style="width:25rem" scope="col">Status</th>

                                                                                                                                                                                         
                                                                 </tr>
                                                             </tbody>
                                                           
                                                                 <tr *ngFor="let com of lstMessage let i= index" class="ItemStyle" style="text-decoration:none;">
                                                                     <td style="text-align: center;">{{i+1}}</td>
                                                                     <td style="width:10rem;text-align: center;">{{com.segment}}</td>
                                                                     <td style="width:15rem;text-align: left;">{{com.itemDescription}}</td>
                                                                     <td style="width:20rem;text-align: left;">{{com.itemCategory}}</td>
                                                                     <td style="width:20rem;text-align: left;">{{com.status}}</td>
                                                                 </tr>
                                                         </table>
                                                       </div>
                                                     </div>

                                                        <!-- <td>
                                                            <input type="submit"  value="Submit">
                                                        </td> -->

                                                        <!-- <td>
                                                            <button type="button" class="btn btn-info" (click)="uploadFile()" >Upload</button>
                                                        </td> -->
                                                     
                                                    
                                               


                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                                                </div>
                                    </div>
                                  </div>
                                </div>
                            </div>

                            <!-- --------------------------modal form  end------------------- -->
                    </tr>
                 </table>

                    <!-- ============================= -->
             </form>
           </div>
        </div>
    </div>
</div>

<!-- /////////////////////////////////////////////////////////////////////////////////////////////// -->
<!-- ===========================Search/ display area============================================ -->
<br>
<div class="container1">
    <div class="grid_scroll">
    <table class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="border-color:#959595;border-collapse:collapse;width: 100%;">
        <tbody>
                <tr class="GridHeader">
                <th style="width:5rem" scope="col">Srl&nbsp;No</th>
                <!-- <th style="width:5rem" scope="col">PL&nbsp;Header&nbsp;Id</th> -->
                <th style="width:10rem" scope="col"> Price&nbsp;List&nbsp;Name</th>
                <!-- <th style="width:10rem" scope="col">Price&nbsp;List&nbsp;Description</th> -->
                <th style="width:6rem" scope="col">PL&nbsp;Type</th>
                <th style="width:10rem" scope="col">Operating&nbsp;Unit</th>
                <th style="width:10rem" scope="col">Division&nbsp;</th>
                <th style="width:12rem" scope="col">Start&nbsp;Date</th>
                <th style="width:10rem" scope="col">Status</th>
                <th style="width:6rem" scope="col">Select</th>
                <th style="width:6rem" scope="col">ExportToExcel</th>
            </tr>
        </tbody>
        <tr *ngFor="let com of lstcomments let i=index" class="ItemStyle" style="text-decoration:none;">
               
                <td style="text-align: center;">{{i+1}}</td>
                <!-- <td>{{com.priceListHeaderId}}</td> -->
                <td>{{com.priceListName}}</td>
                <!-- <td>{{com.description}}</td>    -->
                <td>{{com.priceListType}}</td>   
                <td>{{com.ouName}}</td> 
                <td>{{com.divisionName}}</td> 
                <td style="text-align: center;">{{com.startDate |date:'dd-MM-y'}}</td>
                <td style="text-align: center;">{{com.status}}</td>
                <td style="text-align: center;"><button class="btn btn-info" (click)="SelectPL(com.priceListHeaderId)">Select</button></td> 
                <td style="text-align: center;"><button class="btn btn-info" (click)="exportToExcel(com.priceListHeaderId)">Download</button></td>    
        </tr>
    </table>
</div>

<!-- ------------------------------------------- -->
<div class="modal fade" id="PlDescSearch" tabindex="-1" role="dialog" aria-labelledby="PlDescSearchLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        
        <div class="modal-header">

          <h5 class="modal-title" id="PlDescSearchLabel" style="text-align: center;" >ITEM&nbsp;LIST&nbsp;</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        
        <div class="modal-body">
        <!-- -------------------------- -->
        <div class="container1">
            <div class="grid_scroll_3">
            <table class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="font-size:small; border-color:brown;border-collapse:collapse;width: 100%;">
          
                     <tbody>
                        <tr class="GridHeader">
                     
                        <th style="width:3rem" scope="col"> Srl&nbsp;</th>
                        <th style="width:10rem"  scope="col">Item&nbsp;Number</th>
                        <th style="width:8rem"   scope="col">Description&nbsp;</th>
                        <th style="width:8rem"   scope="col">Category&nbsp;</th>
                         <th style="width:3rem"  scope="col">UOM&nbsp;</th>
                         <th style="width:6rem"  scope="col">Select</th>
                       </tr>
                    </tbody>
                  <tr *ngFor="let com of lstcomments1 let i=index" class="ItemStyle" style="text-decoration:none;">
                        <td style="width:3rem;text-align: center;">{{i+1}}</td>
                        <td style="width:10rem;text-align: left;">{{com.segment}}</td>
                        <td style="width:30rem;text-align: left;">{{com.description}}</td>
                        <td style="width:8rem;text-align: center;">{{com.itemCategory}}</td>      
                        <td style="width:8rem;text-align: center;">{{com.uom}}</td> 
                        <td><button class="btn btn-secondary" (click)="F9SearchItemCodeNew(com.segment)">Select</button></td>   
                      
                       </tr>
            </table>
            </div>
            </div>
            <br>

           <table> <tr> <td></td> <td>Item Selected : </td> <td style="font-weight: bold;"> {{this.selectItemName}} </td> </tr>  </table>

            <div class="modal-footer">
                <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
            </div>
            <!-- -------------------------- -->
        </div>

      </div>
    </div>
</div>


<div class="modal fade" id="showpListData" tabindex="-1" role="dialog" aria-labelledby="showpListDataLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        
        <div class="modal-header">

          <h5 class="modal-title" id="showpListDataLabel" style="text-align: center;" >Price&nbsp;List&nbsp;Items - {{this.priceListName}}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        
        <div class="modal-body">
        <!-- -------------------------- -->
        <div class="container1">
            <div class="grid_scroll_3">
            <table class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="font-size:small; border-color:brown;border-collapse:collapse;width: 100%;">
          
                     <tbody>
                        <tr class="GridHeader">
                     
                            <th style="width:4rem" scope="col">Srl No.</th>
                            <th style="width:15rem" scope="col">Item Code</th>
                            <th style="width:20rem" scope="col">Item Description</th>
                            <th style="width:6rem" scope="col">Item Category</th>
                            <th style="width:3rem" scope="col">UOM</th>
                            <th style="width:6rem" scope="col">Batch Code</th>
                            <th style="width:6rem" scope="col">Price</th>

                       </tr>
                    </tbody>
                  <tr *ngFor="let com of priceListLineDetails1 let i=index" class="ItemStyle" style="text-decoration:none;">
                        <td style="width:3rem;text-align: center;">{{i+1}}</td>
                        <td style="width:10rem;text-align: left;">{{com.segment}}</td>
                        <td style="width:20rem;text-align: left;">{{com.itemDescription}}</td>
                        <td style="width:10rem;text-align: center;">{{com.itemCategory}}</td>      
                        <td style="width:8rem;text-align: center;">{{com.uom}}</td> 
                        <td style="width:8rem;text-align: center;">{{com.batchCode}}</td>      
                        <td style="width:8rem;text-align: right;">{{com.priceValue}}</td> 

                        <!-- <td><button class="btn btn-secondary" (click)="F9SearchItemCode(com.segment)">Select</button></td>    -->
                      
                       </tr>
            </table>
            </div>
            </div>
            <br>

           <!-- <table> <tr> <td></td> <td>Item Selected : </td> <td style="font-weight: bold;"> {{this.selectItemName}} </td> </tr>  </table> -->

            <div class="modal-footer">
                <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
            </div>
            <!-- -------------------------- -->
        </div>

      </div>
    </div>
</div>

