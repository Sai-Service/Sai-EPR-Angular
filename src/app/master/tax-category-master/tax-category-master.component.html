<form [formGroup]="taxCategoryMasterForm" (ngSubmit)="taxCategoryMaster(taxCategoryMasterForm.value)">
    <table style="width: 100%;background-color: white;">
        <tr>
            <td colspan="4" class="PageHeader" style="width: 100%;">
                &nbsp;&nbsp;Tax&nbsp;Category&nbsp;Master&nbsp;
            </td>
        </tr>
    </table>
    <div class="center">
        <fieldset class="RFS">
            <legend id="FormsPH_LGAadhaar" class="RFSL" style="font-size: 10px;color: black;">Header Details</legend>
            <table style="width: 100%;">
                <tr>
                    <td style="width: 15%" class="LabelFontStyle1">
                        Operating&nbsp;Unit&nbsp;:&nbsp;
                    </td>
                    <td>
                        <select formControlName="ouId" id="ouId" class="form-control">
                            <option>--Select--</option>
                            <option *ngFor="let sc of  OUIdList" [ngValue]="sc.ouId">
                                {{sc.ouName}}
                            </option>
                        </select>
                        <div *ngIf="submitted && f. ouId.errors" class="invalid-feedback">
                            <div *ngIf="f.ouId.errors.required">OU Id is required</div>
                            <span
                                *ngIf="!taxCategoryMasterForm.get('ouId').valid && taxCategoryMasterForm.get('ouId').touched">Please
                                Enter valid Operating Unit </span>
                        </div>
                    </td>
                    <td style="width: 15%" class="LabelFontStyle1">
                        &nbsp;Tax&nbsp;Category&nbsp;:&nbsp;
                    </td>
                    <td>
                        <input type="text" formControlName="taxCategoryName" class="form-control"
                            placeholder="Enter tax Category name">
                        <span
                            *ngIf="!taxCategoryMasterForm.get('taxCategoryName').valid && taxCategoryMasterForm.get('taxCategoryName').touched">Please
                            Enter tax Category name </span>
                    </td>
                    <td style="width: 15%" class="LabelFontStyle1">
                        Description&nbsp;:&nbsp;
                    </td>
                    <td colspan="3">
                        <input type="text" formControlName="taxCategoryDesc" class="form-control"
                            placeholder="Enter tax category desc" style="width: 100%;">
                        <span
                            *ngIf="!taxCategoryMasterForm.get('taxCategoryDesc').valid && taxCategoryMasterForm.get('taxCategoryDesc').touched">Please
                            Enter tax category desc </span>
                    </td>
                </tr>
                <tr>
                   
                    <td style="width: 15%" class="LabelFontStyle1">
                        GST&nbsp;Percentage&nbsp;:&nbsp;
                    </td>
                    <td>
                        <input type="text" formControlName="itemClassCode" class="form-control"
                            placeholder="Enter item class code">
                        <span
                            *ngIf="!taxCategoryMasterForm.get('itemClassCode').valid && taxCategoryMasterForm.get('itemClassCode').touched">Please
                            Enter item class code </span>

                    </td>
                    <td style="width: 15%" class="LabelFontStyle1">
                        &nbsp;Tax&nbsp;category&nbsp;type&nbsp;:&nbsp;
                    </td>
                    <td>
                        <input type="text" formControlName="recordTypeCode" class="form-control"
                            placeholder="Enter record type code">
                        <span
                            *ngIf="!taxCategoryMasterForm.get('recordTypeCode').valid && taxCategoryMasterForm.get('recordTypeCode').touched">Please
                            Enter record type code </span>

                    </td>
                    <td style="width: 15%" class="LabelFontStyle1">
                        Start&nbsp;Date&nbsp;:&nbsp;
                    </td>
                    <td>
                        <input disabled type="text" class="form-control" formControlName="startDate"
                                    value={{startDate}} [ngModel]="startDate | date:'yyyy-MM-dd'"
                                    style="width: 170px;">
                    </td>
                    <td style="width: 15%" class="LabelFontStyle1">
                        End&nbsp;Date&nbsp;:&nbsp;
                    </td>
                    <td>
                        <input  type="date" formControlName="endDate"  value={{endDate}} [ngModel]="endDate" class="form-control"
                        min="{{minDate | date:'yyyy-MM-dd'}}"    placeholder="Enter record type code">
                    </td>
                </tr>
              
            </table>
        </fieldset>
        <br>
        <!-- <fieldset class="RFS">
            <legend id="FormsPH_LGAadhaar" class="RFSL" style="font-size: 10px;color: black;">Line Details</legend> -->
            <div class="grid_scroll">
                <!-- <table class="GridFont" cellspacing="0" cellpadding="4" border="0"
                    style="width:100%;border-collapse:collapse;"> -->
                    <table style="width: 100%; border: solid 1px Gray" class="auto-style4"
                                                          cellspacing="0" cellpadding="4" rules="all" class="center">
                    <thead>
                        <tr class="GridHeader">
                            <th scope="col">SL. NO.</th>
                            <th scope="col">Tax Rate Name
                            </th>
                            <th scope="col">Tax Type</th>
                            <th scope="col">Tax Point Basis
                            </th>
                            <th scope="col">
                                <table style="width: 100%;">
                                    <tr style="border-bottom: solid 1px Gray;">
                                        <td colspan="10" style="text-align: center;">
                                            Precedence</td>
                                    </tr>
                                    <tr>
                                        <td style="width: 2rem; border-right: solid 1px Gray;">
                                            1</td>
                                        <td style="width: 2rem; border-right: solid 1px Gray;">
                                            2</td>
                                        <td style="width: 2rem; border-right: solid 1px Gray;">
                                            3</td>
                                        <td style="width: 2rem; border-right: solid 1px Gray;">
                                            4</td>
                                        <td style="width: 2rem; border-right: solid 1px Gray;">
                                            5</td>
                                        <td style="width: 2rem; border-right: solid 1px Gray;">
                                            6</td>
                                        <td style="width: 2rem; border-right: solid 1px Gray;">
                                            7</td>
                                        <td style="width: 2rem; border-right: solid 1px Gray;">
                                            8</td>
                                        <td style="width: 2rem; border-right: solid 1px Gray;">
                                            9</td>
                                        <td style="width: 2rem;">
                                            10</td>
                                    </tr>
                                </table>
                            </th>
                            <th scope="col">Currency</th>
                            <th scope="col">Tax Rate</th>
                            <th scope="col">Tax Amount</th>
                            <th scope="col">Recoverable
                                <!-- Amount -->
                            </th>
                            <th scope="col">Inclusive</th>
                            <th scope="col">Self
                                Assesed/Reverse
                                Charge
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <ng-container class="center" formArrayName="taxLines">
                            <!-- <ng-container   *ngFor="let group of invLineDetailsArray().controls; let k= index" [formGroupName]="k" class="auto-style5">     -->
                            <ng-container *ngFor="let taxDet of TaxDetailsArray().controls; let j= index"
                                [formGroupName]="j" class="auto-style5">
                                <tr class="ItemStyle" style="text-decoration:none;">
                                    <td> <input  formControlName="lineNumber" class="form-control"
                                            style="width: 2rem;height: 25px;font-size: 10px;">
                                    </td>
                                    <td> <input type="text" style="width: 9rem;height: 25px;font-size: 10px;"
                                            formControlName="taxRateName" class="form-control">
                                    </td>
                                    <td> <input  type="text" style="width: 6rem;height: 25px;font-size: 10px;"
                                            formControlName="taxTypeName" class="form-control">
                                    </td>
                                    <td> <input  type="text" formControlName="taxPointBasis"
                                            class="form-control"
                                            style="width: 5rem; text-align: center;margin-left: 6px; height: 25px;font-size: 10px;">
                                    </td>
                                    <td>
                                        <table style="width: 100%;">
                                            <tr>
                                                <td style=" border-right: solid 1px Gray;">
                                                    <input  formControlName="precedence1" class="form-control"
                                                        style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                </td>
                                                <td style=" border-right: solid 1px Gray;">
                                                    <input  formControlName="precedence2" class="form-control"
                                                        style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                </td>
                                                <td style=" border-right: solid 1px Gray;">
                                                    <input  formControlName="precedence3" class="form-control"
                                                        style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                </td>
                                                <td style=" border-right: solid 1px Gray;">
                                                    <input  formControlName="precedence4" class="form-control"
                                                        style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                </td>
                                                <td style=" border-right: solid 1px Gray;">
                                                    <input  formControlName="precedence5" class="form-control"
                                                        style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                </td>
                                                <td style=" border-right: solid 1px Gray;">
                                                    <input  formControlName="precedence6" class="form-control"
                                                        style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                </td>
                                                <td style=" border-right: solid 1px Gray;">
                                                    <input  formControlName="precedence7" class="form-control"
                                                        style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                </td>
                                                <td style=" border-right: solid 1px Gray;">
                                                    <input  formControlName="precedence8" class="form-control"
                                                        style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                </td>
                                                <td style=" border-right: solid 1px Gray;">
                                                    <input  formControlName="precedence9"
                                                        style="width: 2rem; text-align: right; height: 25px;font-size: 10px;"
                                                        class="form-control">
                                                </td>
                                                <td> <input  formControlName="precedence10" class="form-control"
                                                        style="width: 2rem; text-align: right; height: 25px;font-size: 10px;">
                                                </td>
                                            </tr>
                                        </table>
                                    </td>

                                    <td> <input  type="text" formControlName="currencyCode"
                                            style="width: 3rem; height: 25px;font-size: 10px;" class="form-control">
                                    </td>
                                    <td> <input  formControlName="totTaxPer"
                                            style="width: 2rem; text-align: right; height: 25px;font-size: 10px;"
                                            class="form-control">
                                    </td>
                                    <div
                                        *ngIf="taxCategoryMasterForm.controls['taxLines'].controls[j].controls.totTaxPer.value === 0; then thenBlock; else elseBlock">
                                    </div>
                                    <ng-template #thenBlock>
                                        <td><input type="number" formControlName="totTaxAmt" (change)="validateNum(i,j)"
                                                class="form-control"
                                                style="width: 4rem; text-align: right; height: 25px;font-size: 10px;"
                                                class="form-control">
                                        </td>
                                    </ng-template>
                                    <ng-template #elseBlock>
                                        <td><input  type="number" formControlName="totTaxAmt"
                                                class="form-control"
                                                style="width: 4rem; text-align: right; height: 25px;font-size: 10px;">
                                        </td>
                                    </ng-template>

                                    <div
                                        *ngIf="taxCategoryMasterForm.controls['taxLines'].controls[j].controls.recoverableFlag.value === 'Y'; then thenBlockRecFlag; else elseBlockRecFlag">
                                    </div>
                                    <ng-template #thenBlockRecFlag>
                                        <td><input type="checkbox"  name="recoverableFlag"
                                                value="recoverableFlag" checked>
                                        </td>
                                    </ng-template>
                                    <ng-template #elseBlockRecFlag>
                                        <td><input type="checkbox"  name="recoverableFlag"
                                                value="recoverableFlag">
                                        </td>
                                    </ng-template>
                                    <div
                                        *ngIf="taxCategoryMasterForm.controls['taxLines'].controls[j].controls.inclusiveFlag.value === 'Y'; then thenBlockInclFlag; else elseBlockInclFlag">
                                    </div>
                                    <ng-template #thenBlockInclFlag>
                                        <td><input type="checkbox"  name="inclusiveFlag" value="inclusiveFlag"
                                                checked></td>
                                    </ng-template>
                                    <ng-template #elseBlockInclFlag>
                                        <td><input type="checkbox"  name="inclusiveFlag" value="inclusiveFlag">
                                        </td>
                                    </ng-template>
                                    <div
                                        *ngIf="taxCategoryMasterForm.controls['taxLines'].controls[j].controls.selfAssesedFlag.value === 'Y'; then thenBlockselfAssFlag; else elseBlockselfAssFlag">
                                    </div>
                                    <ng-template #thenBlockselfAssFlag>
                                        <td><input type="checkbox"  name="selfAssesedFlag"
                                                value="selfAssesedFlag" checked>
                                        </td>
                                    </ng-template>
                                    <ng-template #elseBlockselfAssFlag>
                                        <td><input type="checkbox"  name="selfAssesedFlag"
                                                value="selfAssesedFlag">
                                        </td>
                                    </ng-template>
                                </tr>
                                <tr>
                                    <input hidden type="text" formControlName="invLineItemId"
                                        style="width: 4rem; text-align: right; height: 25px;font-size: 10px;">
                                    <input hidden type="text" class="form-control" formControlName="invLineNo"
                                        style="width: 4rem; text-align: right; height: 25px;font-size: 10px;">

                                </tr>
                            </ng-container>
                        </ng-container>
                    </tbody>

                </table>
            </div>
        <!-- </fieldset> -->
        <table style="width: 100%; background-color: #FFE4B5;">
            <tr>
                <td style="width: 15%" class="LabelFontStyle1">Category&nbsp;Type&nbsp;:</td> 
                <td>
                    <select formControlName="cateType" id="cateType" class="form-control"
                            [ngModel]="cateType" (ngModelChange)='onOptionsSelectedTaxCategory($event)'>
                                <option>--Select--</option>
                                <option value="SALES">SALES</option>
                                <option value="Purchase">Purchase</option>
                            </select>
                </td>
                <td style="width: 15%" class="LabelFontStyle1">Category&nbsp;Name&nbsp;:</td> 
                <td>
                    <select formControlName="taxCategoryName" id="taxCategoryName" class="form-control"
                    style="width: 170px;" (ngModelChange)="searchCategoryDataMast1($event)">
                    <option>--Select--</option>
                    <option *ngFor="let cc of taxCategoryNameList" >
                        {{cc.taxCategoryName}}
                    </option>
                </select>
                <input hidden type="number" class="form-control" formControlName="taxCategoryId" [ngModel]="taxCategoryId">
                </td>
                <td>
                    <button type="button" class="btn-primary" (click)="searchCategoryDataMast1(taxCategoryId)"><i class="fa fa-search"
                        aria-hidden="true"></i></button>
                </td>
                <td style="width: 15%"></td><td style="width: 15%"></td><td style="width: 15%"></td>
                <td style="width: 15%"></td>
            </tr>
        </table>
        <table style="width: 100%; border: solid 1px Gray" class="auto-style4"
        cellspacing="0" cellpadding="4" rules="all" class="center">
<thead>
<tr class="GridHeader">
<th scope="col">Tax Category Type</th>
<th scope="col">Tax Category Name</th>
<th scope="col">Tax Category Desc</th>
<th scope="col">Item Class Code</th>
<th scope="col">Start Date </th>
<th scope="col">
    <table style="width: 100%;">
        <tr style="border-bottom: solid 1px Gray;">
            <td colspan="10" style="text-align: center;">
                Precedence</td>
        </tr>
        <tr>
            <td style="width: 2rem; border-right: solid 1px Gray;">
                1</td>
            <td style="width: 2rem; border-right: solid 1px Gray;">
                2</td>
            <td style="width: 2rem; border-right: solid 1px Gray;">
                3</td>
            <td style="width: 2rem; border-right: solid 1px Gray;">
                4</td>
            <td style="width: 2rem; border-right: solid 1px Gray;">
                5</td>
            <td style="width: 2rem; border-right: solid 1px Gray;">
                6</td>
            <td style="width: 2rem; border-right: solid 1px Gray;">
                7</td>
            <td style="width: 2rem; border-right: solid 1px Gray;">
                8</td>
            <td style="width: 2rem; border-right: solid 1px Gray;">
                9</td>
            <td style="width: 2rem;">
                10</td>
        </tr>
    </table>
</th>
</tr>
</thead>
<tbody>
    <tr class="ItemStyle" style="text-decoration:none;" *ngFor="let com of getsearchCategoryData">
        <td>{{com.taxCatType}}</td>
        <td>{{com.taxCategoryName}}</td>
        <td>{{com.taxCategoryDesc}}</td>
        <td>{{com.itemClassCode}}</td>
        <td>{{com.startDate}}</td>
    </tr>
</tbody>
        </table>
    </div>
</form>