
    <form [formGroup]="jobcardForm" (ngSubmit)="jobcard(jobcardForm.value)">
    
        <div class="center">
        <table style="width: 100%;background-color: white;">
            <tr>
                <td class="PageHeader" style="width: 100%;">
                    &nbsp;&nbsp;JOBCARD&nbsp;OPENING
                </td>

                <td>
                    <table>
                        <tr>
                               <td colspan="2" style="width: 100%;text-align: center;margin-left: 10px;">
                                <button class="btn btn-info" data-toggle="modal" data-target="#jobCardSearch" (click)='LoadSearchForm()'
                                    style="text-align: center; font-size: small;font-weight: bolder; margin-right: 90%;">Find</button>
                            </td>

                        </tr>
                    </table>
                </td>



            </tr>
        </table>

                <!-- <fieldset class="RFS">
                <table class="center" style="width: 100%;background-color: #FFE4B5;">
                        <tr>
           
                        <td  style="background-color: #FFE4B5;" class="LabelFontStyle" >&nbsp;JC&nbsp;Number&nbsp;:&nbsp;</td>
                   
                        <td>
                            <input type="text" formControlName="jobCardNum" [(ngModel)]="jobCardNum"
                                class="form-control" #myinput>
                        </td>

                        <td  style="background-color: #FFE4B5;" class="LabelFontStyle">&nbsp;Opened&nbsp;&nbsp;Date:&nbsp;</td>
                        
                        <td style="background-color: #FFE4B5;">
                            <input type="date" class="form-control" formControlName="jobCardDate" [(ngModel)]='jobCardDate'
                                value={{jobCardDate}}  >
                        </td>

                        <td  style="background-color: #FFE4B5;" class="LabelFontStyle">&nbsp;Reg&nbsp;&nbsp;Number:&nbsp;</td>
                        
                        <td style="background-color: #FFE4B5;">
                            <input type="text" class="form-control" formControlName="regNo" [(ngModel)]='regNo'
                                value={{regNo}} >
                        </td>

                        <td  style="background-color: #FFE4B5;" class="LabelFontStyle">&nbsp;JC&nbsp;&nbsp;Status:&nbsp;</td>
                        <td>
                            <select formControlName="jobStatus" id="jobStatus" class="form-control"    >
                            <option value="Opened">Opened</option>
                            <option value="Ready for Invoice">Ready for Invoice</option>
                            <option value="Invoiced">Invoiced</option>
                            <option value="Closed">Closed</option>
                            </select>
                        </td>

                        <td> <button type="button" class="btn btn-primary" (click)="Search(jobCardNum)" >Find</button> </td> 
                       
                       
                        </tr>
                       
            </table>

            </fieldset> -->



        <div class="center" style="width: 100%;">
            <div class="form-bg">
                <div class="center" style="width: 100%;">
                    <!-- <form [formGroup]="jobcardForm" (ngSubmit)="jobcard(jobcardForm.value)"> -->
                    <div id="Panel1" class="auto-style103">
                        <table class="center">
                            <section class="mx-2 pb-3">
                                <ul class="nav nav-tabs md-tabs" id="myTabMD" role="tablist">

                                    <li class="nav-item waves-effect waves-light">
                                        <a class="nav-link active" id="home-tab-md" data-toggle="tab" href="#home-md"
                                            role="tab" aria-controls="home-md" aria-selected="true">Job Card Opening</a>
                                    </li>
                                    <div *ngIf="displaylabMatTab; then thenBlocklabMatTab; else elseBlocklabMatTab">
                                    </div>
                                    <ng-template #thenBlocklabMatTab>

                                    </ng-template>
                                    <ng-template #elseBlocklabMatTab>
                                        <li class="nav-item waves-effect waves-light">
                                            <a class="nav-link" id="profile-tab-md" data-toggle="tab" href="#profile-md"
                                                role="tab" aria-controls="profile-md" aria-selected="false">Labour
                                                Details
                                            </a>
                                        </li>
                                        <li class="nav-item waves-effect waves-light">
                                            <a class="nav-link" id="contact-tab-md" data-toggle="tab" href="#contact-md"
                                                role="tab" aria-controls="contact-md" aria-selected="false" (click)="LoadMatLines(jobCardNum)"  >Part
                                                Details</a>
                                        </li>
                                    </ng-template>
                                    <div *ngIf="displaybilling; then thenBlockbilling; else elseBlockbilling"></div>
                                    <ng-template #thenBlockbilling>

                                    </ng-template>
                                    <ng-template #elseBlockbilling>
                                        <li class="nav-item waves-effect waves-light">
                                            <a class="nav-link" id="billing-tab-md" data-toggle="tab" href="#billing-md"
                                                role="tab" aria-controls="contact-md" aria-selected="false">Billing
                                                Details</a>
                                        </li>
                                    </ng-template>

                                </ul>
                                <div style="border: 0px;" class="tab-content card " id="myTabContentMD">
                                    <div class="tab-pane fade show active" id="home-md" role="tabpanel"
                                        aria-labelledby="home-tab-md">
                                        <div class="center" style="width: 100%;">
                                            <div class="form-bg">
                                                <div class="center">
                                                    <div id="Panel1" class="auto-style103">
                                                        <div class="center">
                                                            <div class="container1">
                                                                <table style="width: 100%" class="center">
                                                                    <fieldset class="RFS">
                                                                        <legend id="FormsPH_LGAadhaar" class="RFSL"
                                                                            style="font-size: 10px;color: black;">
                                                                            <b>Job&nbsp;Card&nbsp;Details&nbsp;</b>
                                                                        </legend>
                                                                        <tr>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Job&nbsp;Card&nbsp;No&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" disabled
                                                                                    class="form-control"
                                                                                    [(ngModel)]="jobCardNum"
                                                                                    formControlName="jobCardNum"
                                                                                    placeholder="">
                                                                                <input type="text" hidden
                                                                                    formControlName="jobCardId">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Job&nbsp;Card&nbsp;Date&nbsp;:</td>
                                                                            <td>
                                                                                <!-- type="date" /// com JyotiK-->
                                                                                <input  disabled  
                                                                                    class="form-control" placeholder=""
                                                                                    [(ngModel)]="jobCardDate"
                                                                                    formControlName="jobCardDate"  >
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Job&nbsp;Card&nbsp;Status&nbsp;:</td>
                                                                            <td>
                                                                                    <input type="text" disabled
                                                                                    class="form-control" placeholder=""
                                                                                   formControlName="jobStatus" [(ngModel)]="jobStatus">
                                                                                <!-- <select formControlName="jobStatus"
                                                                                    name="jobStatus" id="jobStatus"
                                                                                    class="form-control"
                                                                                    [(ngModel)]="jobStatus">
                                                                                    <option disabled>--Select--</option>
                                                                                    <option
                                                                                        *ngFor="let sc of  jobCarStatusList"
                                                                                        [value]="sc.code" >
                                                                                        {{sc.code}}
                                                                                    </option>
                                                                                </select> -->
                                                                            </td>

                                                                            <td style="width: 15%" class="LabelFontStyle">
                                                                                Invoice&nbsp;Number&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" disabled class="form-control"
                                                                                formControlName="arInvNum"  value="{{arInvNum}}">
                    
                                                                            </td>

                                                                        </tr>
                                                                        <tr>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                DMS&nbsp;JC&nbsp;No&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" 
                                                                                    class="form-control"
                                                                                    formControlName="dmsJcNo"
                                                                                    placeholder="">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                DMS&nbsp;JC&nbsp;Date&nbsp;:</td>
                                                                            <td>
                                                                                <input type="date" 
                                                                                    class="form-control"
                                                                                    formControlName="dmsJCDate"
                                                                                    placeholder="">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Owner&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" disabled
                                                                                    class="form-control"
                                                                                    [(ngModel)]="owner"
                                                                                    formControlName="owner"
                                                                                    placeholder="">
                                                                            </td>

                                                                            
                                                                            <td style="width: 15%" class="LabelFontStyle">
                                                                                Parts&nbsp;Issue&nbsp;Status&nbsp;:
                                                                            </td>
                                                                            <td>
                                                                                <!-- [(ngModel)]="matStatus" -->
                                                                                <!-- <input type="text" class="form-control" placeholder="" formControlName="matStatus"> -->
                                                                                <select formControlName="matStatus"
                                                                                    id="matStatus"  class="form-control">
                                                                                    <option>--Select--</option>
                                                                                    <option
                                                                                        *ngFor="let sc of  matStatusList" [selected]="sc.cmnTypeId===1" [value]="sc.code">
                                                                                        {{sc.code}}
                                                                                    </option>
                                                                                </select>
                                                                            </td>
                                                                        </tr>
                                                                    </fieldset>
                                                                    <div *ngIf="dispfreezeDetail; then thenBlockOpen; else elseBlockFreeze">
                                                                        </div>
                                                                        <ng-template #thenBlockOpen>
                                                                    <fieldset class="RFS">
                                                                        <legend id="FormsPH_LGAadhaar" class="RFSL"
                                                                            style="font-size: 10px;color: black;">
                                                                            <b>Vehicle&nbsp;Details&nbsp;</b>
                                                                        </legend>
                                                                        <tr>
                                                                            <td style="width: 15%"
                                                                            class="LabelFontStyle">JC Type&nbsp;:
                                                                        </td>
                                                                            <td>
                                                                                <input type="text" hidden
                                                                                    class="form-control" placeholder=""
                                                                                    [(ngModel)]="divisionId"
                                                                                    formControlName="divisionId">
                                                                             
                                                                                <select formControlName="jcType" style="background-color: yellow;"
                                                                                    id="jcType" class="form-control" (ngModelChange)='onOptionBillableSelected($event,"New")'>
                                                                                    <option>--Select--</option>
                                                                                    <option
                                                                                        *ngFor="let sc of  jcTypeList">
                                                                                        {{sc.model}}
                                                                                    </option>
                                                                                </select>
                                                                               
                                                                            </td>

                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle1">
                                                                                Registration&nbsp;No&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" style="text-transform: uppercase;background-color: yellow;"
                                                                                    formControlName="regNo"
                                                                                    [(ngModel)]="regNo"
                                                                                    (change)="serchByRegNo(regNo)"
                                                                                    (keyup)="getUserIdsFirstWay($event)"
                                                                                    id="userIdFirstWay"
                                                                                    list="dynmicUserIds"
                                                                                    class="form-control" />
                                                                                <datalist id="dynmicUserIds">
                                                                                    <option
                                                                                        *ngFor="let item of RegNoList1"
                                                                                        [ngValue]="item.regNo">
                                                                                        {{item.regNo}}</option>
                                                                                </datalist>
                                                                                <!-- <select  formControlName="RegNo" id="RegNo"  (ngModelChange)="serchByRegNo($event)"
                                                                            class="form-control">
                                                                            <option>--Select--</option>
                                                                            <option *ngFor="let sc of  RegNoList1" >
                                                                                {{sc.srvAdvisorName}}
                                                                            </option>
                                                                        </select> -->
                                                                                <input type="text" hidden
                                                                                    formControlName="itemId">
                                                                                <input type="text" hidden
                                                                                    formControlName="customerSiteId">
                                                                                <input type="number" min="0"  hidden
                                                                                    formControlName="ouId">
                                                                                <input type="number" min="0"  hidden
                                                                                    formControlName="deptId">
                                                                                <input type="number" min="0"  hidden
                                                                                    formControlName="locId">
                                                                                <input type="text" hidden
                                                                                    formControlName="customerId">
                                                                                <input type="number" min="0"  hidden
                                                                                    formControlName="emplId" value={{emplId}}>
                                                                                    <input type="number" min="0"  hidden
                                                                                    formControlName="deptName">
                                                                                    <input type="number" min="0"  hidden
                                                                                    formControlName="serviceModel">
                                                                            </td>

                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle1">
                                                                                Vehicle&nbsp;ID&nbsp;(VIN)&nbsp;:</td>
                                                                            <td>
                                                                                <input disabled type="text" class="form-control"
                                                                                    placeholder=""
                                                                                    formControlName="vin">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle1">
                                                                                OMR&nbsp;/Current&nbsp;KMS&nbsp;:</td>
                                                                            <td>
                                                                                <input type="number" min="0" style="background-color: yellow;"
                                                                                    class="form-control" placeholder=""
                                                                                    formControlName="lastRunKms" (change)="validateKm($event)">
                                                                            </td>
                                                                          
                                                                           
                                                                        </tr>

                                                                       
                                                                        <tr>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle1">
                                                                                Service&nbsp;Type&nbsp;:</td>
                                                                            <td>

                                                                                <!-- <input type="text" class="form-control" placeholder="" formControlName="srTypeId"> -->
                                                                                <select formControlName="srTypeId" style="background-color: yellow;"
                                                                                    id="srTypeId"
                                                                                    (ngModelChange)="onOptionsSelectedsrTypeId($event)"
                                                                                    class="form-control">
                                                                                    <option>--Select--</option>
                                                                                    <option
                                                                                        *ngFor="let sc of  srTypeIdList"
                                                                                        [ngValue]="sc.srTypeId">
                                                                                        {{sc.srTypeId}}-{{sc.srTypeName}}-{{sc.description}}
                                                                                    </option>
                                                                                </select>
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle1">
                                                                                Sub&nbsp;Service&nbsp;Type&nbsp;:</td>
                                                                            <td>
                                                                                <!-- <input type="text" class="form-control" placeholder=""> -->
                                                                                <select formControlName="subTypeId" style="background-color: yellow;"
                                                                                    id="subTypeId" class="form-control">
                                                                                    <option>--Select--</option>
                                                                                    <option
                                                                                        *ngFor="let sc of  SubSrTypeIdList"
                                                                                        [ngValue]="sc.subTypeId">
                                                                                        {{sc.subTypeName}}-{{sc.description}}
                                                                                    </option>
                                                                                </select>
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle1">
                                                                                Service&nbsp;Advisor&nbsp;:</td>
                                                                            <td>
                                                                                <!-- (ngModelChange)='onOptionsrvAdvisorSelected($event)' -->
                                                                                <!-- <input type="text" class="form-control" placeholder="" formControlName="srvAdvisor"> -->
                                                                                <!-- (ngModelChange)='onOptionsrvAdvisorSelected($event)' commited  -->
                                                                                <select formControlName="srvAdvisor" style="background-color: yellow;"
                                                                                   
                                                                                    id="srvAdvisor"
                                                                                    class="form-control">
                                                                                    <option>--Select--</option>
                                                                                    <option
                                                                                        *ngFor="let sc of  srvAdvisorList"
                                                                                        [ngValue]="sc.srvAdvisor">
                                                                                        {{sc.srvAdvisorName}}
                                                                                    </option>
                                                                                </select>
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle1">Group&nbsp;:
                                                                            </td>
                                                                            <td>
                                                                                <!-- <input type="text" class="form-control" placeholder="" formControlName="groupId">
                                                                            <input type="text" class="form-control" placeholder="" formControlName="groupName"> -->
                                                                                <select formControlName="groupId" [(ngModel)]="groupId"  style="background-color: yellow;"
                                                                                    id="groupId" class="form-control">
                                                                                    <option>--Select--</option>
                                                                                    <option
                                                                                        *ngFor="let sc of  groupIdList"
                                                                                        [ngValue]="sc.teamId">
                                                                                        {{sc.teamName}}-{{sc.teamDesc}}
                                                                                    </option>
                                                                                </select>
                                                                            </td>
                                                                        </tr>
                                                                       

                                                                       



                                                                        <tr>
                                                                            <td style="width: 15%"  class="LabelFontStyle"> Bay&nbsp;Code&nbsp;:</td>
                                                                          
                                                                            <td>
                                                                           
                                                                            <select formControlName="bayTyId" style="background-color: yellow;"
                                                                            id="bayTyId" class="form-control">
                                                                            <option>--Select--</option>
                                                                            <option
                                                                                *ngFor="let sc of  bayTypeList"
                                                                                [ngValue]="sc.bayTyId">
                                                                               {{sc.bayTyDesc}}
                                                                            </option>
                                                                           </select> </td>

                                                                         

                                                                            <td></td>

                                                                            <td>
                                                                                <button data-toggle="modal"
                                                                                    class="btn btn-primary"
                                                                                    data-target="#exampleModalScrollable"
                                                                                    style="width: 140px">Additional
                                                                                    Details</button>
                                                                            </td>

                                                                            <!-- <td style="width: 15%"
                                                                                class="LabelFontStyle">&nbsp;</td>
                                                                            <td>
                                                                                <input type="text" hidden
                                                                                    class="form-control" placeholder="">
                                                                            </td> -->
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle1">Technician&nbsp;:
                                                                            </td>
                                                                            <td>
                                                                                <!-- <input type="text" class="form-control"
                                                                                    placeholder=""
                                                                                    formControlName="techId"> -->
                                                                                <select formControlName="techId" style="background-color: yellow;"
                                                                                    id="techId"
                                                                                    (ngModelChange)="technician($event)"
                                                                                    class="form-control">
                                                                                    <option>--Select--</option>
                                                                                    <option
                                                                                        *ngFor="let sc of  TechnicianList"
                                                                                        [ngValue]="sc.teamId">
                                                                                         {{sc.ticketNo}}-{{sc.description}}
                                                                                    </option>
                                                                                </select>
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Tech&nbsp;Advisor&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" class="form-control"
                                                                                    placeholder="" formControlName="techAdvisor" >
                                                                            </td>
                                                                        </tr>


                                                                        <tr>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Vehicle&nbsp;Model&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" disabled
                                                                                    class="form-control" placeholder=""
                                                                                    formControlName="mainModel">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Vehicle&nbsp;Sale&nbsp;Date&nbsp;:
                                                                            </td>
                                                                            <td>
                                                                                <input type="text" disabled
                                                                                    class="form-control" placeholder=""
                                                                                    formControlName="regDate">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Chassis&nbsp;No&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" disabled
                                                                                    class="form-control" placeholder=""
                                                                                    formControlName="chassisNo">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Engine&nbsp;No&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" disabled
                                                                                    class="form-control" placeholder=""
                                                                                    formControlName="engineNo">
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Vehicle&nbsp;Variant&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" disabled
                                                                                    class="form-control" placeholder=""
                                                                                    formControlName="variantCode">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">Color&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" disabled
                                                                                    class="form-control" placeholder=""
                                                                                    formControlName="colorCode">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Dealer&nbsp;Name&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" disabled
                                                                                    class="form-control" placeholder=""
                                                                                    formControlName="dealerName">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Dealer&nbsp;Site&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" disabled
                                                                                    class="form-control" placeholder=""
                                                                                    formControlName="dealerSite">
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                &nbsp;Demanded&nbsp;Job&nbsp;:
                                                                            </td>
                                                                            <td colspan="3" >
                                                                                <input type="text" class="form-control"
                                                                                formControlName="demandJob" placeholder="" style="width: 100%;">
                                                                            </td> 
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Recommendation&nbsp;:</td>
                                                                            <td colspan="3"> 
                                                                                <input type="text" class="form-control"
                                                                                formControlName="recomJob" placeholder="" style="width: 100%;">
                                                                            </td>
                                                                            <!-- <td>
                                                                                <button data-toggle="modal"
                                                                                    class="btn btn-primary"
                                                                                    data-target="#exampleModalScrollable"
                                                                                    style="width: fit-content;">
                                                                                    Details</button>
                                                                            </td> -->
                                                                        </tr>

                                                                    </fieldset>
                                                                        </ng-template>
                                                                        <ng-template #elseBlockFreeze>
                                                                                <fieldset class="RFS">
                                                                                    <legend id="FormsPH_LGAadhaar" class="RFSL"
                                                                                        style="font-size: 10px;color: black;">
                                                                                        <b>Vehicle&nbsp;Details&nbsp;</b>
                                                                                    </legend>
                                                                                    <tr>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle1">
                                                                                            Registration&nbsp;No&nbsp;:</td>
                                                                                        <td>
                                                                                            <input disabled type="text"
                                                                                                formControlName="regNo"
                                                                                                [(ngModel)]="regNo"
                                                                                               class="form-control" />
                                                                                            <!-- <select  formControlName="RegNo" id="RegNo"  (ngModelChange)="serchByRegNo($event)"
                                                                                        class="form-control">
                                                                                        <option>--Select--</option>
                                                                                        <option *ngFor="let sc of  RegNoList1" >
                                                                                            {{sc.srvAdvisorName}}
                                                                                        </option>
                                                                                    </select> -->
                                                                                            <input type="text" hidden
                                                                                                formControlName="itemId">
                                                                                            <input type="text" hidden
                                                                                                formControlName="customerSiteId">
                                                                                            <input type="number" min="0"  hidden
                                                                                                formControlName="ouId">
                                                                                            <input type="number" min="0"  hidden
                                                                                                formControlName="deptId">
                                                                                            <input type="number" min="0"  hidden
                                                                                                formControlName="locId">
                                                                                            <input type="text" hidden
                                                                                                formControlName="customerId">
                                                                                        </td>

                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle1">
                                                                                            Vehicle&nbsp;ID&nbsp;(VIN)&nbsp;:</td>
                                                                                        <td>
                                                                                            <input disabled type="text" class="form-control"
                                                                                                placeholder=""
                                                                                                formControlName="vin">
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle1">
                                                                                            OMR&nbsp;/Current&nbsp;KMS&nbsp;:</td>
                                                                                        <!-- <td>
                                                                                            <input disabled type="number"
                                                                                                class="form-control" placeholder=""
                                                                                                formControlName="lastRunKms">
                                                                                        </td> -->

                                                                                        <td>
                                                                                            <input type="number" min="0"
                                                                                                class="form-control" placeholder=""
                                                                                                formControlName="lastRunKms" (change)="validateKm()">
                                                                                        </td>

                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">JC Type&nbsp;:
                                                                                        </td>
                                                                                        <td>
                                                                                            <input type="text" hidden
                                                                                                class="form-control" placeholder=""
                                                                                                [(ngModel)]="divisionId"
                                                                                                formControlName="divisionId">
                                                                                            <!-- <input type="text" disabled
                                                                                                class="form-control" placeholder=""
                                                                                                [(ngModel)]="divisionName"
                                                                                                formControlName="divisionName"> -->
                                                                                            <input disabled formControlName="jcType"
                                                                                                id="jcType" class="form-control">
                                                                                              <!-- <select formControlName="jcType">
                                                                                                <option ng-repeat="x in jcTypeList" value="{{x.model}}">{{x.model}}</option>
                                                                                              </select> -->
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle1">
                                                                                            Service&nbsp;Type&nbsp;:</td>
                                                                                        <td>

                                                                                            <input disabled type="text" class="form-control" placeholder="" formControlName="srTypeId">
                                                                                            <!-- <select formControlName="srTypeId"
                                                                                                id="srTypeId"
                                                                                                (ngModelChange)="onOptionsSelectedsrTypeId($event)"
                                                                                                class="form-control">
                                                                                                <option>--Select--</option>
                                                                                                <option
                                                                                                    *ngFor="let sc of  srTypeIdList"
                                                                                                    [ngValue]="sc.srTypeId">
                                                                                                    {{sc.srTypeName}}-{{sc.description}}
                                                                                                </option>
                                                                                            </select> -->
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle1">
                                                                                            Sub&nbsp;Service&nbsp;Type&nbsp;:</td>
                                                                                        <td>
                                                                                            <input disabled type="text" class="form-control" placeholder="" formControlName="subTypeId">
                                                                                            <!-- <select formControlName="subTypeId"
                                                                                                id="subTypeId" class="form-control">
                                                                                                <option>--Select--</option>
                                                                                                <option
                                                                                                    *ngFor="let sc of  SubSrTypeIdList"
                                                                                                    [ngValue]="sc.subTypeId">
                                                                                                    {{sc.subTypeName}}-{{sc.description}}
                                                                                                </option>
                                                                                            </select> -->
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle1">
                                                                                            Service&nbsp;Advisor&nbsp;:</td>
                                                                                        <td>
                                                                                            <!-- (ngModelChange)='onOptionsrvAdvisorSelected($event)' -->
                                                                                            <input disabled type="text" class="form-control" placeholder="" formControlName="srvAdvisor">
                                                                                            <!-- <select formControlName="srvAdvisor"
                                                                                                (ngModelChange)='onOptionsrvAdvisorSelected($event)'
                                                                                                id="srvAdvisor"
                                                                                                class="form-control">
                                                                                                <option>--Select--</option>
                                                                                                <option
                                                                                                    *ngFor="let sc of  srvAdvisorList"
                                                                                                    [ngValue]="sc.srvAdvisor">
                                                                                                    {{sc.srvAdvisorName}}
                                                                                                </option>
                                                                                            </select> -->
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle1">Group&nbsp;:
                                                                                        </td>
                                                                                        <td>
                                                                                            <input disabled type="text" class="form-control" placeholder="" formControlName="groupId">
                                                                                              <!-- <select formControlName="groupId"
                                                                                                id="groupId" class="form-control">
                                                                                                <option>--Select--</option>
                                                                                                <option
                                                                                                    *ngFor="let sc of  groupIdList"
                                                                                                    [ngValue]="sc.teamId">
                                                                                                    {{sc.teamName}}-{{sc.teamDesc}}
                                                                                                </option>
                                                                                            </select> -->
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Bay&nbsp;Code&nbsp;:</td>
                                                                                        <td>
                                                                                            <input disabled type="text" class="form-control"
                                                                                                placeholder=""
                                                                                                formControlName="bayTyId">
                                                                                        </td>
                                                                                        <td></td>
                                                                                        <td>
                                                                                            <button data-toggle="modal"
                                                                                                class="btn btn-primary"
                                                                                                data-target="#exampleModalScrollable"
                                                                                                style="width: 140px;">Additional
                                                                                                Details</button>
                                                                                        </td>

                                                                                        <!-- <td style="width: 15%"
                                                                                            class="LabelFontStyle">&nbsp;</td>
                                                                                        <td>
                                                                                            <input type="text" hidden
                                                                                                class="form-control" placeholder="">
                                                                                        </td> -->
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">Technician&nbsp;:
                                                                                        </td>
                                                                                        <td>
                                                                                            <input disabled type="text" class="form-control"
                                                                                                placeholder=""
                                                                                                formControlName="techId">
                                                                                            <!-- <select formControlName="techId"
                                                                                                id="techId"
                                                                                                (ngModelChange)="technician($event)"
                                                                                                class="form-control">
                                                                                                <option>--Select--</option>
                                                                                                <option
                                                                                                    *ngFor="let sc of  TechnicianList"
                                                                                                    [ngValue]="sc.teamId">
                                                                                                    {{sc.description}}
                                                                                                </option>
                                                                                            </select> -->
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Tech&nbsp;Adivsor&nbsp;:</td>
                                                                                        <td>
                                                                                            <input disabled type="text" class="form-control"
                                                                                                placeholder="" formControlName="techAdvisor">
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Vehicle&nbsp;Model&nbsp;:</td>
                                                                                        <td>
                                                                                            <input type="text" disabled
                                                                                                class="form-control" placeholder=""
                                                                                                formControlName="mainModel">
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Vehicle&nbsp;Sale&nbsp;Date&nbsp;:
                                                                                        </td>
                                                                                        <td>
                                                                                            <input type="text" disabled
                                                                                                class="form-control" placeholder=""
                                                                                                formControlName="regDate">
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Chassis&nbsp;No&nbsp;:</td>
                                                                                        <td>
                                                                                            <input type="text" disabled
                                                                                                class="form-control" placeholder=""
                                                                                                formControlName="chassisNo">
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Engine&nbsp;No&nbsp;:</td>
                                                                                        <td>
                                                                                            <input type="text" disabled
                                                                                                class="form-control" placeholder=""
                                                                                                formControlName="engineNo">
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Vehicle&nbsp;Variant&nbsp;:</td>
                                                                                        <td>
                                                                                            <input type="text" disabled
                                                                                                class="form-control" placeholder=""
                                                                                                formControlName="variantCode">
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">Color&nbsp;:</td>
                                                                                        <td>
                                                                                            <input type="text" disabled
                                                                                                class="form-control" placeholder=""
                                                                                                formControlName="colorCode">
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Dealer&nbsp;Name&nbsp;:</td>
                                                                                        <td>
                                                                                            <input type="text" disabled
                                                                                                class="form-control" placeholder=""
                                                                                                formControlName="dealerName">
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Dealer&nbsp;Site&nbsp;:</td>
                                                                                        <td>
                                                                                            <input type="text" disabled
                                                                                                class="form-control" placeholder=""
                                                                                                formControlName="dealerSite">
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            &nbsp;Demanded&nbsp;Job&nbsp;:
                                                                                        </td>
                                                                                        <td colspan="3">
                                                                                            <input type="text" class="form-control"
                                                                                            formControlName="demandJob" placeholder="">
                                                                                        </td>
                                                                                        <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Recommendation&nbsp;:</td>
                                                                                        <td colspan="3">
                                                                                            <input type="text" class="form-control"
                                                                                            formControlName="recomJob" placeholder="">
                                                                                        </td>

                                                                                        <!-- <td>
                                                                                            <button data-toggle="modal"
                                                                                                class="btn btn-primary"
                                                                                                data-target="#exampleModalScrollable"
                                                                                                style="width: fit-content;">
                                                                                                Details</button>
                                                                                        </td> -->
                                                                                    </tr>

                                                                                </fieldset>
                                                                                    </ng-template>
                                                                    <tr>
                                                                        <table>
                                                                            <tr>
                                                                                <td>
                                                                                    <!-- //////////////// JOB CARD PAGE1 -->
                                                                                    <fieldset class="RFS">
                                                                                        <legend id="FormsPH_LGAadhaar"
                                                                                            class="RFSL"
                                                                                            style="font-size: 10px;color: black;">
                                                                                            <b>Customer&nbsp;Details&nbsp;</b>
                                                                                        </legend>
                                                                               
                                                                                        <table>

                                                                                            <tr>
                                                                                                <td style="width: 15%" class="LabelFontStyle">
                                                                                                    &nbsp;Name:&nbsp;</td>
            
                                                                                                    <td>
                                                                                                        <input type="text" disabled class="form-control"
                                                                                                            formControlName="custName" [(ngModel)]="custName"
                                                                                                            placeholder="" style="width: 360px;">
                                                                                                    </td>
            
                                                                                                    <td style="width: 15%" class="LabelFontStyle">
                                                                                                        Act&nbsp;No:&nbsp;</td>
            
                                                                                                <td>
                                                                                                    <input disabled type="text" class="form-control" placeholder=""
                                                                                                        formControlName="accountNo" [(ngModel)]="accountNo"
                                                                                                        (keydown.tab)="accountNoSearchfn1(accountNo)"  >
                                                                                                      
                                                                                                    <input type="text" hidden formControlName="customerId">
                                                                                                </td>
                                                                                            </tr>
            
            
            
                                                                                                <tr>
            
                                                                                                    <td style="width: 15%"
                                                                                                            class="LabelFontStyle">
                                                                                                            Bill&nbsp;To:&nbsp;
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <input type="text"
                                                                                                                disabled
                                                                                                                class="form-control"
                                                                                                                placeholder=""
                                                                                                                formControlName="billToAddress" style="width: 360px;">
                                                                                                        </td>
                                                                                                        <td style="width: 15%"
                                                                                                            class="LabelFontStyle">
                                                                                                            Mobile:&nbsp;
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <input type="text"
                                                                                                                disabled
                                                                                                                class="form-control"
                                                                                                                placeholder=""
                                                                                                                formControlName="contact1" >
                                                                                                        </td>
                                                                                                    
                                                                                                </tr>
                                                                                                <tr>
                                                                                                   <td style="width: 15%"
                                                                                                        class="LabelFontStyle">
                                                                                                        Ship&nbsp;To:&nbsp;
                                                                                                    </td>
                                                                                                    <td>
                                                                                                        <input type="text"
                                                                                                            disabled
                                                                                                            class="form-control"
                                                                                                            placeholder=""
                                                                                                            formControlName="shipToAddress" style="width: 360px;">
                                                                                                    </td>
                                                                                                       
            
                                                                                                        <td style="width: 15%" class="LabelFontStyle">
                                                                                                            &nbsp;Type:&nbsp;</td>
                                                                                                        <td><input type="text" disabled formControlName="custType"
                                                                                                                [(ngModel)]="custType" class="form-control" >
                                                                                                       </td>
                                                                                                    </tr>
            
                                                                                                    <tr>
                                                                                                     <td style="width: 15%"
                                                                                                        class="LabelFontStyle">
                                                                                                        Email:&nbsp;</td>
                                                                                                    <td>
                                                                                                        <input type="text"
                                                                                                            disabled
                                                                                                            class="form-control"
                                                                                                            placeholder=""
                                                                                                            formControlName="emailId" style="width: 250px;">
                                                                                                    </td>

                                                                                                    <td style="width: 15%"
                                                                                                    class="LabelFontStyle">
                                                                                                    DMS&nbsp;Cust&nbsp;No:&nbsp;</td>
                                                                                                <td>
                                                                                                    <input type="text"
                                                                                                        disabled
                                                                                                        class="form-control"
                                                                                                        placeholder=""
                                                                                                        formControlName="dmsCustId" >
                                                                                                </td>
                                                                                                    </tr>
                                                                                         </table>
            


                                                                                    </fieldset>
                                                                                </td>

                                                                                <td>
                                                                                    <fieldset class="RFS">
                                                                                        <legend id="FormsPH_LGAadhaar"
                                                                                            class="RFSL"
                                                                                            style="font-size: 10px;color: black;">
                                                                                            <b>
                                                                                                Billing&nbsp;Customer&nbsp;</b>
                                                                                        </legend>

                                                                                        <table>

                                                                                            <tr>
                                                                                                <td style="width: 15%" class="LabelFontStyle">
                                                                                                    &nbsp;Name:&nbsp;</td>
            
                                                                                                    <td>
                                                                                                        <input type="text" disabled class="form-control"
                                                                                                            formControlName="bName" [(ngModel)]="bName"
                                                                                                            placeholder="" style="width: 360px;">
                                                                                                    </td>
            
                                                                                                    <td style="width: 15%" class="LabelFontStyle">
                                                                                                        Act&nbsp;No:&nbsp;</td>
            
                                                                                                <td>
                                                                                                    <input disabled type="text" class="form-control" placeholder=""
                                                                                                        formControlName="bCustAcct" [(ngModel)]="bCustAcct">
                                                                                                      
                                                                                                      
                                                                                                    <input type="text" hidden formControlName="bcustomerId">
                                                                                                </td>
                                                                                            </tr>
            
            
            
                                                                                                <tr>
            
                                                                                                    <td style="width: 15%"
                                                                                                            class="LabelFontStyle">
                                                                                                            Address:&nbsp;
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <input type="text"
                                                                                                                disabled
                                                                                                                class="form-control"
                                                                                                                placeholder=""
                                                                                                                formControlName="bAdd" style="width: 360px;">
                                                                                                        </td>
                                                                                                        <td style="width: 15%"
                                                                                                            class="LabelFontStyle">
                                                                                                            Mobile:&nbsp;
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <input type="text"
                                                                                                                disabled
                                                                                                                class="form-control"
                                                                                                                placeholder=""
                                                                                                                formControlName="bContNo" >
                                                                                                        </td>
                                                                                                    
                                                                                                </tr>
                                                                                                <tr>
                                                                                                   <td style="width: 15%"
                                                                                                        class="LabelFontStyle">
                                                                                                        Gst&nbsp;No:&nbsp;
                                                                                                    </td>
                                                                                                        <td>
                                                                                                        <input type="text"
                                                                                                            disabled
                                                                                                            class="form-control"
                                                                                                            placeholder=""
                                                                                                            formControlName="bGstNo" >
                                                                                                        </td>
                                                                                                       
            
                                                                                                        <td style="width: 15%" class="LabelFontStyle">
                                                                                                            &nbsp;Type:&nbsp;</td>
                                                                                                        <td><input type="text" disabled formControlName="bCustType"
                                                                                                                [(ngModel)]="bCustType" class="form-control" >
                                                                                                       </td>
                                                                                                    </tr>
            
                                                                                                    <tr>
                                                                                                     <td style="width: 15%"
                                                                                                        class="LabelFontStyle">
                                                                                                        Email:&nbsp;</td>
                                                                                                    <td>
                                                                                                        <input type="text"
                                                                                                            disabled
                                                                                                            class="form-control"
                                                                                                            placeholder=""
                                                                                                            formControlName="bEmail" style="width: 250px;">
                                                                                                    </td>

                                                                                                    <td style="width: 15%"
                                                                                                        class="LabelFontStyle">
                                                                                                        Valid&nbsp;Upto&nbsp;
                                                                                                    </td>
                                                                                                    <td>
                                                                                                        <input disabled type="date"
                                                                                                            class="form-control"
                                                                                                            [(ngModel)]="validTillDt"
                                                                                                            placeholder=""
                                                                                                            formControlName="validTillDt">
                                                                                                    </td>
                                                                                                    </tr>
                                                                                                   
                                                                                         </table>
                                                                                      


                                                                                    </fieldset>
                                                                                </td>
                                                                            </tr>
                                                                        </table>

                                                                    </tr>


                                                                    <fieldset class="RFS">
                                                                        <legend id="FormsPH_LGAadhaar" class="RFSL"
                                                                            style="font-size: 10px;color: black;">
                                                                            <b>Pickup&nbsp;</b>
                                                                        </legend>

                                                                        <tr>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Free&nbsp;Pickup&nbsp;:</td>

                                                                            <!-- <td>
                                                                                <input type="text" class="form-control"
                                                                                    placeholder=""
                                                                                    formControlName="freePickup">
                                                                            </td> -->
                                                                            <!-- [(ngModel)]="freePickup" -->
                                                                            <td>
                                                                                <select formControlName="freePickup" id="freePickup" 
                                                                                (ngModelChange)="onFreePickupSelected($event)" class="form-control"  style="background-color: yellow;">
                                                                                <option value="Yes">Yes</option>
                                                                                <option value="No">No</option>
                                                                                </select>
                                                                            </td>

                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Pick&nbsp;up&nbsp;Type&nbsp;:</td>
                                                                            <td>
                                                                                <!-- [(ngModel)]="pickupType" -->
                                                                                <!-- <input type="text" class="form-control" placeholder=""  formControlName="pickupType"> -->
                                                                                <select formControlName="pickupType"  
                                                                                    id="pickupType"
                                                                                    class="form-control">
                                                                                    <option></option>
                                                                                    <option
                                                                                        *ngFor="let sc of  pickupTypeList">
                                                                                        {{sc.codeDesc}}
                                                                                    </option>
                                                                                </select>
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Pickup&nbsp;Date&nbsp;:</td>
                                                                            <td>
                                                                                <!-- max="{{minDate | date:'yyyy-MM-dd'}}" -->
                                                                                <!-- <input type="date" class="form-control"
                                                                                    placeholder=""
                                                                                    formControlName="pickupDate" [(ngModel)]="pickupDate" (change)="validatePickupDate()" > -->
                                                                                    <input type="date" class="form-control"
                                                                                    placeholder=""
                                                                                    formControlName="pickupDate" [(ngModel)]="pickupDate" (change)="validatePickupDate()" >
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Pickup&nbsp;Location&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" class="form-control"
                                                                                    placeholder=""
                                                                                    formControlName="pickupLoc">
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">Driver&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" class="form-control"
                                                                                    placeholder=""
                                                                                    formControlName="driverName">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Pickup&nbsp;Remark&nbsp;:</td>
                                                                            <td>
                                                                                <input type="text" class="form-control"
                                                                                    placeholder=""
                                                                                    formControlName="pickupRemark">
                                                                            </td>
                                                                        </tr>
                                                                    </fieldset>
                                                                    <fieldset class="RFS">
                                                                        <legend id="FormsPH_LGAadhaar" class="RFSL"
                                                                            style="font-size: 10px;color: black;">
                                                                            <b> Estimated&nbsp;</b>
                                                                        </legend>
                                                                        <tr>

                                                                            <!-- <td>
                                                                                <button type="butt on"
                                                                                    class="btn btn-primary"
                                                                                    style="width: 8rem;">Estimated
                                                                                    Labor</button>
                                                                            </td> -->

                                                                            <td style="width: 15%"  class="LabelFontStyle1">
                                                                                Estimated&nbsp;Labour:&nbsp;
                                                                            </td>

                                                                            <td>
                                                                                <input type="number"  formControlName="estLabor" [(ngModel)]="estLabor"
                                                                                    class="form-control" placeholder="" (change) ="validateEstAmt()">
                                                                            </td>

                                                                            <!-- <td>
                                                                                <button type="butt on"
                                                                                    class="btn btn-primary"
                                                                                    style="width: 8rem;">Estimated
                                                                                    Material</button>
                                                                            </td> -->

                                                                            <td style="width: 15%"  class="LabelFontStyle1">
                                                                                Estimated&nbsp;Material:&nbsp;
                                                                            </td>

                                                                            <td>
                                                                                <input type="number"  formControlName="estMaterial" [(ngModel)]="estMaterial"
                                                                                    class="form-control" placeholder="" (change) ="validateEstAmt()">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle">
                                                                                Total&nbsp;:</td>
                                                                            <td>
                                                                                <input type="number" disabled formControlName="estTotal" [(ngModel)]="estTotal"
                                                                                    class="form-control" placeholder="">
                                                                            </td>
                                                                            <td style="width: 15%"
                                                                                class="LabelFontStyle1">
                                                                                Promise&nbsp;Date&nbsp;&&nbsp;Time&nbsp;:
                                                                            </td>
                                                                            <!-- <td>
                                                                                <input type="datetime-local" class="form-control" style="width: fit-content;"
                                                                                    placeholder="" formControlName="promiseDate" [(ngModel)]="promiseDate" min="{{minDatetime}}">
                                                                            </td> -->

                                                                            <td>
                                                                                <input type="date" class="form-control"
                                                                                    placeholder=""
                                                                                    formControlName="promiseDate" [(ngModel)]="promiseDate" (change)="validatePromisedDate()"  min="{{minDate | date:'yyyy-MM-dd'}}">
                                                                            </td>
                                                                        </tr>
                                                                    </fieldset>

                                                                </table>
                                                                <table class="center">
                                                                    <tr>
                                                                    <div *ngIf="dispButtonStatus; then B1; else B2"></div>
                                                                     <ng-template #B1>
                                                                        <td> <button type="button"
                                                                                class="btn btn-primary"
                                                                                (click)="saveArInvoice()"
                                                                                style="width: 5rem;">Save</button></td>
                                                                    </ng-template>
                                                                    <ng-template #B2>
                                                                        <div *ngIf="dispReadyInvoice; then UR1; else UR2"></div>
                                                                        <ng-template #UR1>
                                                                        <td> <button  type="button"
                                                                                class="btn btn-primary" style="width: 5rem;"
                                                                                (click)="updateArInvoice()">Update</button></td>
                                                                              
                                                                        </ng-template>
                                                                    <ng-template #UR2>
                                                                            <td> <button disabled  type="button" style="width: 5rem;"
                                                                                    class="btn btn-primary"
                                                                                    (click)="updateArInvoice()">Update</button></td>
                                                                                    
                                                                    </ng-template>


                                                                    </ng-template>
                                                                                                                                             
                                                                        <td>
                                                                            <button type="button"
                                                                                class="btn btn-primary" style="width: 5rem;"
                                                                                (click)="clearFormArray()">Reset</button>
                                                                                
                                                                        </td>
                                                                        <td>
                                                                            <button type="submit" style="width: 5rem;"
                                                                                class="btn btn-primary" id="register"
                                                                                (click)="closeMast()">Close</button>
                                                                        </td>

                                                                        <div *ngIf="cancelButton; then CancelYes; else CancelNo"></div>
                                                                        <ng-template #CancelYes>
                                                                        <!-- <td>   <button type="submit"  class="btn btn-primary" id="register" (click)="cancelJobNo()">Cancel</button> </td> -->
                                                                               
                                                                            <button type="submit" class="btn btn-primary" id="cancBtn" data-toggle="modal"  style="width: 5rem;"
                                                                            data-target="#confirmAlert" (click)="getMessage('Cancel')" >Cancel</button>

                                                                        </ng-template>
                                                                        <ng-template #CancelNo>
                                                                                <button disabled type="submit" class="btn btn-primary" id="cancBtn" data-toggle="modal" style="width: 5rem;"
                                                                                data-target="#confirmAlert" (click)="getMessage('Cancel')" >Cancel</button>
                        
                                                                        </ng-template>



                                                                        <div
                                                                        *ngIf="dispReadyInvoice; then thenBlockRFI; else elseBlockRFI">
                                                                    </div>
                                                                    <ng-template #thenBlockRFI>
                                                                        <td>
                                                                            <button type="submit"
                                                                                class="btn btn-primary"
                                                                                style="width: fit-content;"
                                                                                (click)="jobCardStatusClose()"
                                                                                id="register">Ready for invoice</button>
                                                                        </td>
                                                                    </ng-template>
                                                                    <ng-template #elseBlockRFI>
                                                                        <td>
                                                                            <button disabled type="submit"
                                                                                class="btn btn-primary"
                                                                                style="width: fit-content;"
                                                                                (click)="jobCardStatusClose()"
                                                                                id="register">Ready for invoice</button>
                                                                        </td>
                                                                    </ng-template>

                                                                    <div *ngIf="preInvButton; then Pre1; else Pre2"></div>
                                                                    <ng-template #Pre1>
                                                                    <td>
                                                                        <button  type="submit" class="btn btn-primary"
                                                                            style="width: fit-content;"
                                                                            id="register" (click)="printPreInvoice()" >Pre-Invoice</button>
                                                                    </td>
                                                                    </ng-template>
                                                                    <ng-template #Pre2>
                                                                        <td>
                                                                            <button disabled type="submit" class="btn btn-primary"
                                                                                style="width: fit-content;"
                                                                                id="register" (click)="printPreInvoice()" >Pre-Invoice</button>
                                                                        </td>
                                                                    </ng-template>

                                                                   </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="profile-md" role="tabpanel"
                                        aria-labelledby="profile-tab-md">
                                        <div class="center">
                                            <div class="form-bg">
                                                <div class="center">
                                                    <table style="width: 100%;background-color: white;">
                                                        <tr>
                                                            <td class="PageHeader1" >
                                                                &nbsp;&nbsp;Labor&nbsp;Details&nbsp;&nbsp;{{jobCardNum}}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <table class="center">
                                                        <tr>

                                                            <div *ngIf="saveLabButton; then L1; else L2"></div>
                                                            <ng-template #L1>
                                                                <td>
                                                                <button type="button" class="btn btn-primary" (click)="saveLine()" style="width: 8rem;">Save Labour</button>
                                                                </td>
                                                            </ng-template>
                                                            <ng-template #L2>
                                                                <td>
                                                                <button disabled type="button" class="btn btn-primary" (click)="saveLine()" style="width: 8rem;">Save Labour</button>
                                                                </td>
                                                            </ng-template>
                                                        </tr>
                                                    </table>
                                                    <!-- <div class="center" style="width: 100%;"> -->
                                                    <!-- <div formArrayName="jobCardLabLines"> -->
                                                    <fieldset class="RFS">
                                                    <!-- <legend id="FormsPH_LGAadhaar" class="RFSL" style="font-size: 12px;color: black;font-weight: bold;">Find Job Card</legend> -->
                                                    <div class="grid_scroll">
                                                        <table class="GridFont" cellspacing="0" cellpadding="4"
                                                            border="0" style="width:100%; border-collapse:collapse;">
                                                            <thead>
                                                                <tr class="GridHeader">
                                                                    <th scope="col">Sr. no</th>
                                                                    <th scope="col">Billable Type</th>
                                                                    <th scope="col">Labor Item</th>
                                                                    <!-- <th scope="col">Item Id</th> -->
                                                                    <!-- <th scope="col">Uom</th> -->
                                                                    <th scope="col">Description</th>
                                                                    <th scope="col">Tax %</th>
                                                                    <th scope="col">Quantity</th>
                                                                    <th scope="col">Unit Price</th>
                                                                    <th scope="col">Basic Amt</th>
                                                                    <th scope="col">Tax Amt</th>
                                                                    <th scope="col">Total Amt</th>
                                                                    <div *ngIf="dispSplitRatio; then splt1; else splt2"> </div>
                                                                    <ng-template #splt1>
                                                                        <th scope="col">Split Ratio</th>
                                                                        <th scope="col">Customer</th>
                                                                        <th scope="col">Insurer</th>
                                                                        <th scope="col">Dealer</th>
                                                                        <th scope="col">OEM</th>
                                                                    </ng-template>
                                                                    <ng-template #splt2></ng-template>
                                                                    <th scope="col">FRM Hrs</th>
                                                                    <th scope="col">Technician</th>
                                                                    <th scope="col">Split</th>
                                                                    <th scope="col">Tech+</th>
                                                                    <th scope="col">Row+</th>
                                                                    <th scope="col">Row-</th>
                                                                </tr>
                                                            </thead>
                                                            <ng-container formArrayName="jobCardLabLines">
                                                                <ng-container
                                                                    *ngFor="let group of lineDetailsArray.controls; let i= index"
                                                                    [formGroupName]="i" class="auto-style5">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td><input disabled type="text"
                                                                                    formControlName="lineNum"
                                                                                    class="form-control"
                                                                                    style="width:2rem"> </td>
                                                                            <td>
                                                                                <!-- <input type="number" min="0"  formControlName="billableTyId"  class="form-control"  style="height: 25px;"> -->
                                                                                <select formControlName="billableTyId"
                                                                                    id="billableTyId"
                                                                                    style="width: fit-content;"
                                                                                    class="form-control"  >
                                                                                     <option
                                                                                        *ngFor="let sc of  billableTyIdList"
                                                                                        [selected]="sc.billableTyName===Customer" [ngValue]=sc.billableTyId>
                                                                                        {{sc.billableTyName}}
                                                                                    </option>
                                                                                </select>

                                                                                <input hidden type="number" formControlName="billableTyId" class="form-control"  style="height: 25px;">
                                                                            </td>
                                                                             
                                                                          
                                                                            <!-- <td>
                                                                                <select formControlName="itemId"
                                                                                    id="itemId"
                                                                                    (ngModelChange)="serchByitemId($event, i)"
                                                                                    class="form-control">
                                                                                    <option>--Select--</option>
                                                                                    <option
                                                                                        *ngFor="let sc of  LaborItemList"
                                                                                        [ngValue]="sc.itemId">
                                                                                        {{sc.segment}}
                                                                                    </option>
                                                                                </select>
                                                                            </td> -->


                                                                            <td><input type="text" formControlName="segment"
                                                                                (keyup)="getInvItemId($event)" id="invItemIdFirstWay"
                                                                                list="dynmicUserIds1" class="form-control"  style="width: 8rem;"
                                                                                (ngModelChange)="serchByitemId($event,i)" />
                                                                                <datalist id="dynmicUserIds1">
                                                                                    <option *ngFor="let item of LaborItemList" [(ngValue)]="item.itemId">
                                                                                            {{item.segment}} 
                                                                                            <!-- - {{item.description}} -->
                                                                                    </option>
                                                                                </datalist> 
                                                                            </td>  
                                                                        
                                                                            <input hidden  type="number"  formControlName="itemId"  class="form-control" style="width: 50px;"  >
                                                                        
                                                                             <!-- <td><input disabled  type="text"  formControlName="uom"  class="form-control" style="width: 50px;"  ></td> -->
                                                                       
                  
                                                                            <div *ngIf="dispSplitRatio; then splt11; else splt21"> </div>
                                                                            <ng-template #splt11>
                                                                            <td>
                                                                                <input disabled type="text" formControlName="description"  class="form-control"  style="height: 25px;">
                                                                            </td>
                                                                             </ng-template>
                                                                            <ng-template #splt21>
                                                                            <td>
                                                                                <input disabled type="text" formControlName="description"  class="form-control"  style="height: 25px; width:380px" >
                                                                            </td>
                                                                            </ng-template>


                                                                          
                                                                                <!-- <select formControlName="taxCategoryName"
                                                                                    style="width: 170px;"
                                                                                    id="taxCategoryName"
                                                                                    (ngModelChange)='onOptionTaxCatSelected(i, $event)'
                                                                                    class="form-control">
                                                                                    <option>--Select--</option>
                                                                                    <option *ngFor="let sc of  taxCategoryList" [value]="sc.taxCategoryName">
                                                                                        {{sc.taxCategoryName}}
                                                                                    </option>
                                                                                </select> -->

                                                                                <input hidden type="text" formControlName="taxCategoryName" [(ngModel)]="taxCategoryName" class="form-control" style="height: 25px;">
                                                                                <input hidden  type="text"  formControlName="taxCategoryId"  style="width: 170px;"  id="taxCategoryId"  class="form-control">

                                                                                <td> <input  type="number" disabled formControlName="taxPer"   class="form-control" style="width: 3rem; height: 25px; text-align: center;"> </td>

                                                                            <td>
                                                                                <input type="number" min="0"
                                                                                    formControlName="qty" 
                                                                                    (change)="onKey(i)"
                                                                                    class="form-control"
                                                                                    style="width: 3rem; height: 25px; text-align: right;">
                                                                            </td>

                                                                          
                                                                            <td>
                                                                                <input type="number" min="0"
                                                                                    class="form-control" disabled
                                                                                    formControlName="unitPrice"
                                                                                    (change)="onKey(i)"
                                                                                    style="height: 25px; width: 4rem;  text-align: right;">
                                                                            </td>
                                                                            <td>
                                                                                <input type="number" min="0"  disabled
                                                                                    formControlName="basicAmt"
                                                                                    class="form-control"
                                                                                    style="width: 4rem; height: 25px; text-align: right;">
                                                                            </td>

                                                                           
                                                                                <input type="number" min="0"  hidden formControlName="custBasicAmt">
                                                                                <input type="number" min="0"  hidden formControlName="insBasicAmt">

                                                                            <td>
                                                                                <input type="number" min="0"
                                                                                formControlName="taxAmt"
                                                                                class="form-control" disabled
                                                                                style="width: 4rem;height: 25px; text-align: right;">
                                                                            </td>

                                                                            <td>
                                                                                <input type="number" min="0"
                                                                                    formControlName="laborAmt"
                                                                                    class="form-control" disabled
                                                                                    style="width: 4rem;height: 25px; text-align: right;">
                                                                            </td>

                                                                            <div *ngIf="dispSplitRatio; then splt1; else splt2"> </div>
                                                                            <ng-template #splt2></ng-template>
                                                                            <ng-template #splt1>
                                                                           
                                                                            <td>
                                                                                 <select formControlName="splitRatio"
                                                                                    id="splitRatio" style="width: 3rem;"
                                                                                    (ngModelChange)='onOptionsplitRatioSelect(i, $event)'
                                                                                    class="form-control">
                                                                                    <option disabled>--Select--</option>
                                                                                    <option
                                                                                        *ngFor="let sc of  splitRatioList"
                                                                                        [ngValue]="sc.splitCateId">
                                                                                        {{sc.billingNature}}
                                                                                    </option>
                                                                                </select>
                                                                            </td>
                                                                           
                                                                           

                                                                            <td>
                                                                                <input type="number" min="0"
                                                                                    formControlName="custPer"
                                                                                    class="form-control" disabled
                                                                                    style="width: 3rem;height: 25px; text-align: right;">
                                                                            </td>
                                                                            <td>
                                                                                <input type="number" min="0"
                                                                                    formControlName="insPer"
                                                                                    class="form-control" disabled
                                                                                    style="width: 3rem;height: 25px; text-align: right;">
                                                                            </td>
                                                                            <td>
                                                                                <input type="number" min="0"
                                                                                    formControlName="dealerPer"
                                                                                    class="form-control" disabled
                                                                                    style="width: 3rem;height: 25px; text-align: right;">
                                                                            </td>
                                                                            <td>
                                                                                <input type="number" min="0"
                                                                                    formControlName="oemPer"
                                                                                    class="form-control" disabled
                                                                                    style="width: 3rem;height: 25px; text-align: right;">
                                                                            </td>
                                                                        </ng-template>

                                                                          
                                                                            <td><input type="number" min="0"  formControlName="frtHrs"  class="form-control" disabled style="width: 3rem;height: 25px; text-align: right;">
                                                                            </td>
                                                                            <td>
                                                                                <input type="text"
                                                                                    formControlName="techName" disabled
                                                                                    class="form-control"
                                                                                    [(ngModel)]="techName"
                                                                                    style="width: 130px;height: 25px;">
                                                                            </td>
                                                                            <td><input type="checkbox" style="text-align: center;"
                                                                                    formControlName="splitFlag"
                                                                                    (change)="splitFlagFlagFn($event)">
                                                                            </td>
                                                                            <td>
                                                                                <div *ngIf="displaySplit; then thenBlockSplit; else elseBlockSplit"></div>
                                                                                
                                                                                <ng-template #thenBlockSplit>
                                                                                    <button type="submit" 
                                                                                        class="btn btn-primary"
                                                                                        class="form-control"
                                                                                        style="width: min-content; text-align: center;"><i
                                                                                            class="fa fa-plus"></i></button>
                                                                                </ng-template>
                                                                                <ng-template #elseBlockSplit>
                                                                                    <button type="submit"
                                                                                        class="btn btn-primary"
                                                                                        data-toggle="modal"
                                                                                        data-target="#myModel"
                                                                                        placeholder="Select Item Category"
                                                                                        class="form-control"
                                                                                        (click)="openCodeComb(i)"
                                                                                        style="width: min-content; text-align: center;"><i
                                                                                            class="fa fa-plus"></i></button>
                                                                                </ng-template>
                                                                            </td>

                                                                            <div *ngIf="saveLabButton; then AD1; else AD2"></div>
                                                                            <ng-template #AD1>
                                                                            <td><button type="submit" class="btn btn-primary"  (click)="addRow(i)" (keydown.shift.arrowdown)="addRow(i)"
                                                                                    style="width: min-content;"><i class="fa fa-plus"></i></button>
                                                                            </td>
                                                                            <td><button type="submit"  class="btn btn-primary" (click)="RemoveRow(i)"
                                                                                    style="width: min-content;"><i class="fa fa-trash"></i></button>
                                                                            </td>
                                                                            </ng-template>
                                                                            <ng-template #AD2>
                                                                                <td><button disabled type="submit" class="btn btn-primary"  (click)="addRow(i)" (keydown.shift.arrowdown)="addRow(i)"
                                                                                        style="width: min-content;"><i class="fa fa-plus"></i></button>
                                                                                </td>
                                                                                <td><button disabled type="submit"  class="btn btn-primary" (click)="RemoveRow(i)"
                                                                                        style="width: min-content;"><i class="fa fa-trash"></i></button>
                                                                                </td>
                                                                            </ng-template>



                                                                        </tr>

                                                                    </tbody>
                                                                </ng-container>
                                                            </ng-container>
                                                        </table>
                                                    </div>
                                                    </fieldset>
                                                  



                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="contact-md" role="tabpanel"
                                        aria-labelledby="contact-tab-md">
                                        <div class="center">
                                            <div class="form-bg">
                                                <!-- <div class="center"> -->
                                                <table style="width: 100%;background-color: white;">
                                                    <tr>
                                                        <td class="PageHeader1">
                                                            &nbsp;&nbsp;Material&nbsp;Details&nbsp;&nbsp; {{jobCardNum}}
                                                        </td>
                                                    </tr>
                                                </table>
                                                <table class="center">
                                                    <tr>

                                                        <div *ngIf="saveMatButton; then MI1; else MI2"></div>
                                                        <ng-template #MI1>

                                                        <td>
                                                            <button type="butt on" class="btn btn-primary"
                                                                (click)="MatImptWip(jobCardNum)"
                                                                style="width: fit-content; text-align: center;">Import
                                                                Material from WIP</button>
                                                        </td>
                                                        </ng-template>
                                                        <ng-template #MI2></ng-template>

                                                        <div *ngIf="saveMatButton; then M1; else M2"></div>
                                                        <ng-template #M1>
                                                            <td>
                                                                <button type="butt on" class="btn btn-primary" (click)="saveMaterial()" style="width: 8rem;">Save  Material</button>
                                                            </td>
                                                        </ng-template>
                                                        <ng-template #M2>
                                                            <td>
                                                                <button disabled type="butt on" class="btn btn-primary" (click)="saveMaterial()" style="width: 8rem;">Save  Material</button>
                                                            </td>
                                                        </ng-template>


                                                    </tr>
                                                </table>

                                                <fieldset class="RFS">
                                                <div class="grid_scroll">
                                                    <table class="GridFont" cellspacing="0" cellpadding="4" border="0"
                                                        style="width:100%;border-collapse:collapse;">
                                                        <thead>
                                                            <tr class="GridHeader">
                                                                <th scope="col">No.</th>
                                                                <th scope="col">Billable Type</th>
                                                                <th scope="col">Part No</th>
                                                                <th scope="col">Description</th>
                                                                <th scope="col">Tax Category</th>
                                                                <th scope="col">Quantity</th>
                                                                <th scope="col">Rate</th>
                                                                <th scope="col">Basic Amount</th>
                                                                <th scope="col">Tax Amount</th>
                                                                <th scope="col">Total Amount</th>
                                                                <div *ngIf="dispSplitRatio; then spltm1; else spltm2"> </div>
                                                                <ng-template #spltm1>
                                                                <th scope="col">Split Ratio</th>
                                                                <th scope="col">CUST</th>
                                                                <th scope="col">INS</th>
                                                                <th scope="col">DLR</th>
                                                                <th scope="col">OEM</th>
                                                                </ng-template>
                                                                <ng-template #spltm2></ng-template>

                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <ng-container class="center"
                                                                formArrayName="jobCardMatLines">

                                                                <ng-container
                                                                    *ngFor="let group of lineDistributionArray().controls; let k= index"
                                                                    [formGroupName]="k" class="auto-style5">
                                                                    <tr>
                                                                        <td>
                                                                            <input type="number" min="0"  disabled
                                                                                class="form-control"
                                                                                style="width: 3rem;height: 25px;"
                                                                                formControlName="lineNum">
                                                                                <input hidden type="number" formControlName="trxLineId">
                                                                        </td>
                                                                        <td>
                                                                            <input hidden type="number" min="0"
                                                                                formControlName="billableTyId" hidden
                                                                                class="form-control"
                                                                                style="width: 160px;height: 25px;">
                                                                            <input hidden type="text"
                                                                                formControlName="billableTyName"
                                                                                class="form-control"
                                                                                style="width: 160px;height: 25px;">
                                                                            <select formControlName="billableTyId"
                                                                                id="billableTyId" class="form-control">
                                                                                <option>--Select--</option>
                                                                                <option
                                                                                    *ngFor="let sc of  billableTyIdList"
                                                                                    [ngValue]="sc.billableTyId">
                                                                                    {{sc.billableTyName}}
                                                                                </option>
                                                                            </select>
                                                                        </td>
                                                                        <td>
                                                                            <input type="number" min="0"
                                                                                formControlName="itemId" hidden
                                                                                class="form-control"
                                                                                style="width: 160px;height: 25px;">
                                                                            <input type="text" formControlName="segment"
                                                                                disabled class="form-control"
                                                                                style="width: 160px;height: 25px;">
                                                                        </td>

                                                                        <div *ngIf="dispSplitRatio; then spltm111; else spltm211"> </div>
                                                                        <ng-template #spltm111>
                                                                        <td>
                                                                            <input type="text"
                                                                                formControlName="description" disabled
                                                                                class="form-control"
                                                                                style="width: 160px;height: 25px;">
                                                                        </td>
                                                                        <!-- (ngModelChange)='onOptionTaxCatSelected(i, $event)' -->
                                                                        <td> <select formControlName="taxCategoryId"
                                                                            id="taxCategoryId" disabled
                                                                          
                                                                            class="form-control">
                                                                            <option>--Select--</option>
                                                                            <option
                                                                                *ngFor="let sc of  taxCategoryList"
                                                                                [ngValue]="sc.taxCategoryId">
                                                                                {{sc.taxCategoryName}}
                                                                            </option>
                                                                        </select>
                                                                        <input hidden type="number" formControlName="taxCategoryId">
                                                                    </td>



                                                                        </ng-template>
                                                                        <ng-template #spltm211>
                                                                            <td>
                                                                                <input type="text"
                                                                                    formControlName="description" disabled
                                                                                    class="form-control"
                                                                                    style="width: 300px;height: 25px;">
                                                                            </td>
                                                                        
                                                                       
                                                                            <!-- (ngModelChange)='onOptionTaxCatSelected(i, $event)' -->
                                                                        <td> <select formControlName="taxCategoryId"
                                                                                id="taxCategoryId" disabled style="width: 250px;"
                                                                              
                                                                                class="form-control">
                                                                                <option>--Select--</option>
                                                                                <option
                                                                                    *ngFor="let sc of  taxCategoryList"
                                                                                    [ngValue]="sc.taxCategoryId">
                                                                                    {{sc.taxCategoryName}}
                                                                                </option>
                                                                            </select>
                                                                            <input hidden type="number" formControlName="taxCategoryId">
                                                                        </td>

                                                                    </ng-template>


                                                                        <input hidden formControlName="taxPer">
                                                                        <td>
                                                                            <input type="number" min="0"  formControlName="qty"
                                                                                disabled class="form-control"
                                                                                style="width: 3rem;height: 25px; text-align: right;">
                                                                        </td>
                                                                        <td>
                                                                            <input type="number" min="0"
                                                                                formControlName="unitPrice" disabled
                                                                                class="form-control"
                                                                                style="width: 5rem;height: 25px; text-align: right;">
                                                                        </td>
                                                                        <td>
                                                                            <input type="number" min="0"
                                                                                formControlName="basicAmt" disabled
                                                                                class="form-control"
                                                                                style="width: 5rem;height: 25px; text-align: right;">
                                                                        </td>

                                                                        <input type="number" min="0"  hidden formControlName="custBasicAmt">
                                                                        <input type="number" min="0"  hidden formControlName="insBasicAmt">

                                                                        <td>
                                                                            <input type="number" min="0"
                                                                                formControlName="taxAmt" disabled
                                                                                class="form-control"
                                                                                style="width: 5rem;height: 25px; text-align: right;">
                                                                        </td>
                                                                        <td>
                                                                            <input type="number" min="0"
                                                                                formControlName="totAmt" disabled
                                                                                class="form-control"
                                                                                style="width: 5rem;height: 25px; text-align: right;">
                                                                        </td>

                                                                        <div *ngIf="dispSplitRatio; then spltm11; else spltm21"> </div>
                                                                        <ng-template #spltm11>
                                                                        <td>

                                                                            <select formControlName="splitRatio"
                                                                                id="splitRatio" style="width: 3rem;"
                                                                                (ngModelChange)='onOptionsplitRatioSelect1(k, $event)'
                                                                                class="form-control">
                                                                                <option>--Select--</option>
                                                                                <option
                                                                                    *ngFor="let sc of  splitRatioList"
                                                                                    [ngValue]="sc.splitCateId">
                                                                                    {{sc.billingNature}}
                                                                                </option>
                                                                            </select>
                                                                        </td>
                                                                        <td>
                                                                            <input type="number" min="0"  disabled
                                                                                formControlName="custPer"
                                                                                class="form-control"
                                                                                style="width: 3rem;height: 25px; text-align: right;">
                                                                        </td>
                                                                        <td>
                                                                            <input type="number" min="0"  disabled
                                                                                formControlName="insPer"
                                                                                class="form-control"
                                                                                style="width: 3rem;height: 25px; text-align: right;">
                                                                        </td>
                                                                        <td>
                                                                            <input type="number" min="0"  disabled
                                                                                formControlName="dealerPer"
                                                                                class="form-control"
                                                                                style="width: 3rem;height: 25px; text-align: right;">
                                                                        </td>
                                                                        <td>
                                                                            <input type="number" min="0"  disabled
                                                                                formControlName="oemPer"
                                                                                class="form-control"
                                                                                style="width: 3rem;height: 25px; text-align: right;">
                                                                        </td>
                                                                        </ng-template>
                                                                        <ng-template #spltm21></ng-template>

                                                                    </tr>
                                                                </ng-container>
                                                            </ng-container>
                                                        </tbody>
                                                    </table>


                                                </div>
                                                </fieldset>
                                             
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="billing-md" role="tabpanel"
                                        aria-labelledby="contact-tab-md">
                                        <div class="center">
                                            <div class="form-bg">
                                                <!-- <div class="center"> -->
                                                <table style="width: 100%;background-color: white;">
                                                    <tr>
                                                        <td class="PageHeader1">
                                                            &nbsp;&nbsp;Billing&nbsp;Details&nbsp;&nbsp;{{jobCardNum}}
                                                        </td>
                                                    </tr>
                                                </table>
                                                <!-- <div *ngIf="displayCustDetails; then CustthenBlock; else InsCustelseBlock"> -->
                                                <div *ngIf="showServiceCustomer; then srBlock; else dpBlock">
                                            </div>
                                            <ng-template #srBlock>
                                                <fieldset class="RFS">
                                                    <legend id="FormsPH_LGAadhaar" class="RFSL"
                                                        style="font-size: 10px;color: black;">
                                                        <b> Billing&nbsp;Customer&nbsp;</b>
                                                    </legend>
                                                    <tr>
                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Cust&nbsp;Name&nbsp;:</td>
                                                       
                                                            <input hidden type="text" class="form-control" placeholder=""
                                                                formControlName="accountNo" [(ngModel)]="accountNo"
                                                                (keydown.tab)="accountNoSearchfn1(accountNo)"
                                                                style="width: 5rem;">
                                                            <input type="text" hidden formControlName="customerId">
                                                        

                                                        <td>
                                                            <input type="text" disabled class="form-control"
                                                                formControlName="custName" [(ngModel)]="custName"
                                                                placeholder="" style="width: 25rem;">
                                                        </td>

                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Cust&nbsp;Type&nbsp;:</td>
                                                        <td><input type="text" disabled formControlName="custType"
                                                                [(ngModel)]="custType" class="form-control">
                                                        </td>

                                                        <td style="width: 15%" class="LabelFontStyle">GSTIN&nbsp;:</td>
                                                        <td>
                                                            <input type="text" disabled class="form-control"
                                                                class="form-control" placeholder=""
                                                                formControlName="bGstNo" [(ngModel)]=" bGstNo">
                                                        </td>

                                                       
                                                    </tr>


                                                    <tr>
                                                        <td style="width: 15%" class="LabelFontStyle">Address&nbsp;:
                                                        </td>
                                                        <td >
                                                            <input type="text" disabled class="form-control"
                                                                formControlName="billToAddress"
                                                                [(ngModel)]="billToAddress" placeholder=""
                                                                style="width: 25rem">
                                                        </td>
                                                        <td style="width: 15%" class="LabelFontStyle">Email&nbsp;:</td>
                                                        <td>
                                                            <input type="text" disabled class="form-control"
                                                                formControlName="emailId" [(ngModel)]="emailId"
                                                                placeholder="">
                                                        </td>

                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Cont&nbsp;No:&nbsp;</td>
                                                        <td>
                                                            <input type="text" disabled class="form-control"
                                                                formControlName="contact1" [(ngModel)]="contact1"
                                                                placeholder="">
                                                        </td>
                                                       
                                                       
                                                        <!-- <td style="width: 15%" class="LabelFontStyle">
                                                            GST&nbsp;Type&nbsp;:</td>
                                                        <td>
                                                            <input  type="text"disabled formControlName="bgstType" [(ngModel)]="bgstType" class="form-control" > -->
                                                                <!-- <select class="form-control">
                                                                <option value="S&C GST">S&C GST</option>
                                                                <option value="IGST">IGST</option>
                                                            </select> -->
                                                                <!-- </td> -->
                                                    </tr>
                                                    <tr>
                                                      

                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Remark&nbsp;:</td>
                                                        <td>
                                                            <input type="text" class="form-control" placeholder=""
                                                            style="width: 25rem" formControlName="remark">
                                                        </td>

                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Valid&nbsp;Till&nbsp;Date&nbsp;:</td>
                                                        <td >
                                                            <input type="date" class="form-control"
                                                                [(ngModel)]="validTillDt" disabled placeholder=""
                                                                formControlName="validTillDt">
                                                        </td>

                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Invoice&nbsp;Number&nbsp;:</td>
                                                        <td>
                                                            <input type="text" disabled class="form-control"
                                                            formControlName="arInvNum" value="{{arInvNum}}">

                                                        </td>

                                                    </tr>

                                                </fieldset>
                                            </ng-template>

                                            <ng-template #dpBlock>
                                                    <table>
                                                        <tr>
                                                            <td>
                                                                <fieldset class="RFS">
                                                                    <legend id="FormsPH_LGAadhaar"
                                                                        class="RFSL"
                                                                        style="font-size: 10px;color: black;">
                                                                        <b>Customer&nbsp;Details&nbsp;</b>
                                                                    </legend>
                                                                    <table>
                                                                     
                                                                         <tr>
                                                                             <table>

                                                                                <tr>
                                                                                    <td style="width: 15%" class="LabelFontStyle">
                                                                                        &nbsp;Name:&nbsp;</td>

                                                                                        <td>
                                                                                            <input type="text" disabled class="form-control"
                                                                                                formControlName="custName" [(ngModel)]="custName"
                                                                                                placeholder="" style="width: 375px;">
                                                                                        </td>

                                                                                        <td style="width: 15%" class="LabelFontStyle">
                                                                                            Act&nbsp;No:&nbsp;</td>

                                                                                    <td>
                                                                                        <input disabled type="text" class="form-control" placeholder=""
                                                                                            formControlName="accountNo" [(ngModel)]="accountNo"
                                                                                            (keydown.tab)="accountNoSearchfn1(accountNo)"  >
                                                                                          
                                                                                        <input type="text" hidden formControlName="customerId">
                                                                                    </td>
                                                                                </tr>



                                                                                    <tr>

                                                                                        <td style="width: 15%"
                                                                                                class="LabelFontStyle">
                                                                                                Bill&nbsp;To:&nbsp;
                                                                                            </td>
                                                                                            <td>
                                                                                                <input type="text"
                                                                                                    disabled
                                                                                                    class="form-control"
                                                                                                    placeholder=""
                                                                                                    formControlName="billToAddress" style="width: 375px;">
                                                                                            </td>
                                                                                            <td style="width: 15%"
                                                                                                class="LabelFontStyle">
                                                                                                Mobile:&nbsp;
                                                                                            </td>
                                                                                            <td>
                                                                                                <input type="text"
                                                                                                    disabled
                                                                                                    class="form-control"
                                                                                                    placeholder=""
                                                                                                    formControlName="contact1" >
                                                                                            </td>
                                                                                            <!-- <td style="width: 15%"
                                                                                                class="LabelFontStyle">
                                                                                                DMS&nbsp;Cust&nbsp;Id&nbsp;:
                                                                                            </td>
                                                                                            <td>
                                                                                                <input type="number" min="0"
                                                                                                    disabled
                                                                                                    class="form-control"
                                                                                                    formControlName="dmsCustId">
                                                                                            </td> -->
                                                                                    </tr>
                                                                                    <tr>
                                                                                       <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Ship&nbsp;To:&nbsp;
                                                                                        </td>
                                                                                        <td>
                                                                                            <input type="text"
                                                                                                disabled
                                                                                                class="form-control"
                                                                                                placeholder=""
                                                                                                formControlName="shipToAddress" style="width: 375px;">
                                                                                        </td>
                                                                                           

                                                                                            <td style="width: 15%" class="LabelFontStyle">
                                                                                                &nbsp;Type:&nbsp;</td>
                                                                                            <td><input type="text" disabled formControlName="custType"
                                                                                                    [(ngModel)]="custType" class="form-control" >
                                                                                           </td>
                                                                                        </tr>

                                                                                        <tr>
<!--                                                                                            
                                                                                            <td style="width: 15%"
                                                                                                class="LabelFontStyle">
                                                                                                Contact&nbsp;No&nbsp;2:
                                                                                            </td>
                                                                                            <td>
                                                                                                <input type="text"
                                                                                                    disabled
                                                                                                    class="form-control"
                                                                                                    placeholder=""
                                                                                                    formControlName="contact2">
                                                                                            </td> -->
                                                                                        </tr>
                                                                                        <tr>
                                                                                           

                                                                                            <td style="width: 15%"
                                                                                            class="LabelFontStyle">
                                                                                            Email:&nbsp;</td>
                                                                                        <td>
                                                                                            <input type="text"
                                                                                                disabled
                                                                                                class="form-control"
                                                                                                placeholder=""
                                                                                                formControlName="emailId" style="width: 250px;">
                                                                                        </td>
                                                                                        </tr>
                                                                             </table>




                                                                         </tr>
                                                                    </table>

                                                                </fieldset>
                                                            </td>
                                                            <td>
                                                                <fieldset class="RFS">
                                                                    <legend id="FormsPH_LGAadhaar"
                                                                        class="RFSL"
                                                                        style="font-size: 10px;color: black;">
                                                                        <b>
                                                                            Insurance&nbsp;Details&nbsp;</b>
                                                                    </legend>
                                                                    <table>
                                                                        <tr>
                                                                            
                                                                            <td style="width: 15%" class="LabelFontStyle"> Name:&nbsp;</td>
                                                                                
                                                                            <td> <input disabled type="text"  class="form-control"
                                                                            placeholder=""   formControlName="insurerCompName" style="width: 375px;" > </td>
                                                                            <td style="width: 15%" class="LabelFontStyle"> Act&nbsp;No:&nbsp;</td>
                                                                            <td><input disabled type="number" min="0" class="form-control"   placeholder=""  formControlName="insurerCompNo"  >  </td>
                                                                        </tr>

                                                                        <tr>
                                                                            <td style="width: 15%" class="LabelFontStyle"> Site:&nbsp;</td>
                                                                            <td> <input type="text" disabled formControlName="insurerSite" 
                                                                                class="form-control" placeholder="" style="width: 375px;"></td>
                                                                           <td style="width: 15%" class="LabelFontStyle"> GSTN:&nbsp;</td>
                                                                                
                                                                               
                                                                            <td>
                                                                                <input type="text"   disabled
                                                                                    formControlName="bGstNo" class="form-control"  placeholder=""  > </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="width: 15%"  class="LabelFontStyle">  Address:&nbsp;</td>
                                                                            <td> <input type="text" disabled formControlName="bAdd"   class="form-control" placeholder="" 
                                                                                style="width: 375px;"  > </td>
                                                                            <td style="width: 15%"
                                                                            class="LabelFontStyle">
                                                                            Mobile:&nbsp;
                                                                        </td>
                                                                        <td>
                                                                            <input type="text"
                                                                                disabled
                                                                                formControlName="bContNo"
                                                                                class="form-control"
                                                                                placeholder="" >
                                                                              
                                                                        </td>
                                                                           
                                                                        </tr>

                                                                        <tr>
                                                                            <td style="width: 15%"
                                                                            class="LabelFontStyle">
                                                                            Email:&nbsp;</td>
                                                                        <td>
                                                                            <input type="text"
                                                                                disabled
                                                                                formControlName="bEmail"
                                                                                class="form-control"
                                                                                placeholder="" style="width: 250px;" >
                                                                              
                                                                        </td>
                                                                          
                                                                           
                                                                            <td style="width: 15%"
                                                                            class="LabelFontStyle">
                                                                            Valid&nbsp;Upto:&nbsp;
                                                                        </td>
                                                                        <td>
                                                                            <input disabled type="date"
                                                                                class="form-control"
                                                                                placeholder=""
                                                                                formControlName="validTillDt" >
                                                                        </td>


                                                                        </tr>
                                                                     
                                                                    </table>


                                                                </fieldset>
                                                            </td>
                                                        </tr>
                                                    </table>

                                                </ng-template>

                                                


                                                    <fieldset class="RFS">
                                                        <!-- <legend id="FormsPH_LGAadhaar" class="RFSL"
                                                            style="font-size: 10px;color: black;">
                                                            <b> Estimate details</b>
                                                        </legend> -->
                                                        <tr>
                                                            <td style="width: 15%" class="LabelFontStyle">
                                                                Estimated&nbsp;Labour&nbsp;:</td>
                                                            <td>
                                                                <input type="number" disabled class="form-control"
                                                                    placeholder="" formControlName="estLabor">
                                                            </td>
                                                            
                                                            <td style="width: 15%" class="LabelFontStyle">
                                                                Estimated&nbsp;Material&nbsp;:</td>
                                                            <td>
                                                                <input type="number" disabled class="form-control"
                                                                    placeholder="" formControlName="estMaterial">
                                                            </td>
                                                            <td style="width: 15%" class="LabelFontStyle">
                                                                Estimated&nbsp;Total&nbsp;:</td>
                                                            <td>
                                                                <input type="number" disabled class="form-control"
                                                                    placeholder="" formControlName="estTotal">
                                                            </td>

                                                            <td style="width: 15%" class="LabelFontStyle">
                                                                Variation&nbsp;Reason(if&nbsp;any):</td>
                                                            <td colspan="2">
                                                                <select class="form-control" formControlName="variReason"  >
                                                                    <option value="Regular">Reason1</option>
                                                                    <option value="Re-Insurance coupon">Reason2</option>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                    </fieldset>
                                                
                                                    <fieldset class="RFS">
                                                        <legend id="FormsPH_LGAadhaar" class="RFSL" style="font-size: 10px;color: black;"><b> Bill Details</b> </legend>
                                                        <table class="auto-style4" class="GridFont" cellspacing="0"
                                                            cellpadding="4" border="0" id="ctl00_cpForm_grdActions"
                                                            style="border-color:#959595;width:100%;border-collapse:collapse;">
                                                            <thead>
                                                                <tr class="GridHeader">
                                                                   <th scope="col">Billable Type</th>
                                                                  
                                                                    <th scope="col" style="text-align: right;">Actual Labor&nbsp;&nbsp;</th>
                                                                    <th scope="col" style="text-align: right;">Lab Dis%</th>
                                                                    <th scope="col" style="text-align: right;">Labor Disount&nbsp;&nbsp;</th>
                                                                    <th scope="col" style="text-align: right;">Labor Taxable&nbsp;&nbsp;</th>
                                                                    <th scope="col" style="text-align: right;">Labor Tax Amt&nbsp;&nbsp;</th>
                                                                    <th scope="col" style="text-align: right;">Labor Total&nbsp;&nbsp;</th>

                                                                    <th scope="col" style="text-align: right;">Actual Material&nbsp;&nbsp;</th>
                                                                    <th scope="col" style="text-align: right;">Mat Dis%</th>
                                                                    <th scope="col" style="text-align: right;">Material Disount&nbsp;&nbsp;</th>
                                                                    <th scope="col" style="text-align: right;">Material Taxable&nbsp;&nbsp;</th>
                                                                    <th scope="col" style="text-align: right;">Material Tax&nbsp;&nbsp;</th>
                                                                    <th scope="col" style="text-align: right;">Material Total&nbsp;&nbsp;</th>
                                                                    <th scope="col" style="text-align: right;">Total Amount&nbsp;&nbsp;</th>
                                                                    
                                                                </tr>
                                                            </thead>
                                                            <tbody>

                                                                <tr class="ItemStyle" style="text-decoration:none;">

                                                                    <td style="width: 10em;text-align: center;" class="LabelFontStyle" >Customer&nbsp;</td>
                                                                    <td><input disabled type="number" formControlName="labBasicAmt" style="width: 7em;font-weight: bold;font-size: small;text-align: right;" ></td>
                                                                    
                                                                    <div *ngIf="showServiceCustomer ;then sr1; else sr2"></div>
                                                                    <ng-template #sr1>

                                                                    <div *ngIf="showLabdisP ;then sdp1; else sdp2"></div>
                                                                    <ng-template #sdp1>
                                                                    <td><select formControlName="labDiscountPer" 
                                                                            id="labDiscountPer" class="form-control" style="width: 4em;font-weight: bold;font-size: small;"
                                                                            (ngModelChange)="labDiscountPerCal($event)">
                                                                            <option>--Select--</option>
                                                                            <option
                                                                                *ngFor="let sc of  labDiscountPerList" [value]="sc.code" >
                                                                                {{sc.code}}
                                                                            </option>
                                                                        </select></td>
                                                                    </ng-template>
                                                                    <ng-template #sdp2>
                                                                        <td><input  disabled type="number"   min="0"     formControlName="labDiscountPer" class="form-control"  style="width: 7em;font-weight: bold;font-size: small;"></td>
                                                                    </ng-template>



                                                                    <div *ngIf="showLabDisCol ;then sd1; else sd2"></div>
                                                                    <ng-template #sd1>
                                                                         <td><input  type="number"   min="0"     formControlName="labDiscount" class="form-control" (change)="labDiscountAmtCal($event)" style="width: 7em;font-weight: bold;font-size: small;"></td>
                                                                    </ng-template>
                                                                    <ng-template #sd2>
                                                                         <td><input disabled type="number"   min="0"  formControlName="labDiscount" class="form-control"  style="width: 7em;font-weight: bold;font-size: small;"></td>
                                                                    </ng-template>

                                                                </ng-template>
                                                                <ng-template #sr2>
                                                                    <td><input disabled type="number"   min="0"  formControlName="labDiscountPer" class="form-control"  style="width: 4em;font-weight: bold;font-size: small;"></td>
                                                                    <td><input disabled type="number"   min="0"  formControlName="labDiscount" class="form-control"  style="width: 7em;font-weight: bold;font-size: small;"></td>
                                                                
                                                                </ng-template>

                                                                    

                                                                    <td><input disabled type="number" min="0" formControlName="labTaxableAmt" [(ngModel)]="labTaxableAmt" style="width: 7em;font-weight: bold;font-size: small;"    ></td>
                                                                    <td><input disabled type="number" min="0" formControlName="labTotTaxAmt" [(ngModel)]="labTotTaxAmt" style="width: 7em;font-weight: bold;font-size: small;" ></td>
                                                                    <td><input disabled type="number" min="0"  formControlName="labTotAmt" style="width: 7em;font-weight: bold;font-size: small;"></td>
                                                                    <td><input disabled type="number" formControlName="matBasicAmt" style="width: 7em;font-weight: bold;font-size: small;text-align: right;"></td>
                                                                    
                                                                    <div *ngIf="showServiceCustomer ;then sr11; else sr21"></div>
                                                                    <ng-template #sr11>

                                                                    <div *ngIf="showMatDisP ;then mdp1; else mdp2"></div>
                                                                    <ng-template #mdp1>
                                                                    <td><select   formControlName="matDiscountPer"  class="form-control" style="width: 4em;font-weight: bold;font-size: small;"
                                                                        id="matDiscountPer" class="form-control"
                                                                        (ngModelChange)="matDiscountPerCal($event)">
                                                                        <option>--Select--</option>
                                                                        <option
                                                                            *ngFor="let sc of  matDiscountPerList" [value]="sc.code" >
                                                                            {{sc.code}}
                                                                        </option> 
                                                                      </select></td>
                                                                    </ng-template>
                                                                    <ng-template #mdp2>
                                                                        <td><input disabled type="number" min="0" formControlName="matDiscountPer"  style="width: 7em;font-weight: bold;font-size: small;" class="form-control"  ></td>
                                                                    </ng-template>

                                                                      <div *ngIf="showMatDisCol ;then md1; else md2"></div>
                                                                      <ng-template #md1>
                                                                        <td><input type="number" min="0" formControlName="matDiscout"  style="width: 7em;font-weight: bold;font-size: small;" class="form-control"  (change)="matDiscountAmtCal($event)"></td>
                                                                      </ng-template>
                                                                      <ng-template #md2>
                                                                        <td><input disabled type="number" min="0" formControlName="matDiscout"  style="width: 7em;font-weight: bold;font-size: small;" class="form-control"  ></td>
                                                                     </ng-template>
                                                                    </ng-template>
                                                                    <ng-template #sr21> 
                                                                        <td><input disabled type="number"   min="0"  formControlName="matDiscountPer" class="form-control"  style="width: 4em;font-weight: bold;font-size: small;"></td>
                                                                        <td><input disabled type="number" min="0" formControlName="matDiscout"  style="width: 7em;font-weight: bold;font-size: small;" class="form-control"  ></td>
                                                                    </ng-template>

                                                                    <td><input disabled type="number" min="0" formControlName="matTaxableAmt" [(ngModel)]="matTaxableAmt" style="width: 7em;font-weight: bold;font-size: small;" ></td>
                                                                    <td><input disabled type="number" min="0" formControlName="matTotTaxAmt" [(ngModel)]="matTotTaxAmt" style="width: 7em;font-weight: bold;font-size: small;" ></td>
                                                                    <td><input disabled type="number" min="0"  formControlName="matTotAmt" style="width: 7em;font-weight: bold;font-size: small;">  </td>
                                                                    <td><input disabled type="number" min="0"  formControlName="invTotAmt" class="form-control"  style="width: 10em;font-weight: bold;font-size: small;"></td>
                                                                </tr>
                                                              

                                                              

                                                                <tr class="ItemStyle" style="text-decoration:none;">
                                                                    
                                                                <div *ngIf="showServiceCustomer; then srvBlock; else insBlock"></div>
                                                                            <ng-template #srvBlock></ng-template>
                                                                            <ng-template #insBlock>
                                                      
                                                                            <td style="width: 15%;text-align: center;" class="LabelFontStyle">Insurance&nbsp;</td>
                                                                           
                                                                            <td><input disabled type="number" min="0"   style="width: 7em;font-weight: bold;font-size: small;"
                                                                                formControlName="insLabTaxableAmt"></td>
                                                                            <td><input disabled type="number"   min="0"     formControlName="labDiscountPerIns" class="form-control"  style="width: 4em;font-weight: bold;font-size: small;"></td>
                                                                            <td><input disabled type="number"   min="0"     formControlName="labDiscountIns" class="form-control"  style="width: 7em;font-weight: bold;font-size: small;"></td>
                                                                            
                                                                            <td><input disabled type="number" min="0"   style="width: 7em;font-weight: bold;font-size: small;"
                                                                                    formControlName="insLabTaxableAmt"></td>
                                                                            <td><input disabled type="number" min="0"   style="width: 7em;font-weight: bold;font-size: small;"
                                                                                    formControlName="insLabTotTaxAmt"></td>
                                                                            <td><input disabled type="number" min="0"  formControlName="insLabTotAmt" style="width: 7em;font-weight: bold;font-size: small;"
                                                                                    formControlName="insLabTotAmt"></td>
                                                                            <td><input disabled type="number" min="0"   style="width: 7em;font-weight: bold;font-size: small;"
                                                                                formControlName="insMatTaxableAmt"></td>
                                                                            <td><input disabled type="number"   min="0"     formControlName="matDiscountPerIns" class="form-control"  style="width: 4em;font-weight: bold;font-size: small;"></td>
                                                                            <td><input disabled type="number"   min="0"     formControlName="matDiscoutIns" class="form-control"  style="width: 7em;font-weight: bold;font-size: small;"></td>
                                                                                                                                                   
                                                                            <td><input disabled type="number" min="0"   style="width: 7em;font-weight: bold;font-size: small;"
                                                                                    formControlName="insMatTaxableAmt"></td>
                                                                            <td><input disabled type="number" min="0"   style="width: 7em;font-weight: bold;font-size: small;"
                                                                                    formControlName="insMatTotTaxAmt"></td>
                                                                            <td><input disabled type="number" min="0"  formControlName="insMatTotAmt" style="width: 7em;font-weight: bold;font-size: small;"
                                                                                    formControlName="insMatTotAmt"></td>

                                                                            <td><input disabled type="number" min="0"  formControlName="insInvTotAmt" class="form-control"  style="width: 10em;font-weight: bold;font-size: small;"></td>
                                                                   
                                                                        </ng-template>
                                                                </tr>
                                                                

                                                                <div *ngIf="dispSplitRatio ; then salv1; else salv2"></div>
                                                                <ng-template #salv1>
                                                              
                                                                <tr class="ItemStyle" style="text-decoration:none;">
                                                                  
                                                                    <td style="width: 15%;text-align: center;" class="LabelFontStyle"> Deductibles&nbsp;</td>
                                                                       
                                                                    <td>
                                                                        <input type="number" min="0"   style="width:7em;font-weight: bold;font-size: small;"
                                                                            placeholder="" formControlName="ecaAmt" class="form-control">
                                                                    </td>
                                                                </tr>
                                                                <tr class="ItemStyle" style="text-decoration:none;">
                                                                    <td style="width: 15%;text-align: center;" class="LabelFontStyle">Salvage&nbsp;</td>
                                                                       
                                                                    <td>
                                                                        <input type="number" min="0"   style="width: 7em;font-weight: bold;font-size: small;"
                                                                            placeholder="" formControlName="salvage" class="form-control">
                                                                    </td>

                                                                </tr>
                                                            </ng-template>
                                                            <ng-template #salv2>
                                                            </ng-template>
                                                                                                                            
                                                            </tbody>
                                                        </table>
                                                    </fieldset>

                                                    <div *ngIf="showServiceCustomer ;then sr111; else sr211"></div>
                                                    <ng-template #sr111>

                                                    <fieldset class="RFS">
                                                        <legend id="FormsPH_LGAadhaar" class="RFSL"
                                                            style="font-size: 10px;color: black;">
                                                            <b> Discount Details</b>
                                                        </legend>
                                                        <tr>

                                                            <td style="width: 15%" class="LabelFontStyle">Discount&nbsp;Type:&nbsp;</td>

                                                            <td>
                                                                <select formControlName="disCategory" style="width: 12em;font-weight: bold;font-size: small;"
                                                                    id="disCategory" class="form-control">
                                                                    <option>--Select--</option>
                                                                    <option *ngFor="let sc of  disCategoryList">
                                                                        {{sc.code}}
                                                                    </option>
                                                                </select>
                                                            </td>
                                                            <td style="width: 15%" class="LabelFontStyle">Authorized&nbsp;By:&nbsp;</td>

                                                           
                                                            <td>
                                                                <select class="form-control" style="width: 12em;font-weight: bold;font-size: small;"
                                                                    formControlName="disAuthBy">
                                                                    <option value="Location service">
                                                                        Location service</option>
                                                                    <option value="BS Manager">BS Manager
                                                                    </option>
                                                                    <option value="AGM">AGM</option>
                                                                </select>
                                                            </td>
                                                                                                                       
                                                            <td style="width: 15%" class="LabelFontStyle">
                                                                Disc&nbsp;Mode(Lbr)&nbsp;:</td>
                                                           
                                                               <td>
                                                                    <select formControlName="disTypeLab" value={{disTypeLab}} style="width: 10em;font-weight: bold;font-size: small;"
                                                                        id="disTypeLab" class="form-control"
                                                                        (ngModelChange)='onOptionsDisTypeLabSelected($event)'>
                                                                        <option >--Select--</option>
                                                                        <option *ngFor="let sc of  DisTypeMatList">
                                                                            {{sc.model}}
                                                                        </option>
                                                                    </select>
                                                                  
                                                                </td>

                                                                <td style="width: 15%" class="LabelFontStyle">
                                                                    Disc&nbsp;Mode(Matrl)&nbsp;:</td>
                                                                    <td>
                                                                       
                                                                        <select formControlName="disTypeMat" value={{disTypeMat}} style="width: 10em;font-weight: bold;font-size: small;"
                                                                            id="disTypeMat" class="form-control"
                                                                            (ngModelChange)='onOptionsDisTypeMatSelected($event)'>
                                                                            <option>--Select--</option>
                                                                            <option *ngFor="let sc of  DisTypeMatList">
                                                                                {{sc.model}}
                                                                            </option>
                                                                        </select>
                                                                    </td>
                                                                                                                      
                                                        </tr>
    
                                                    </fieldset>
                                                    </ng-template>
                                                    <ng-template #sr211></ng-template>


                                            

                                                <br>
                                                <fieldset class="RFS">
                                                    <legend id="FormsPH_LGAadhaar" class="RFSL"
                                                        style="font-size: 10px;color: black;">
                                                        <b> Payment details</b>
                                                    </legend>
                                                    <tr>
                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Outstanding&nbsp;Amount&nbsp;:</td>
                                                        <td>
                                                            <input type="number" disabled class="form-control"
                                                                placeholder="" formControlName="balanceAmt">
                                                        </td>
                                                        <td>
                                                            <button type="submit" class="btn btn-primary" id="register"
                                                                style="width: fit-content;">Details</button>
                                                        </td>
                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Advance&nbsp;Amount&nbsp;:</td>
                                                        <td>
                                                            <input type="number" disabled class="form-control"
                                                                placeholder="" formControlName="advAmt">
                                                        </td>
                                                        <td>
                                                            <button type="submit" class="btn btn-primary" id="register"
                                                                style="width: fit-content;">Details</button>
                                                        </td>
                                                    </tr>

                                                </fieldset>

                                                <table class="center">
                                                    <tr>

                                                        <td>
                                                            <button type="button"
                                                                class="btn btn-primary" style="width: 5rem;"
                                                                (click)="clearFormArray()">Reset</button>
                                                                
                                                        </td>

                                                        <div *ngIf="saveBillButton; then SB1; else SB2"></div>
                                                        <ng-template #SB1>
                                                        <!-- <td>
                                                            <button type="button" class="btn btn-primary"
                                                                style="width:7rem;"
                                                                (click)="applyDiscnt()">Apply Discount</button>
                                                        </td> -->
                                                        <td>
                                                            <button type="butt on" class="btn btn-primary"
                                                                style="width: 6rem;" (click)="BillingCal()">Save Bill</button>
                                                        </td>
                                                       </ng-template>
                                                        <ng-template #SB2>
                                                        <td>
                                                            <button disabled type="butt on" class="btn btn-primary"
                                                                style="width: 7rem;" (click)="BillingCal()">Save Bill</button>
                                                        </td>
                                                         </ng-template>



                                                         <div *ngIf="saveBillButton; then RE1; else RE2"></div>
                                                         <ng-template #RE1>
                                                            <td>
                                                                <button type="submit" class="btn btn-primary"
                                                                style="width: fit-content;" (click)="ReopenMaterialIssue()"  id="register">Reopen-Material Issue</button>
                                                           </td>
                                                        </ng-template>
                                                         <ng-template #RE2>
                                                                <td>
                                                                    <button disabled  type="submit" class="btn btn-primary"
                                                                    style="width: fit-content;" (click)="ReopenMaterialIssue()"  id="register">Reopen-Material Issue</button>
                                                            </td>


                                                          </ng-template>

                                                      

                                                        <div *ngIf="genBillButton; then G1; else G2"></div>
                                                        <ng-template #G1>
                                                        <td>
                                                            <button type="submit" class="btn btn-primary"
                                                                (click)="GenerateInvoice(jobCardNum)" id="register" style="width: fit-content;">Generate Invoice</button>
                                                        </td>
                                                        </ng-template>
                                                        <ng-template #G2>
                                                            <td>
                                                                <button disabled  type="submit" class="btn btn-primary"
                                                                    (click)="GenerateInvoice(jobCardNum)" id="register" style="width: fit-content;">Generate Invoice</button>
                                                            </td>
                                                        </ng-template>


                                                        <div *ngIf="preInvButton; then Pre11; else Pre21"></div>
                                                        <ng-template #Pre11>
                                                        <td>
                                                            <button  type="submit" class="btn btn-primary"
                                                                style="width: fit-content;"
                                                                id="register" (click)="printPreInvoice()" >Pre-Invoice</button>
                                                        </td>
                                                        </ng-template>
                                                        <ng-template #Pre21>
                                                            <td>
                                                                <button disabled type="submit" class="btn btn-primary"
                                                                    style="width: fit-content;"
                                                                    id="register" (click)="printPreInvoice()" >Pre-Invoice</button>
                                                            </td>
                                                        </ng-template>
                                                       
                                                       
                                                    
                                             
                                                    <div *ngIf="printInvoiceButton; then P1; else P2"></div>
                                                    <ng-template #P1>
                                                        <td>
                                                            <button type="submit" class="btn btn-primary" id="register"
                                                                style="width: fit-content;" (click)="printWSInvoice()">Print invoice</button>
                                                        </td>

                                                        <td>
                                                            <button type="submit" class="btn btn-primary" id="register"
                                                                style="width: fit-content;" (click)="showReceiptScreen()">Receipt</button>
                                                        </td>
                                                    </ng-template>

                                                    <ng-template #P2>
                                                        <td>
                                                            <button disabled type="submit" class="btn btn-primary" id="register"
                                                                style="width: fit-content;" (click)="printWSInvoice()">Print invoice</button>
                                                        </td>
                                                    </ng-template>

                                                      
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <!-- formControlName="divisionName" -->

                        </table>
                        <table class="center">
                            <div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog"
                                aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="myModalLabel"
                                                style="text-align: center; font-size: medium; font-family: Verdana,Sans-serif, Arial, Helvetica;font-weight: bold;">
                                                Additional Details</h4>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>

                                        </div>
                                        <div class="modal-body">
                                            <div class="grid_scroll1">
                                                <table class="center" style="width: 100%;">
                                                    <tr>
                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Vehicle&nbsp;Insurance&nbsp;:</td>
                                                        <td>
                                                            <input type="text" class="form-control" disabled
                                                                placeholder="" formControlName="insStatus">
                                                        </td>
                                                        <td>
                                                            <input hidden type="text" class="form-control" disabled formControlName="insurerCompId">
                                                                <input  type="text" class="form-control" disabled
                                                                placeholder="Insurance Company name"
                                                                formControlName="insurerCompName">
                                                        </td>
                                                        <input hidden formControlName="insurerCompNo">
                                                        <td>
                                                            <input hidden type="text" class="form-control" disabled
                                                                placeholder="Site" formControlName="insurerSiteId">
                                                                <input type="text" class="form-control" disabled
                                                                placeholder="Site" formControlName="insurerSite">
                                                        </td>
                                                        <td>
                                                            <input type="date" class="form-control" disabled
                                                                placeholder="Expiry Date" formControlName="insuDate">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            OEM&nbsp;Warranty&nbsp;:</td>
                                                        <td>
                                                            <input type="text" class="form-control" disabled
                                                                placeholder="" formControlName="oemWarrStatus">
                                                        </td>
                                                        <td>
                                                            <input type="date" class="form-control" disabled
                                                                placeholder="Expiry Date"
                                                                formControlName="oemExpiryDate">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Extended&nbsp;Warranty&nbsp;:</td>
                                                        <td>
                                                            <input type="text" class="form-control" disabled
                                                                placeholder="" formControlName="ewStatus">
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control" disabled
                                                                placeholder="EW Number">
                                                        </td>
                                                        <td>
                                                            <input type="date" class="form-control" disabled
                                                                placeholder="Expiry Date" formControlName="ewStartDate">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            MCP &nbsp;&nbsp;:</td>
                                                        <td>
                                                            <input type="text" class="form-control" disabled
                                                                placeholder="">
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control" disabled
                                                                placeholder="MCP Number">
                                                        </td>
                                                        <td>
                                                            <input type="date" class="form-control" disabled
                                                                placeholder="Expiry Date">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            CNG &nbsp;&nbsp;:</td>
                                                        <td>
                                                            <input type="text" class="form-control" disabled
                                                                placeholder="Cylinder No "
                                                                formControlName="cngCylinderNo">
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control" disabled
                                                                placeholder="Kit No" formControlName="cngKitNumber">
                                                        </td>
                                                        <td>
                                                            <input type="date" class="form-control" disabled
                                                                placeholder="Expiry Date">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            Govt&nbsp;Vehicle&nbsp;(Y/N)&nbsp;:</td>
                                                        <td>
                                                            <input type="text" class="form-control" disabled
                                                                placeholder="">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 15%" class="LabelFontStyle">
                                                            VIP&nbsp;:</td>
                                                        <td>
                                                            <input type="text" class="form-control" disabled
                                                                placeholder="">
                                                        </td>
                                                    </tr>
                                                </table>
                                                <div class="modal-footer">
                                                    <!--  -->
                                                    <table>
                                                        <tr>

                                                            <td style="margin-right: 20%;"><button type="button"
                                                                    class="btn btn-primary" data-dismiss="modal"
                                                                    class="close">Ok</button></td>
                                                            <!-- (click)="Submit()" -->
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </table>
                        <div *ngIf="displayModal; then thenBlockModal; else elseBlockModal">
                        </div>
                        <ng-template #thenBlockModal>
                        </ng-template>
                        <ng-template #elseBlockModal>
                            <div id="myModel" [style.display]="showModal ? 'block' : 'none'" class="modal fade"
                                tabindex="-1" role="dialog" aria-hidden="true" style="width: 700px; margin-left:350px">

                                <div class="modal-dialog modal-lg">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                                <h4 class="modal-title" id="myModalLabel"
                                                style="text-align: center; font-size: medium; margin-left: 20%; font-family: Verdana,Sans-serif, Arial, Helvetica;font-weight: bold;">
                                                Add Technician for Line-{{ title }}. Labor Amt : {{this.lineBasicAmt}}</h4>
                                               
                                            <button type="button" class="close" data-dismiss="modal"
                                                aria-hidden="true">&times;</button>
                                        </div>
                                        <div class="modal-body text-center pagination-centered">
                                            <div class="grid_scroll">
                                                <table class="auto-style4" cellspacing="0" cellpadding="4" rules="all"
                                                    class="center" style="border: solid 1px Gray">
                                                    <thead>
                                                        <tr>
                                                            <!-- <th scope="col">SL. NO.</th> -->
                                                            <th scope="col">Type</th>
                                                            <th scope="col">Technician Name</th>
                                                            <!-- <th scope="col">Percentage</th> -->
                                                            <th scope="col">Amount</th>
                                                            <!-- <th scope="col">Contractor code</th> -->
                                                            <!-- <th scope="col">Percentage</th>
                                                             <th scope="col">Amount</th> -->
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <ng-container class="center" formArrayName="splitAmounts">
                                                            <ng-container
                                                                *ngFor="let matDetails of splitDetailsArray().controls; let j= index"
                                                                [formGroupName]="j">

                                                                <tr>
                                                                    <input  hidden disabled type="number" min="0"  formControlName="lineBasicAmt" 
                                                                            class="form-control">

                                                                    <td>
                                                                        <select class="form-control"
                                                                            formControlName="type">
                                                                            <option value="Technician">Technician
                                                                            </option>
                                                                            <option value="Contractor">Contractor
                                                                            </option>
                                                                        </select>
                                                                    </td>
                                                                    <td> <select formControlName="techId" id="techId"
                                                                            class="form-control">
                                                                            <option>--Select--</option>
                                                                            <option *ngFor="let sc of  TechnicianList"
                                                                                [ngValue]="sc.teamId">
                                                                                {{sc.description}}
                                                                            </option>
                                                                        </select>
                                                                    </td>
                                                                    <!-- <td> <input disabled type="number" min="0"  formControlName="techPer"
                                                                            class="form-control">
                                                                    </td> -->

                                                                   
                                                                    

                                                                    <td> <input type="number" min="0"  formControlName="techAmt" (change) =validateTechAmt(j,content)
                                                                        class="form-control">
                                                                    </td>

                                                                    <!-- <td> <input  type="text"
                                                                            formControlName="contr1" class="form-control">
                                                                    </td>
                                                                    <td> <input  formControlName="contr1Per"
                                                                        class="form-control" >
                                                                </td>
                                                                <td> <input  type="text"
                                                                        formControlName="contr1Amt" class="form-control">
                                                                </td> -->
                                                                    <td>
                                                                        <button type="submit" class="btn btn-primary"
                                                                            (click)="addTechRow(j)"
                                                                            (keydown.shift.arrowdown)="addRow(i)"
                                                                            style="width: min-content;"><i
                                                                                class="fa fa-plus"></i></button>
                                                                    </td>
                                                                    <td>
                                                                        <button type="submit" class="btn btn-primary"
                                                                            (click)="RemoveTechRow(j)"
                                                                            style="width: min-content;"><i
                                                                                class="fa fa-trash"></i></button>
                                                                    </td>
                                                                </tr>
                                                                <!-- <tr>
                                                                            <td> <input  type="text"
                                                                                    formControlName="tech2" class="form-control">
                                                                            </td>
                                                                            <td> <input  formControlName="tech2Per"
                                                                                class="form-control" >
                                                                        </td>
                                                                        <td> <input  type="text"
                                                                                formControlName="tech2Amt" class="form-control">
                                                                        </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td> <input  type="text"
                                                                                formControlName="tech3" class="form-control">
                                                                        </td>
                                                                        <td> <input  formControlName="tech3Per"
                                                                            class="form-control" >
                                                                    </td>
                                                                    <td> <input  type="text"
                                                                            formControlName="tech3Amt" class="form-control">
                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td> <input  type="text"
                                                                                        formControlName="tech4" class="form-control">
                                                                                </td>
                                                                                <td> <input  formControlName="tech4Per"
                                                                                    class="form-control" >
                                                                            </td>
                                                                            <td> <input  type="text"
                                                                                    formControlName="tech4Amt" class="form-control">
                                                                            </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td> <input  type="text"
                                                                                        formControlName="tech5" class="form-control">
                                                                                </td>
                                                                                <td> <input  formControlName="tech5Per"
                                                                                    class="form-control" >
                                                                            </td>
                                                                            <td> <input  type="text"
                                                                                    formControlName="tech5Amt" class="form-control">
                                                                            </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td> <input  type="text"
                                                                                        formControlName="tech6" class="form-control">
                                                                                </td>
                                                                                <td> <input  formControlName="tech6Per"
                                                                                    class="form-control" >
                                                                            </td>
                                                                            <td> <input  type="text"
                                                                                    formControlName="tech6Amt" class="form-control">
                                                                            </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td> <input  type="text"
                                                                                        formControlName="tech7" class="form-control">
                                                                                </td>
                                                                                <td> <input  formControlName="tech7Per"
                                                                                    class="form-control" >
                                                                            </td>
                                                                            <td> <input  type="text"
                                                                                    formControlName="tech7Amt" class="form-control">
                                                                            </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td> <input  type="text"
                                                                                        formControlName="tech8" class="form-control">
                                                                                </td>
                                                                                <td> <input  formControlName="tech8Per"
                                                                                    class="form-control" >
                                                                            </td>
                                                                            <td> <input  type="text"
                                                                                    formControlName="tech8Amt" class="form-control">
                                                                            </td>
                                                                                </tr>

                                                                                  <tr> -->
                                                                <!-- <th scope="col">SL. NO.</th> -->
                                                                <!-- <th scope="col">Contractor code</th>
                                                                                        <th scope="col">Percentage</th>
                                                                                        <th scope="col">Amount</th>
                                                                                    </tr> -->

                                                                <!-- <tr> -->
                                                                <!-- <td> <input  type="text"
                                                                                            formControlName="contr1" class="form-control">
                                                                                    </td>
                                                                                    <td> <input  formControlName="contr1Per"
                                                                                        class="form-control" >
                                                                                </td>
                                                                                <td> <input  type="text"
                                                                                        formControlName="contr1Amt" class="form-control">
                                                                                </td> -->
                                                                <!-- </tr>
                                                                                    <tr>
                                                                                        <td> <input  type="text"
                                                                                            formControlName="contr2" class="form-control">
                                                                                    </td>
                                                                                    <td> <input  formControlName="contr2Per"
                                                                                        class="form-control" >
                                                                                </td>
                                                                                <td> <input  type="text"
                                                                                        formControlName="contr2Amt" class="form-control">
                                                                                </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td> <input  type="text"
                                                                                            formControlName="contr3" class="form-control">
                                                                                    </td>
                                                                                    <td> <input  formControlName="contr3Per"
                                                                                        class="form-control" >
                                                                                </td>
                                                                                <td> <input  type="text"
                                                                                        formControlName="contr3Amt" class="form-control">
                                                                                </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td> <input  type="text"
                                                                                            formControlName="contr4" class="form-control">
                                                                                    </td>
                                                                                    <td> <input  formControlName="contr4Per"
                                                                                        class="form-control" >
                                                                                </td>
                                                                                <td> <input  type="text"
                                                                                        formControlName="contr4Amt" class="form-control">
                                                                                </td>
                                                                                    </tr>  -->
                                                            </ng-container>
                                                        </ng-container>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-primary" data-dismiss="modal"
                                                aria-hidden="true" (click)="fnCancatination(content)">OK</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-template>

                    </div>
                    <!-- </form> -->
                </div>
            </div>
        </div>

    


<div class="modal" id="confirmAlert" tabindex="-1" role="dialog" aria-hidden="true" style="width: 500px; text-align: center;">
    <div class="modal-dialog modal-dialog-centered modal-sm"  role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" >Confirmation!</h5>
        </div>
        <div class="modal-body">
            <label style="font-size: small; color: black; font-weight: bold; text-align: center; vertical-align: middle;">
                {{message}}
            </label>

            <td> <input  type="text"
                formControlName="regNo1" value={{regNo1}} class="form-control">
           </td>

         

        </div>
        <div class="modal-footer">
            <table class="center">
        <tr>
            <td>
            <button  type="submit" class="btn btn-primary" data-dismiss="modal" id="register"   (click)="executeAction()">Yes</button>
            </td>
            <td>
            <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
            </td>
        </tr>
        </table>
        </div>
        </div>
        </div>
</div>


<div class="modal fade" id="jobCardSearch" tabindex="-1" role="dialog" aria-labelledby="jobCardSearchLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
         <div class="modal-header" >
            <h5 class="modal-title" id="jobCardSearchLabel" style="text-align: center;color:blue">Jobcard&nbsp;Search&nbsp; </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
        </div>
        <div class="modal-body">
            <fieldset class="RFS">
                <legend id="FormsPH_LGAadhaar" class="RFSL" style="font-size: 12px;color: black;font-weight: bold;">Search Criteria</legend>
         
          
            <table class="center" style="width: 100%;">
                <tr>

                    <td  style="background-color: #FFE4B5;" class="LabelFontStyle">&nbsp;Job&nbsp;&nbsp;Number:&nbsp;</td>
                    
                    <td style="background-color: #FFE4B5;">
                        <input type="text" class="form-control" formControlName="jobCardNum2"  value={{jobCardNum2}} [(ngModel)]="jobCardNum2" style="text-transform:uppercase;"  >
                    </td>

                    <td  style="background-color: #FFE4B5;" class="LabelFontStyle">&nbsp;Reg&nbsp;&nbsp;Number:&nbsp;</td>
                    
                    <td style="background-color: #FFE4B5;">
                        <input type="text" class="form-control" formControlName="regNo1"  value={{regNo1}} [(ngModel)]="regNo1" style="text-transform:uppercase;" >
                    </td>

                   
                    <td  style="background-color: #FFE4B5;" class="LabelFontStyle">&nbsp;Job&nbsp;&nbsp;Date:&nbsp;</td>
                    
                    <td style="background-color: #FFE4B5;">
                        <input type="date" class="form-control" formControlName="JobOpenDt"  value={{JobOpenDt}} [(ngModel)]="JobOpenDt"  >
                    </td>

                    <td  style="background-color: #FFE4B5;" class="LabelFontStyle">&nbsp;Job&nbsp;&nbsp;Status:&nbsp;</td>
                    
                    <!-- <td style="background-color: #FFE4B5;">
                        <input type="text" class="form-control" formControlName="jobStatus1"  value={{jobStatus1}} [(ngModel)]="jobStatus1"  >
                    </td> -->

                    <td>
                        <select formControlName="jobStatus1" id="jobStatus1" value={{jobStatus1}} class="form-control"  >
                        <!-- (ngModelChange)="onSelectionRevStatus($event)"  [(ngModel)]="jobStatus1"  -->
                        <option></option>
                        <option value="Opened">Opened</option>
                        <option value="Ready for Invoice">Ready for Invoice</option>
                        <option value="Invoiced">Invoiced</option>
                        <option value="Closed">Closed</option>
                        </select>
                    </td>
                   

                     <td>
                        <button  type="button" class="btn btn-primary"  id="register"   (click)="jobcardFindNew()">Find</button>
                   </td>
                   
                   <td>
                    <button style="width:fit-content" type="button" class="btn btn-primary" (click)="clearSearch()">Reset</button>
                   </td>
                   
                    </tr>
                                     

                </table>
                </fieldset>

                <fieldset class="RFS">
                    <legend id="FormsPH_LGAadhaar" class="RFSL" style="font-size: 12px;color: black;font-weight: bold;">Jobcard List</legend>
                  
                    <div class="container1">
                            <div class="grid_scroll">
                            <table class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="border-color:#959595;border-collapse:collapse;width: 100%;">
                                <tbody>
                                        <tr class="GridHeader">
                                        <th  scope="col">Srl&nbsp;No&nbsp;</th> 
                                        <th  scope="col">Reg&nbsp;No&nbsp;</th>
                                        <th  scope="col">Job&nbsp;No&nbsp;</th>
                                        <th  scope="col">Job&nbsp;Date</th>
                                        <th  scope="col">Job&nbsp;Type</th>
                                        <th  scope="col">Status&nbsp;</th>
                                        <th  scope="col">Service&nbsp;Advisor</th>
                                        <th  scope="col">Cust&nbsp;Name</th>
                                        <th  scope="col">Cust&nbsp;No&nbsp;</th>

                                        <!-- <th style="width:7rem" scope="col"> Conatct&nbsp;No</th> -->
                                        <th style="width:6rem" scope="col">Select</th>
                                    </tr>
                                </tbody>
                                <tr *ngFor="let com of lstJobcardList let i=index" class="ItemStyle" style="text-decoration:none;font-size:small;">
                                        <td style="text-align: center;width: 2rem;">{{i+1}}</td>
                                        <td style="text-align: center;width: 5rem;">{{com.regNo}}</td>
                                        <td style="text-align: center;width: 5rem;">{{com.jobCardNum}}</td>
                                        <td style="text-align: center;width: 5rem;">{{com.jobCardDate |date:'dd-MM-y' }}</td>
                                        <td style="text-align: center;width: 5rem;">{{com.attribute1}}</td>
                                        <td style="text-align: center;width: 8rem;">{{com.status}}</td>
                                        <td style="text-align: left;width: 16rem;">{{com.fullName}}</td>
                                        <td style="text-align: left;width: 16rem;">{{com.custName}}</td>
                                        <td style="text-align: center;width: 2rem;">{{com.custAccountNo}}</td> 
                                        <button  type="submit" class="btn btn-secondary" data-dismiss="modal" id="register"   (click)="Search(com.jobCardNum)">Select</button>
                                </tr> 
                            </table>
                        </div>
                        </div>
                    
                    </fieldset>

                


         

        </div>
        <div class="modal-footer">

            
            
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>

        </div>
        </div>
</div>



</div>
</form>

