<div class="center">
    <table style="width:100% ;background-color:white;">
        <tr>
            <td colspan="4" class="PageHeader" style="width:100%;">
                Descriptive FlexField Segment
            </td>
        </tr>
    </table>
    <div class="center" style="width:100%;">
        <div class="form-bg">

<form [formGroup]="flexFieldForm" (ngSubmit)="flexField(flexFieldForm.value)" >

    <table class="center" style ="margin-top: 10px;">

        <tr>
            <td style="width: 15%;" class="LabelFontStyle1">Application:</td>
            <td>
                <select class="form-control"  formControlName="applicationId" id="applicationId" [(ngModel)]="applicationId" (ngModelChange)="onOptionSelectedTitle($event)">
                            <option> select</option>
                           <option *ngFor="let sc of  applList" [ngValue]="sc.applicationId">
                      {{sc.applicationName}}
                  </option>
                        </select>
                        <span *ngIf ="!flexFieldForm.get('applicationId').valid && flexFieldForm.get('applicationId').touched">
                            Please select Application Name
                        </span>
                </td>
            <td style="width: 15%;" class="LabelFontStyle1">Title:</td>
            <td>
            <select class="form-control" formControlName="title" [(ngModel)]="title" >
                <option>select</option>
                <option *ngFor ="let sc of titleList" [ngValue]="sc.title">
                    {{sc.title}}
                </option>
                </select>
                <span *ngIf ="!flexFieldForm.get('title').valid && flexFieldForm.get('title').touched">
                        Please select Application Name
                    </span>
                <!-- <input class="form-control" formControlName="title" [(ngModel)]="title"> -->
            </td>
        </tr>
    </table>
    <br>

    <div formArrayName="flexCodeLn">
            <table class="table table-bordered" style="border-collapse:collapse;">
                    <thead>
                        <tr>
            <table  class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="border-color:#959595;border-collapse:collapse;width: 100%;">
            <!-- class="table table-bordered" style="border-collapse:collapse;" -->
                    <thead>
                        <tr class="GridHeader">
                                <th>Code</th>
                                <th>Name</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Add</th>
                                <th>Delete</th>
                        </tr>
                    </thead>
                    <ng-container *ngFor="let flexCodeLns of flexCodeLn().controls; let flexCodeLnIndex=index" [formGroupName]="flexCodeLnIndex">
                    <tbody>
                            <div *ngIf="display; then thenBlock; else elseBlock"></div>
                            <ng-template #thenBlock>
                        <tr colspan="6" data-toggle="collapse" data-target="#flexCode{{flexCodeLnIndex}}" class="accordion-toggle">
                                <td><input type="text" class="form-control" formControlName="descFlexConCode" id="descFlexConCode" (click)="dispDetails(flexCodeLnIndex,descFlexConCode)" ></td>
                                <td><input type="text" class="form-control" formControlName="flexCodeDesc" ></td>
                                <td><input type="date" class="form-control" formControlName="startDate" ></td>
                                <td><input disabled type="date" class="form-control" formControlName="endDate" ></td>
                                <td><input type="text" class="form-control" formControlName="descFlexConCode" id="descFlexConCode" (click)="dispDetails(flexCodeLnIndex,descFlexConCode)" style="height: 22px;" ></td>
                                <td><input type="text" class="form-control" formControlName="flexCodeDesc" style="height: 22px;" ></td>
                                <td><input type="date" class="form-control" formControlName="startDate" style="height: 22px;" ></td>
                                <td><input disabled type="date" class="form-control" formControlName="endDate" style="height: 22px;" ></td>
                                <td><button type="button" class="btn btn-primary fa fa-plus"  style="width: 2rem;" (click)="addflexCodeLn()"></button></td>
                                <td><button type="button" class="btn btn-primary fa fa-trash"style="width: 2rem;"(click)="removeflexCodeLn(flexCodeLnIndex)"></button></td>
                        </tr>
                        <tr class="p">
                            <td colspan="6" class="hiddenRow" >
                                                                                                                                                                                                                                                                                                                                                                                       <div formArrayName="flexLn">
                                <div class="accordian-body collapse p-3" id="flexCode{{flexCodeLnIndex}}">

                                    <table class="auto-style4" class="GridFont" cellspacing="0" cellpadding="4" border="0" id="ctl00_cpForm_grdActions" style="border-color:#959595;border-collapse:collapse;width: 100%;">
                                        <tr class="GridHeader">
                                                <th>Number</th>
                                                <th>Name</th>
                                                <th>Window Prompt</th>
                                                <th>Column</th>
                                                <th>value set</th>
                                                <th>Add</th>
                                                <th>Delete</th>
                                        </tr>
                                        <ng-container *ngFor="let flexLns of flexLn(flexCodeLnIndex).controls; let flexLnIndex=index" [formGroupName]="flexLnIndex">
                                                <tr>
                                                 <td><input type="text" class="form-control" formControlName="applicationColName"  style="width: 8rem;"></td>
                                                 <td><input type="text" class="form-control" formControlName="language" style="width: 8rem;height: 22px;"></td>
                                                 <td><input type="text" class="form-control" formControlName="formLeftPrompt" style="width: 10rem;height: 22px;" ></td>
                                                 <td><input type="text" class="form-control" formControlName="formAbovePrompt" value={{formAbovePrompt}} style="width: 8rem;height: 22px;"></td>
                                                 <td><input type="text" class="form-control"  style="width: 8rem;height: 22px;"></td>
                                                 <td><button type="button" class="btn btn-primary fa fa-plus"  style="width: 2rem;" (click)="addflexLn(flexCodeLnIndex)"></button></td>
                                                 <td><button type="button" class="btn btn-primary fa fa-trash"style="width: 2rem;"(click)="removeflexLn(flexCodeLnIndex,flexLnIndex)"></button></td>
                                               </tr>
                                            </ng-container>

                                    </table>
                                </div>
                                </div>
                            </td>
                        </tr>
                            </ng-template>
                            <ng-template #elseBlock>
                                    <tr colspan="6" data-toggle="collapse" data-target="#flexCode{{flexCodeLnIndex}}" class="accordion-toggle">
                                            <td><input  type="text" class="form-control" formControlName="descFlexConCode" id="descFlexConCode" (click)="dispDetails(flexCodeLnIndex,descFlexConCode)" readonly></td>
                                            <td><input disabled type="text" class="form-control" formControlName="flexCodeDesc" ></td>
                                            <td><input disabled type="date" class="form-control" formControlName="startDate" ></td>
                                            <td><input  type="date" class="form-control" formControlName="endDate" ></td>
                                            <td><button disabled type="button" class="btn btn-primary fa fa-plus"  style="width: 2rem;" (click)="addflexCodeLn()"></button></td>
                                            <td><button disabled type="button" class="btn btn-primary fa fa-trash"style="width: 2rem;"(click)="removeflexCodeLn(flexCodeLnIndex)"></button></td>
                                    </tr>
                                    <tr class="p">
                                        <td colspan="6" class="hiddenRow" >
                                                                                                                                                                                                                                                                                                                                                                                                   <div formArrayName="flexLn">
                                            <div class="accordian-body collapse p-3" id="flexCode{{flexCodeLnIndex}}">

                                                <table>
                                                    <tr>
                                                            <th>Number</th>
                                                            <th>Name</th>
                                                            <th>Window Prompt</th>
                                                            <th>Column</th>
                                                            <th>value set</th>
                                                            <th>Add</th>
                                                            <th>Delete</th>
                                                    </tr>
                                                    <ng-container *ngFor="let flexLns of flexLn(flexCodeLnIndex).controls; let flexLnIndex=index" [formGroupName]="flexLnIndex">
                                                            <tr>
                                                             <td><input disabled type="text" class="form-control" formControlName="applicationColName"  style="width: 8rem;"></td>
                                                             <td><input disabled type="text" class="form-control" formControlName="language" style="width: 8rem;"></td>
                                                             <td><input disabled type="text" class="form-control" formControlName="formLeftPrompt" style="width: 10rem;" ></td>
                                                             <td><input disabled type="text" class="form-control" formControlName="formAbovePrompt" value={{formAbovePrompt}} style="width: 8rem;"></td>
                                                             <td><input disabled type="text" class="form-control"  style="width: 8rem;"></td>
                                                             <td><button disabled type="button" class="btn btn-primary fa fa-plus"  style="width: 2rem;" (click)="addflexLn(flexCodeLnIndex)"></button></td>
                                                             <td><button disabled type="button" class="btn btn-primary fa fa-trash"style="width: 2rem;"(click)="removeflexLn(flexCodeLnIndex,flexLnIndex)"></button></td>
                                                           </tr>
                                                        </ng-container>

                                                </table>
                                            </div>
                                            </div>
                                        </td>
                                    </tr>
                                        </ng-template>
                    </tbody>
                    </ng-container>

                    </table>
                    </tr>
                    </thead>
            </table>
            </div>

    <table class="center">
            <tr>
                    <div *ngIf="displayButton; then thenBlock1; else elseBlock1"></div>
                    <ng-template #thenBlock1>
                        <td><button type="button" class="btn btn-primary" (click)="newFlexField()">Save</button></td>
                        <td><button type="button" class="btn btn-primary" (click)="resetMast()">Reset</button></td>
                        <td><button type="button" class="btn btn-primary" (click)="closeMast()">Close</button></td>
                        <td><button type="button" class="btn btn-primary" (click)="SearchMast()">Search</button></td>
                    </ng-template>
                    <ng-template #elseBlock1>
                            <td><button type="button" class="btn btn-primary" >Update</button></td>
                            <td><button type="button" class="btn btn-primary" (click)="resetMast()">Reset</button></td>
                            <td><button type="button" class="btn btn-primary" (click)="closeMast()">Close</button></td>
                            <td><button type="button" class="btn btn-primary" (click)="SearchMast()">Search</button></td>
                        </ng-template>

            </tr>
    </table>



</form>
</div>
</div>
</div>

<!-- {{this.flexFieldForm.value | json}} -->
